[
  {
    "id": 77544,
    "type": 1,
    "status": 2,
    "agent_id": 3763909,
    "created_at": "2013-04-19T14:31:08Z",
    "category_id": 81138,
    "folder_id": 133168,
    "title": "Call Process",
    "updated_at": "2020-02-19T20:08:20Z",
    "description": "<h3><span style=\"font-size: 18px;\">Call Process</span></h3><p><br>The process starts when the softswitch receives the incoming call from the originating gateway or SIP endpoint. <em>The switch then identifies the caller\u2019s Account</em> (1). \u00a0The start of the process is called Authentication. \u00a0If the Account cannot be identified the call is rejected. Once the Account has been identified the <em>switch enumerates all Customers that need to be charged for the call</em> (2). For each Account and Customer in the list, the<strong>\u00a0</strong>switch then locates the associated Tariff and Rate; it then <em>calculates the maximum duration for the call</em> (3) based on the number called.  If at least one Rate cannot be found or if the balance of the Account or  Customer is not sufficient the call is rejected.<br><br>The next step is <strong>Routing</strong> \u2013 <em>based on the number called and routing configuration assigned to the Account or Customer</em> the switch <em>enumerates one or more Connections for terminating the call to</em> (4). Based on that information the switch performs actual overflow <em>routing</em> (5) until the call is either connected or there are no more connections to try.<br><br>Once the call has been completed, either successfully or unsuccessfully the switch charges Account, Customer(s) and Vendor associated with the call and <em>creates the appropriate CDRs</em> (6).\u00a0</p><p><br></p><p><img style=\"cursor: default;\" src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/4994927/original/call_process.png?1366381813\" class=\"fr-fic fr-dii\"></p>",
    "description_text": " Call Process   The process starts when the softswitch receives the incoming call from the originating gateway or SIP endpoint. The switch then identifies the caller\u2019s Account (1). \u00a0The start of the process is called Authentication. \u00a0If the Account cannot be identified the call is rejected. Once the Account has been identified the switch enumerates all Customers that need to be charged for the call (2). For each Account and Customer in the list, the\u00a0switch then locates the associated Tariff and Rate; it then calculates the maximum duration for the call (3) based on the number called.  If at least one Rate cannot be found or if the balance of the Account or  Customer is not sufficient the call is rejected.  The next step is Routing \u2013 based on the number called and routing configuration assigned to the Account or Customer the switch enumerates one or more Connections for terminating the call to (4). Based on that information the switch performs actual overflow routing (5) until the call is either connected or there are no more connections to try.  Once the call has been completed, either successfully or unsuccessfully the switch charges Account, Customer(s) and Vendor associated with the call and creates the appropriate CDRs (6).\u00a0      ",
    "seo_data": {
      "meta_title": "",
      "meta_description": "",
      "meta_keywords": "Call Process, Process"
    },
    "tags": [],
    "attachments": [],
    "cloud_files": [],
    "thumbs_up": 13,
    "thumbs_down": 4,
    "hits": 1862,
    "suggested": 0,
    "feedback_count": 0
  },
  {
    "id": 77553,
    "type": 1,
    "status": 2,
    "agent_id": 3763909,
    "created_at": "2013-04-19T14:50:24Z",
    "category_id": 81138,
    "folder_id": 133168,
    "title": "Understanding Authentication",
    "updated_at": "2021-09-02T20:15:45Z",
    "description": "<div data-identifyelement=\"468\" dir=\"ltr\"><div data-identifyelement=\"469\" dir=\"ltr\"><h1 data-identifyelement=\"470\" style=\"text-align: center;\"><span data-identifyelement=\"471\" style=\"font-size: 18px;\">Understanding Authentication</span></h1><br data-identifyelement=\"472\">Authentication is the process of establishing association between an incoming call and an Account in the system. There are two basic methods for performing Authentication in the Softswitch: using secure SIP digest and using Authentication Rules. The two methods are described in detail below. Note that both methods can be combined together to provide advanced features (see DID assigning example below).</div><div data-identifyelement=\"469\" dir=\"ltr\"><br></div><h2 data-identifyelement=\"469\" dir=\"ltr\"><span dir=\"ltr\" style=\"font-size: 18px; font-family: &quot;Trebuchet MS&quot;, Helvetica, sans-serif;\">Sippy Softswitch uses the following authentication chain sequentially</span></h2><div data-identifyelement=\"469\" dir=\"ltr\"><br></div><div data-identifyelement=\"469\" dir=\"ltr\"><span style=\"font-size: 12px;\"><img src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3061633020/original/AOqLmeIvdqZsymN5dgS_ST3m0IGLhBViCQ.png?1614244489\" style=\"width: auto;\" class=\"fr-fic fr-fil fr-dib fr-bordered\" data-attachment=\"[object Object]\" data-id=\"3061633020\"></span></div><div data-identifyelement=\"469\" dir=\"ltr\"><ul style=\"list-style-type: circle;\"><li dir=\"ltr\" style=\"line-height:1.2;margin-top:0pt;margin-bottom:0pt;\"><span style=\"font-size: 12px;\"><span dir=\"ltr\" style=\"font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">When any call comes into the Softswitch, the very first place the system tries to find an acceptable authentication match is the DID Pool section &nbsp;</span></span></li><li dir=\"ltr\" style=\"line-height:1.2;margin-top:0pt;margin-bottom:0pt;\"><span dir=\"ltr\" style=\"font-size: 12px; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">If a match for the incoming call is not found in the DID's authentication rules, the System checks all available authentication rules under Accounts &nbsp;</span></li><li dir=\"ltr\" style=\"line-height:1.2;margin-top:0pt;margin-bottom:0pt;\"><span dir=\"ltr\" style=\"font-size: 12px; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">If there is no matched rule in the authentication rules of any Account, the system sends a \"401 Unauthorized\" response <span dir=\"ltr\" style=\"font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;\">to the remote device with a \"WWW-Authenticate\" for the digest authentication</span>&nbsp; &nbsp;</span></li><li dir=\"ltr\" style=\"line-height:1.2;margin-top:0pt;margin-bottom:0pt;\">If the remote end provides the correct credentials for the digest authentication, the system authenticates the call and proceeds with the authorization process.</li></ul><p dir=\"ltr\" style=\"line-height:1.2;margin-top:0pt;margin-bottom:0pt;\"><br></p><h3 data-identifyelement=\"476\"><span data-identifyelement=\"477\" style=\"font-size: 18px;\">Secure SIP Digest-based Authentication</span></h3><p data-identifyelement=\"478\"><br data-identifyelement=\"479\">For this type of authentication, a call is mapped into the Account by performing secure SIP digest authentication. In practice that means that the device or software that originates the call has a username and password configured and that those parameters are matched against the VoIP Login and VoIP Password parameters of all Accounts until a match is found.<br data-identifyelement=\"480\"><br data-identifyelement=\"481\">Only this type of authentication allows a SIP device to register itself with the Softswitch, providing the requirements for receiving on-net calls.<br data-identifyelement=\"482\"><br data-identifyelement=\"483\">The primary use of this Authentication method is to facilitate the connection of SIP phones and ATAs to the softswitch.</p><p data-identifyelement=\"484\"><br data-identifyelement=\"485\"></p><h3 data-identifyelement=\"486\"><span data-identifyelement=\"487\" style=\"font-size: 18px;\">Rules-based Authentication</span></h3><p data-identifyelement=\"488\"><br data-identifyelement=\"489\">For this type of authentication, a call is mapped into the Account by matching four parameters of the incoming call against one or more Authentication Rules associated with the Account. &nbsp;Below are the four parameters matched:</p><ul data-identifyelement=\"490\"><li data-identifyelement=\"491\">IP address of the device or server that originates the call</li><li data-identifyelement=\"492\">Calling Number / ANI (CLI)</li><li data-identifyelement=\"493\">Called Number / Destination Number (CLD)</li><li data-identifyelement=\"494\">Protocol (SIP, H.323, IAX2, Calling Card PIN)</li></ul><p data-identifyelement=\"495\"><br data-identifyelement=\"496\"></p><p data-identifyelement=\"497\">The first three protocols check the match of incoming traffic to the parameter used in the rule. &nbsp;The Calling Card PIN is used only when the IVR application is used, and the card number (PIN) is requested.</p><p data-identifyelement=\"498\">The system first checks the match of the number entered against the username/voip login of any Account in the system. &nbsp;If no match is found, the Authentication Rules, Protocol, and Calling Card PIN are checked for the match.</p><p data-identifyelement=\"499\"><br data-identifyelement=\"500\"></p><p data-identifyelement=\"501\">In order for the call to match the rule, each of the four parameters of the call must match with the appropriate parameter of at least one Authentication Rule. &nbsp;When one parameter or Rule is empty only the remaining parameters are matched against incoming calls (Protocol can never be empty)<br data-identifyelement=\"502\"><br data-identifyelement=\"503\">For example: &nbsp;The first rule will match any call originated from IP address 1.2.3.4, CLI 567890 and any CLD. &nbsp;The second rule will match calls with CLD 123456789 and any CLI coming from any IP.</p><br data-identifyelement=\"504\"><table class=\"wiki\" data-identifyelement=\"505\"><tbody data-identifyelement=\"506\"><tr data-identifyelement=\"507\"><td data-identifyelement=\"508\">#</td><td data-identifyelement=\"509\">Remote IP Address</td><td data-identifyelement=\"510\">Incoming CLI/ANI</td><td data-identifyelement=\"511\">Incoming CLD/DNIS</td></tr><tr data-identifyelement=\"512\"><td data-identifyelement=\"513\">1</td><td data-identifyelement=\"514\">1.2.3.4</td><td data-identifyelement=\"515\">567890</td><td data-identifyelement=\"516\"><br data-identifyelement=\"517\"></td></tr><tr data-identifyelement=\"518\"><td data-identifyelement=\"519\">2</td><td data-identifyelement=\"520\"><br data-identifyelement=\"521\"></td><td data-identifyelement=\"522\"><br data-identifyelement=\"523\"></td><td data-identifyelement=\"524\">123456789</td></tr></tbody></table><br data-identifyelement=\"525\"></div><div data-identifyelement=\"526\" dir=\"ltr\"><br data-identifyelement=\"527\"></div><div data-identifyelement=\"528\" dir=\"ltr\"><span data-identifyelement=\"529\" style=\"font-size: 18px;\"><strong data-identifyelement=\"530\">Regular Expressions use:</strong></span></div><ul data-identifyelement=\"531\"><li data-identifyelement=\"532\"><div data-identifyelement=\"533\" dir=\"ltr\"><strong data-identifyelement=\"534\">Match any sequence of symbols in the whole number</strong></div></li></ul>Using a wildcard (*) in the Incoming CLI and Incoming CLD fields after the number, will result in prefix matching.&nbsp;</div><div data-identifyelement=\"535\" dir=\"ltr\">For example the following modification of the first rule above will match any call originated from IP address 1.2.3.4 and any CLI starting with 567890 (e.g. 567890123).</div><div data-identifyelement=\"536\" dir=\"ltr\"><p data-identifyelement=\"537\"><br data-identifyelement=\"538\"></p><table data-identifyelement=\"539\"><tbody data-identifyelement=\"540\"><tr data-identifyelement=\"541\"><td data-identifyelement=\"542\">#</td><td class=\"current\" data-identifyelement=\"543\">Remote IP Address</td><td data-identifyelement=\"544\"><p class=\"current\" data-identifyelement=\"545\">Incoming CLI/ANI</p></td><td data-identifyelement=\"546\">&nbsp;Incoming CLD/DNIS</td></tr><tr data-identifyelement=\"547\"><td data-identifyelement=\"548\">1</td><td data-identifyelement=\"549\">1.2.3.4</td><td data-identifyelement=\"550\">567890*</td><td data-identifyelement=\"551\"><br data-identifyelement=\"552\"></td></tr></tbody></table><p data-identifyelement=\"553\"><br data-identifyelement=\"554\"></p><div data-identifyelement=\"555\" dir=\"ltr\">Note: a wildcard can match the absence of symbols, so the 567890* rule will match 567890 CLI as well.</div><p data-identifyelement=\"556\"><br data-identifyelement=\"557\"></p><ul data-identifyelement=\"558\"><li data-identifyelement=\"559\"><strong data-identifyelement=\"560\">Match any symbol in any place of the number (starting from version 5.2)</strong></li></ul><p data-identifyelement=\"561\">This pattern can be set in the Incoming CLI and Incoming CLD fields by placing a question mark ('?') within the number. &nbsp;The result will be number matching where the question mark matches any symbol in the incoming number.</p><div data-identifyelement=\"562\" dir=\"ltr\">For example: the rule below will match any call originated from IP address 1.2.3.4 and any CLI that starts with 567, is followed by any symbol, followed by 90 and any other symbol (e.g. 5678901 or 5670903).</div><div data-identifyelement=\"563\" dir=\"ltr\"><p data-identifyelement=\"564\"><br data-identifyelement=\"565\"></p><table data-identifyelement=\"566\"><tbody data-identifyelement=\"567\"><tr data-identifyelement=\"568\"><td data-identifyelement=\"569\">#</td><td class=\"current\" data-identifyelement=\"570\">Remote IP Address</td><td data-identifyelement=\"571\"><p class=\"current\" data-identifyelement=\"572\">Incoming CLI/ANI</p></td><td data-identifyelement=\"573\">&nbsp;Incoming CLD/DNIS</td></tr><tr data-identifyelement=\"574\"><td data-identifyelement=\"575\">1</td><td data-identifyelement=\"576\">1.2.3.4</td><td data-identifyelement=\"577\">567?90?</td><td data-identifyelement=\"578\"><br data-identifyelement=\"579\"></td></tr></tbody></table><div data-identifyelement=\"580\" dir=\"ltr\"><br data-identifyelement=\"581\"></div><div data-identifyelement=\"582\" dir=\"ltr\">Note: the question mark CANNOT match the absence of a symbol, so the 567?90? rule will NOT match either 567890 or 567901 numbers.</div><p data-identifyelement=\"583\"><br data-identifyelement=\"584\"></p><p data-identifyelement=\"585\"><br data-identifyelement=\"586\"></p><p data-identifyelement=\"587\"><span data-identifyelement=\"588\" style=\"font-size: 18px;\"><strong data-identifyelement=\"589\">Weight distribution for authentication rules (Sippy Softswitch v5.2 and before)</strong></span></p></div><p data-identifyelement=\"590\"><br data-identifyelement=\"591\"></p><p data-identifyelement=\"592\">When performing the match against several concurrent Rules, the softswitch also calculates so-called weights for each matching Rule in order to determine the best match. The formula is as follows:</p><p data-identifyelement=\"593\"><br data-identifyelement=\"594\"></p>1. Matching IP address adds 1.0 to the resulting weight<br data-identifyelement=\"595\">2. Matching non-wildcard, CLD or CLI adds 1.5 to the resulting weight<br data-identifyelement=\"596\">3. Matching wildcard, CLD or CLI adds 1.0 to the resulting weight<br data-identifyelement=\"597\">4. For any matching wildcard, CLI or CLD the resulting weight is increased by the length of the matching part divided by 100<br data-identifyelement=\"598\">5. For any question mark, CLI or CLD, the resulting weight is decreased by 0.001 If a wildcard is present in the matching CLI or CLD, the question mark is considered a regular symbol to be added to the weight accordingly<br data-identifyelement=\"599\"><p data-identifyelement=\"600\"><br data-identifyelement=\"601\">For example, if a call from IP address 1.2.3.4, CLI 567890 and CLD 123456789 arrives, the weights would be calculated as follows:</p><p data-identifyelement=\"602\"><br data-identifyelement=\"603\"></p><table data-identifyelement=\"604\"><tbody data-identifyelement=\"605\"><tr data-identifyelement=\"606\"><td data-identifyelement=\"607\">#</td><td data-identifyelement=\"608\">Remote IP Address</td><td class=\"current\" data-identifyelement=\"609\">Incoming CLI/ANI</td><td data-identifyelement=\"610\">Incoming CLD/DNIS</td><td data-identifyelement=\"611\">Weight</td></tr><tr data-identifyelement=\"612\"><td data-identifyelement=\"613\">1</td><td data-identifyelement=\"614\">1.2.3.4</td><td data-identifyelement=\"615\">567890</td><td data-identifyelement=\"616\"><br data-identifyelement=\"617\"></td><td data-identifyelement=\"618\">1.0+1.5=2.5</td></tr><tr data-identifyelement=\"619\"><td data-identifyelement=\"620\">2</td><td data-identifyelement=\"621\"><br data-identifyelement=\"622\"></td><td data-identifyelement=\"623\"><br data-identifyelement=\"624\"></td><td data-identifyelement=\"625\">123456789</td><td data-identifyelement=\"626\">1.5</td></tr><tr data-identifyelement=\"627\"><td data-identifyelement=\"628\">3</td><td data-identifyelement=\"629\">1.2.3.4</td><td data-identifyelement=\"630\">567890*</td><td data-identifyelement=\"631\"><br data-identifyelement=\"632\"></td><td data-identifyelement=\"633\">1.0+1.0+(6/100)=2.06</td></tr><tr data-identifyelement=\"634\"><td data-identifyelement=\"635\">4</td><td data-identifyelement=\"636\"><br data-identifyelement=\"637\"></td><td data-identifyelement=\"638\">567?9*</td><td data-identifyelement=\"639\"><br data-identifyelement=\"640\"></td><td data-identifyelement=\"641\">1-0.001+0.05=1.049</td></tr></tbody></table><p data-identifyelement=\"642\"><br data-identifyelement=\"643\"></p><p data-identifyelement=\"644\"><br data-identifyelement=\"645\"></p><p data-identifyelement=\"646\">Based on the example above, rule 1 would be selected as the best match.&nbsp;</p><p data-identifyelement=\"647\">Note that if there are multiple rules with the same weight that can be considered \"best\" match, they will be rejected (due to ambiguity) if they use an Authentication rule; in this case, only Digest Authentication would be possible. &nbsp;The error message \"401 Unauthorized\" is used when there is ambiguity. &nbsp;</p><p data-identifyelement=\"648\"><br data-identifyelement=\"649\"></p><h3 data-identifyelement=\"650\"><span data-identifyelement=\"651\" style=\"font-size: 18px;\">Typical Applications for Rules-based Authentication</span></h3><p data-identifyelement=\"652\"><br data-identifyelement=\"653\">Rules-based Authentication can accommodate different real-world scenarios. &nbsp;Sample of scenarios and steps to implement them are listed below:</p><ul data-identifyelement=\"654\"><li data-identifyelement=\"655\">VoIP Peering. &nbsp;Enter IP address of your peer\u2019s softswitch into the Remote IP Address field</li><li data-identifyelement=\"656\">PSTN origination. &nbsp;Enter IP address of the gateway into the Remote IP Address field. &nbsp;If there are multiple gateways several rules with different IP addresses can be added</li><li data-identifyelement=\"657\">Assigning DID numbers. &nbsp;DID (Direct Inward Dialing) can be implemented by combining secure SIP digest authentication with one or more Authentication Rules that contain the DID number (as CLD) from the originating gateway. &nbsp;Optionally, the Remote IP Address can be used to only allow calls (considered DID calls) from a specific gateway. &nbsp;It may be necessary to apply a Translation Rule to ensure proper routing of the call to the registered Account.</li></ul><p data-identifyelement=\"658\"><br data-identifyelement=\"659\"></p><h3 data-identifyelement=\"660\"><span data-identifyelement=\"661\" style=\"font-size: 18px;\">Accessing Authentication Rules</span></h3><p data-identifyelement=\"662\"><br data-identifyelement=\"663\">To access the Authentication Rules for a particular Account, navigate to the Account's menu, click on the Actions for specific Account. &nbsp;Authentication Rules is an action relating to the Account.</p><p data-identifyelement=\"664\"><br data-identifyelement=\"665\"></p><p data-identifyelement=\"666\"><img data-identifyelement=\"667\" data-uniquekey=\"1488812374725\" data-fileid=\"3026865528\" data-filelink=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3026865528/original/EC2SJJL1ar79Ucb9TM9hBXZJLd_PCnUfkQ.jpg?1488812523\" src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3026865528/original/EC2SJJL1ar79Ucb9TM9hBXZJLd_PCnUfkQ.jpg?1488812523\" class=\"fr-dib fr-fil\"></p><p data-identifyelement=\"668\"><br data-identifyelement=\"669\"></p><p data-identifyelement=\"670\"><img data-identifyelement=\"671\" data-uniquekey=\"1488809040386\" data-fileid=\"3026863013\" data-filelink=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3026863013/original/VcBj67Re7seNwfpilV9-hw-68UcneiNpHg.jpg?1488809061\" src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3026863013/original/VcBj67Re7seNwfpilV9-hw-68UcneiNpHg.jpg?1488809061\" class=\"fr-dib fr-fil\"><br data-identifyelement=\"672\"></p><h2 data-identifyelement=\"673\">Authentication Rules to block Individual Numbers</h2><p data-identifyelement=\"674\">It is possible to manage this yourself, the method is as follows:</p><p data-identifyelement=\"675\"><br data-identifyelement=\"676\"></p><p data-identifyelement=\"677\">Adding a few numbers and maintaining a fairly simple list can be done manually by changing the Authentication Rules for the specific Account. This can be done <strong data-identifyelement=\"678\">PER NUMBER</strong> or by blocking an entire country/city (or carrier) code.</p><p data-identifyelement=\"679\"><br data-identifyelement=\"680\"></p><p data-identifyelement=\"681\">Example if you aimed to block calls going to CLI = 92321234567</p><ol data-identifyelement=\"682\"><li data-identifyelement=\"683\">Create an Account with any Service Plan and Routing Group</li><li data-identifyelement=\"684\">Add an Authentication Rule for the Account that uses CLI = 92321234567<br>if you need to block calls based on NPA/NXX - you can also add a rule such as: 9232* whereby all calls to 9232 xxx xxxx are blocked</li></ol><p data-identifyelement=\"686\">You can also manage Authentication Rules using the XML APIs - the support team can provide you details on the correct XML API syntax.</p><p data-identifyelement=\"687\"><br data-identifyelement=\"688\"></p><p data-identifyelement=\"689\">Note that calls dropped using the method above will show SIP error: \"403 Auth Failed\" and will not be written to the CDRs. &nbsp;</p><p data-identifyelement=\"690\"><br data-identifyelement=\"691\"></p><p data-identifyelement=\"692\">While the solution works in limited numbers we do offer a Do Not Call List module that is far more effective for managing blocked calls. &nbsp;You can read up more about this solution <a data-identifyelement=\"693\" href=\"https://support.sippysoft.com/solution/articles/3000041461-do-not-call-list-dnc-dncl-\" rel=\"noreferrer noopener\" target=\"_blank\">here</a>.&nbsp;</p><p data-identifyelement=\"694\"><br data-identifyelement=\"695\"></p><h2 data-identifyelement=\"696\"><span style=\"font-size: 24px;\">Changes made in Sippy 2020</span></h2><p data-identifyelement=\"697\"><br data-identifyelement=\"698\"></p><p data-identifyelement=\"699\">In our Sippy 2020 release we have made some changes to added some attributes that are used to handle account authentication:</p><ul><li data-identifyelement=\"699\">To domain (hostname in To: header of incoming INVITE)</li><li data-identifyelement=\"699\">From Domain (hostname in From: header of incoming INVITE)</li></ul><p>In example below <strong>From domain</strong> would be <strong>123abc.from.com</strong></p><div><pre contenteditable=\"false\" data-code-brush=\"Xml\" rel=\"highlighter\">From: \"Mr John Smith\" &lt;sip:123abc123-test@123abc.from.com:1036;user=some-id&gt;;tag=43165asdgw3001</pre><p><br></p></div><p data-identifyelement=\"702\"><span style=\"font-size: 16px;\">Lets introduce an order of preference for attributes:</span></p><ol data-identifyelement=\"703\" style=\"margin: 12px 0px 0px; padding: 0px 0px 0px 40px; color: rgb(23, 43, 77); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, &quot;Fira Sans&quot;, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;  text-decoration-style: initial; text-decoration-color: initial;\"><li data-identifyelement=\"704\">CLD</li><li data-identifyelement=\"705\" style=\"margin-top: 4px;\">CLI</li><li data-identifyelement=\"706\" style=\"margin-top: 4px;\">remote_ip</li><li data-identifyelement=\"707\" style=\"margin-top: 4px;\"><strong data-identifyelement=\"708\">To domain</strong></li><li data-identifyelement=\"709\" style=\"margin-top: 4px;\"><strong data-identifyelement=\"710\">From domain</strong></li></ol><p data-identifyelement=\"711\" style=\"margin: 12px 0px 0px; padding: 0px; color: rgb(23, 43, 77); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, &quot;Fira Sans&quot;, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;  text-decoration-style: initial; text-decoration-color: initial;\"><strong>Rules to match the attributes.</strong></p><ol data-identifyelement=\"712\" style=\"margin: 12px 0px 0px; padding: 0px 0px 0px 40px; color: rgb(23, 43, 77); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, &quot;Fira Sans&quot;, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;  text-decoration-style: initial; text-decoration-color: initial;\"><li data-identifyelement=\"713\">If there is a matching rule which contains a CLD then any other rules with empty CLD are skipped.</li><li data-identifyelement=\"714\" style=\"margin-top: 4px;\">Among the rules which passed the CLD check a rule which contains matching CLI beats any rule with empty CLI.</li><li data-identifyelement=\"715\" style=\"margin-top: 4px;\">And so on...</li></ol><p data-identifyelement=\"716\" style=\"margin: 12px 0px 0px; padding: 0px; color: rgb(23, 43, 77); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, &quot;Fira Sans&quot;, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;  text-decoration-style: initial; text-decoration-color: initial;\"><strong>Phone number matching (CLI, CLD)</strong></p><ol data-identifyelement=\"717\" style=\"margin: 12px 0px 0px; padding: 0px 0px 0px 40px; color: rgb(23, 43, 77); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, &quot;Fira Sans&quot;, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;  text-decoration-style: initial; text-decoration-color: initial;\"><li data-identifyelement=\"718\">If there is a matching rule which contains exact value then all rules with '*' or '?' chars in the value are skipped. If the winner is not determined, next step applies.</li><li data-identifyelement=\"720\">If there is a matching rule which contains symbol '*' it is beaten by any rule that does not contain such symbol. Still remaining rules are passed to next step.</li><li data-identifyelement=\"719\" style=\"margin-top: 4px;\">Among two rules wins the rule which pattern has more non question mark characters.</li></ol><p><br></p><p data-identifyelement=\"721\" style=\"margin: 12px 0px 0px; padding: 0px; color: rgb(23, 43, 77); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, &quot;Fira Sans&quot;, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;  text-decoration-style: initial; text-decoration-color: initial;\"><strong>Domain matching</strong></p><ol><li data-identifyelement=\"722\" style=\"margin-top: 12px; margin-right: 0px; margin-bottom: 0px; padding: 0px; color: rgb(23, 43, 77); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, &quot;Fira Sans&quot;, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;\">A domain can be either exact, e.g. 'domain.com' or can be a suffix match: '*.domain.com', there is no prefix matching for domains.&nbsp;</li><li data-identifyelement=\"722\" style=\"margin-bottom: 0px; padding: 0px; color: rgb(23, 43, 77); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, &quot;Fira Sans&quot;, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-size: 14px; font-weight: 400; text-align: start; text-indent: 0px;\">If there is a matching rule with an exact domain then all rules with suffix match are skipped.</li><li data-identifyelement=\"719\">Among two rules with <u>'*'</u> symbol wins the longest rule</li></ol><p data-identifyelement=\"723\" style=\"margin: 12px 0px 0px; padding: 0px; color: rgb(23, 43, 77); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, &quot;Fira Sans&quot;, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;  text-decoration-style: initial; text-decoration-color: initial;\">The suffix matching is literal (unlike DNS zone match). For example the rule '*.domain.com' matches the 'test.domain.com' but does not match 'domain.com'. The rule '*domain.com' matches both 'test.domain.com' and 'domain.com'. The domain part of a SIP URL is not analyzed and if it is in fact an IP address then it is used as is.</p><p data-identifyelement=\"724\" style=\"margin: 12px 0px 0px; padding: 0px; color: rgb(23, 43, 77); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, &quot;Fira Sans&quot;, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;  text-decoration-style: initial; text-decoration-color: initial;\">The new behavior added in our Sippy 2020 release also allows for legacy authentication attribute order to be respected. &nbsp;There is a system configuration setting under \"system/sip/authentication/attr_order\" allowing for parameters:</p><ul data-identifyelement=\"725\"><li data-identifyelement=\"726\" style=\"margin-top: 12px; margin-right: 0px; margin-bottom: 0px; padding: 0px; color: rgb(23, 43, 77); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, &quot;Fira Sans&quot;, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;\">\"default\" - equivalent to \"cld,cli,remote_ip,to_domain,from_domain\"</li><li data-identifyelement=\"727\" style=\"margin-top: 12px; margin-right: 0px; margin-bottom: 0px; padding: 0px; color: rgb(23, 43, 77); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, &quot;Fira Sans&quot;, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;\">\"old_style\" - equivalent to \"weight,to_domain,from_domain\".</li></ul><p data-identifyelement=\"728\"><br data-identifyelement=\"729\"></p><p data-identifyelement=\"730\">It is possible in Sippy 2020 versions and greater to be able to create custom order of these attributes. &nbsp;If you are upgrading to 2020 your authentication methods will be set to \"old_style\". &nbsp;At the present time this change must be handled by contacting our support team.</p><h3 data-identifyelement=\"731\"><br data-identifyelement=\"732\"><strong data-identifyelement=\"733\">Additional Reading</strong></h3><div data-identifyelement=\"734\"><strong data-identifyelement=\"735\">-&nbsp;</strong><a data-identifyelement=\"736\" href=\"http://support.sippysoft.com/solution/articles/77869-understanding-number-translation\" rel=\"noreferrer noopener\" style=\"line-height: 16px;\" target=\"\">Understanding Number Translation</a> - How to perform CLI/CLD Translations for prefix and number manipulation.</div><p data-identifyelement=\"737\"><strong data-identifyelement=\"738\">-</strong> <a data-identifyelement=\"739\" href=\"http://support.sippysoft.com/solution/articles/89038-configuring-your-new-softswitch\" rel=\"noreferrer noopener\" style=\"line-height: 16px;\" target=\"\">Configuring your new Softswitch</a> - Configuring Sippy to pass calls through Softswitch using Digest Authentication.</p><div data-identifyelement=\"734\"><strong data-identifyelement=\"735\">-&nbsp;</strong><a data-identifyelement=\"736\" href=\"https://support.sippysoft.com/en/support/solutions/articles/3000063563-test-dialplan\" style=\"line-height: 16px;\">Test Dialplan</a> - <span style=\"color: rgb(24, 50, 71); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;  text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;\">Check the configuration of the system on how an incoming call is expected to be authenticated and routed within the system, with all charges applied.</span></div><p data-identifyelement=\"740\"><strong data-identifyelement=\"741\"><br data-identifyelement=\"742\"></strong></p></div>",
    "description_text": "   Understanding Authentication  Authentication is the process of establishing association between an incoming call and an Account in the system. There are two basic methods for performing Authentication in the Softswitch: using secure SIP digest and using Authentication Rules. The two methods are described in detail below. Note that both methods can be combined together to provide advanced features (see DID assigning example below).     Sippy Softswitch uses the following authentication chain sequentially         When any call comes into the Softswitch, the very first place the system tries to find an acceptable authentication match is the DID Pool section \u00a0  If a match for the incoming call is not found in the DID's authentication rules, the System checks all available authentication rules under Accounts \u00a0  If there is no matched rule in the authentication rules of any Account, the system sends a \"401 Unauthorized\" response to the remote device with a \"WWW-Authenticate\" for the digest authentication\u00a0 \u00a0  If the remote end provides the correct credentials for the digest authentication, the system authenticates the call and proceeds with the authorization process.      Secure SIP Digest-based Authentication   For this type of authentication, a call is mapped into the Account by performing secure SIP digest authentication. In practice that means that the device or software that originates the call has a username and password configured and that those parameters are matched against the VoIP Login and VoIP Password parameters of all Accounts until a match is found.  Only this type of authentication allows a SIP device to register itself with the Softswitch, providing the requirements for receiving on-net calls.  The primary use of this Authentication method is to facilitate the connection of SIP phones and ATAs to the softswitch.     Rules-based Authentication   For this type of authentication, a call is mapped into the Account by matching four parameters of the incoming call against one or more Authentication Rules associated with the Account. \u00a0Below are the four parameters matched:   IP address of the device or server that originates the call  Calling Number / ANI (CLI)  Called Number / Destination Number (CLD)  Protocol (SIP, H.323, IAX2, Calling Card PIN)      The first three protocols check the match of incoming traffic to the parameter used in the rule. \u00a0The Calling Card PIN is used only when the IVR application is used, and the card number (PIN) is requested.  The system first checks the match of the number entered against the username/voip login of any Account in the system. \u00a0If no match is found, the Authentication Rules, Protocol, and Calling Card PIN are checked for the match.     In order for the call to match the rule, each of the four parameters of the call must match with the appropriate parameter of at least one Authentication Rule. \u00a0When one parameter or Rule is empty only the remaining parameters are matched against incoming calls (Protocol can never be empty)  For example: \u00a0The first rule will match any call originated from IP address 1.2.3.4, CLI 567890 and any CLD. \u00a0The second rule will match calls with CLD 123456789 and any CLI coming from any IP.   #  Remote IP Address  Incoming CLI/ANI  Incoming CLD/DNIS  1  1.2.3.4  567890     2        123456789       Regular Expressions use:    Match any sequence of symbols in the whole number   Using a wildcard (*) in the Incoming CLI and Incoming CLD fields after the number, will result in prefix matching.\u00a0  For example the following modification of the first rule above will match any call originated from IP address 1.2.3.4 and any CLI starting with 567890 (e.g. 567890123).      #  Remote IP Address   Incoming CLI/ANI   \u00a0Incoming CLD/DNIS  1  1.2.3.4  567890*        Note: a wildcard can match the absence of symbols, so the 567890* rule will match 567890 CLI as well.      Match any symbol in any place of the number (starting from version 5.2)   This pattern can be set in the Incoming CLI and Incoming CLD fields by placing a question mark ('?') within the number. \u00a0The result will be number matching where the question mark matches any symbol in the incoming number.  For example: the rule below will match any call originated from IP address 1.2.3.4 and any CLI that starts with 567, is followed by any symbol, followed by 90 and any other symbol (e.g. 5678901 or 5670903).      #  Remote IP Address   Incoming CLI/ANI   \u00a0Incoming CLD/DNIS  1  1.2.3.4  567?90?        Note: the question mark CANNOT match the absence of a symbol, so the 567?90? rule will NOT match either 567890 or 567901 numbers.        Weight distribution for authentication rules (Sippy Softswitch v5.2 and before)      When performing the match against several concurrent Rules, the softswitch also calculates so-called weights for each matching Rule in order to determine the best match. The formula is as follows:    1. Matching IP address adds 1.0 to the resulting weight 2. Matching non-wildcard, CLD or CLI adds 1.5 to the resulting weight 3. Matching wildcard, CLD or CLI adds 1.0 to the resulting weight 4. For any matching wildcard, CLI or CLD the resulting weight is increased by the length of the matching part divided by 100 5. For any question mark, CLI or CLD, the resulting weight is decreased by 0.001 If a wildcard is present in the matching CLI or CLD, the question mark is considered a regular symbol to be added to the weight accordingly   For example, if a call from IP address 1.2.3.4, CLI 567890 and CLD 123456789 arrives, the weights would be calculated as follows:     #  Remote IP Address  Incoming CLI/ANI  Incoming CLD/DNIS  Weight  1  1.2.3.4  567890     1.0+1.5=2.5  2        123456789  1.5  3  1.2.3.4  567890*     1.0+1.0+(6/100)=2.06  4     567?9*     1-0.001+0.05=1.049        Based on the example above, rule 1 would be selected as the best match.\u00a0  Note that if there are multiple rules with the same weight that can be considered \"best\" match, they will be rejected (due to ambiguity) if they use an Authentication rule; in this case, only Digest Authentication would be possible. \u00a0The error message \"401 Unauthorized\" is used when there is ambiguity. \u00a0     Typical Applications for Rules-based Authentication   Rules-based Authentication can accommodate different real-world scenarios. \u00a0Sample of scenarios and steps to implement them are listed below:   VoIP Peering. \u00a0Enter IP address of your peer\u2019s softswitch into the Remote IP Address field  PSTN origination. \u00a0Enter IP address of the gateway into the Remote IP Address field. \u00a0If there are multiple gateways several rules with different IP addresses can be added  Assigning DID numbers. \u00a0DID (Direct Inward Dialing) can be implemented by combining secure SIP digest authentication with one or more Authentication Rules that contain the DID number (as CLD) from the originating gateway. \u00a0Optionally, the Remote IP Address can be used to only allow calls (considered DID calls) from a specific gateway. \u00a0It may be necessary to apply a Translation Rule to ensure proper routing of the call to the registered Account.      Accessing Authentication Rules   To access the Authentication Rules for a particular Account, navigate to the Account's menu, click on the Actions for specific Account. \u00a0Authentication Rules is an action relating to the Account.             Authentication Rules to block Individual Numbers  It is possible to manage this yourself, the method is as follows:     Adding a few numbers and maintaining a fairly simple list can be done manually by changing the Authentication Rules for the specific Account. This can be done PER NUMBER or by blocking an entire country/city (or carrier) code.     Example if you aimed to block calls going to CLI = 92321234567   Create an Account with any Service Plan and Routing Group  Add an Authentication Rule for the Account that uses CLI = 92321234567 if you need to block calls based on NPA/NXX - you can also add a rule such as: 9232* whereby all calls to 9232 xxx xxxx are blocked   You can also manage Authentication Rules using the XML APIs - the support team can provide you details on the correct XML API syntax.     Note that calls dropped using the method above will show SIP error: \"403 Auth Failed\" and will not be written to the CDRs. \u00a0     While the solution works in limited numbers we do offer a Do Not Call List module that is far more effective for managing blocked calls. \u00a0You can read up more about this solution here.\u00a0     Changes made in Sippy 2020     In our Sippy 2020 release we have made some changes to added some attributes that are used to handle account authentication:   To domain (hostname in To: header of incoming INVITE)  From Domain (hostname in From: header of incoming INVITE)   In example below From domain would be 123abc.from.com   From: \"Mr John Smith\" <sip:123abc123-test@123abc.from.com:1036;user=some-id>;tag=43165asdgw3001      Lets introduce an order of preference for attributes:   CLD  CLI  remote_ip  To domain  From domain   Rules to match the attributes.   If there is a matching rule which contains a CLD then any other rules with empty CLD are skipped.  Among the rules which passed the CLD check a rule which contains matching CLI beats any rule with empty CLI.  And so on...   Phone number matching (CLI, CLD)   If there is a matching rule which contains exact value then all rules with '*' or '?' chars in the value are skipped. If the winner is not determined, next step applies.  If there is a matching rule which contains symbol '*' it is beaten by any rule that does not contain such symbol. Still remaining rules are passed to next step.  Among two rules wins the rule which pattern has more non question mark characters.      Domain matching   A domain can be either exact, e.g. 'domain.com' or can be a suffix match: '*.domain.com', there is no prefix matching for domains.\u00a0  If there is a matching rule with an exact domain then all rules with suffix match are skipped.  Among two rules with '*' symbol wins the longest rule   The suffix matching is literal (unlike DNS zone match). For example the rule '*.domain.com' matches the 'test.domain.com' but does not match 'domain.com'. The rule '*domain.com' matches both 'test.domain.com' and 'domain.com'. The domain part of a SIP URL is not analyzed and if it is in fact an IP address then it is used as is.  The new behavior added in our Sippy 2020 release also allows for legacy authentication attribute order to be respected. \u00a0There is a system configuration setting under \"system/sip/authentication/attr_order\" allowing for parameters:   \"default\" - equivalent to \"cld,cli,remote_ip,to_domain,from_domain\"  \"old_style\" - equivalent to \"weight,to_domain,from_domain\".      It is possible in Sippy 2020 versions and greater to be able to create custom order of these attributes. \u00a0If you are upgrading to 2020 your authentication methods will be set to \"old_style\". \u00a0At the present time this change must be handled by contacting our support team.   Additional Reading  -\u00a0Understanding Number Translation - How to perform CLI/CLD Translations for prefix and number manipulation.  - Configuring your new Softswitch - Configuring Sippy to pass calls through Softswitch using Digest Authentication.  -\u00a0Test Dialplan - Check the configuration of the system on how an incoming call is expected to be authenticated and routed within the system, with all charges applied.     ",
    "seo_data": {
      "meta_title": "",
      "meta_description": "",
      "meta_keywords": ""
    },
    "tags": [
      "Authentication",
      "IP to IP",
      "Authentication Rules",
      "Blocked Call",
      "CLI",
      "ANI",
      "CLI/ANI Matching"
    ],
    "attachments": [],
    "cloud_files": [],
    "thumbs_up": 12,
    "thumbs_down": 7,
    "hits": 5769,
    "suggested": 0,
    "feedback_count": 0
  },
  {
    "id": 77554,
    "type": 1,
    "status": 2,
    "agent_id": 3763909,
    "created_at": "2013-04-19T14:55:59Z",
    "category_id": 81138,
    "folder_id": 133168,
    "title": "Understanding Rating and Billing",
    "updated_at": "2020-03-12T23:42:02Z",
    "description": "<h2><span style=\"font-size: 18px;\">Understanding Rating and Billing</span></h2><p><br>This article explains how the rating and billing functionality work. \u00a0</p><p><br></p><h2><span style=\"font-size: 18px;\">How Calls are Rated and Billed</span></h2><p><br>When a call goes through the softswitch there are at least 2 entities in the system to be billed for it: an Account and one or more Customers. All relevant Accounts and Customers are billed according to rules defined by the Tariff associated with each of them.<br><br>The Algorithm applied to Rating and Billing works like this:</p><ul><li><blockquote><p>When the system needs to rate or bill a call it first locates which Account is making it. \u00a0Once it recognizes the Account, it finds a Tariff for that Account and selects the best matching Rate for the destination number. \u00a0Since there may be nested customers (inside the Customer) it checks if the Customer to which that Account belongs is a Root Customer and then it selects the best matching Rate according to the respective Tariff for that Customer.</p></blockquote></li><li><blockquote><p>It iterates over the customer's chain until the Root Customer has been reached. \u00a0Rates are indexed by the DB server</p></blockquote></li><li><blockquote><p>When one of the links in the chain from the Account to the Root Customer doesn\u2019t have a Rate matching the destination number, the call will not be allowed to go through, since this would mean that nobody in the chain would pay for the call. \u00a0When traversing the chain the softswitch checks the difference between Balance and Credit Limit for each entity and rejects the call if it finds that at any point the Balance exceeds the respective Credit Limit - in this way the system prevents a customer from exceeding their credit limit</p></blockquote></li><li><blockquote><p>The call is rejected if the system encounters a Rate with a Forbidden parameter enabled; such Rates are designed to make it easier to ban a particular prefix (for example a toll free prefix or a pay-per-minute number)</p></blockquote></li><li><blockquote><p>The algorithm proceeds through several distinct billing parameters in the Account and in each Customer inside the Account.\u00a0 Those parameters and their meaning are described in details below:</p></blockquote></li></ul><p><br></p><p>From Tariff the system obtains the following parameters:<br>\u00a0 \u00a0 \u00a0</p><p>\u00a0 \u00a0 \u00a0 \u00a0FreeSeconds : in seconds<br><br>       ConnectFee : in monetary units<br><br>       PostCallSurcharge : in percents (0.01 means 1%)<br><br>       GracePeriod : in seconds<br><br> From Rate the system obtains:<br>\u00a0 \u00a0 \u00a0 </p><p>\u00a0 \u00a0 \u00a0 \u00a0Price1 : in monetary units per minute<br><br>       PriceN : in monetary units per minute<br><br>       Interval1 : in seconds<br><br>       IntervalN : in seconds<br><br>The simplest parameters are: ConnectFee, which is the fixed amount of money charged for each successful call regardless of its duration, and PostCallSurcharge which is the additional charge applied, calculated as a percentage of the amount charged.  So, if the call cost is 1 dollar and the PostCallSurcharge is 0.01, the actual amount charged will be 1.01 dollar.<br><br>The following picture illustrates how the calls are charged. The process starts with comparing the value of the GracePeriod parameter with the duration of the call.  The GracePeriod parameter determines the time (if any) that  will not be charged for each call.  Calls with a duration of less than the GracePeriod value are not charged at all.  A GracePeriod value of 0 second and 1 second provide almost the same \"free\" period except that when the GracePeriod value is 1 second, connected calls with 0 second  duration are not charged a connection fee.<br><br>A ConnectFee is charged immediately upon connection, and all calls shorter than Interval1 are rounded to Interval1 seconds. FreeSeconds are granted after the Interval1, so this part of the call is not charged; therefore, calls shorter than (Interval1 + FreeSeconds) are rounded to Interval1 seconds. \u00a0If the call is longer than (Interval1 + FreeSeconds) the remaining portion is rounded up to multiple IntervalN seconds. After that, the PostCallSurcharge is applied to the total amount charged.</p><p><br></p><p><img style=\"cursor: default;\" src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/4995882/original/charging_parameters.png?1366383466\" class=\"fr-dii\"></p><p><br></p><p>The call illustrated in the figure is charged using the following formula:</p><p><br></p><p><img style=\"cursor: default;\" src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/4995889/original/charging_formula.png?1366383483\" class=\"fr-dii\"></p><p><br></p><p><br></p><p>Connect fee : monetary units</p><p>Price 1 : monetary units</p><p>Price N : monetary units</p><p>Interval 1 : seconds</p><p>Interval N : seconds</p><p>Post call surcharge : fractional based on the setting in the Tariff/Destination Set (E.g. for 10% fractional = 0.1)</p><p><br></p><h2>Special characters in scope of Rating and Billing</h2><p><br>For the proper billing of incoming and outgoing calls it is important to know the meaning of \"Reserved\" and \"Unreserved\" characters that can be present in the SIP URI of the call.<br><br>Reserved characters are those characters that sometimes have special meaning.<br>For example, forward @ character is used to separate different parts of a URI.<br><strong>reserved \u00a0 \u00a0= \u00a0\";\" / \"/\" / \"?\" / \":\" / \"@\" / \"&amp;\" / \"=\" / \"+\" / \"$\" / \",\"</strong><br><br>Unreserved characters that are allowed in a URI but do not have a reserved purpose are called unreserved.<br>These include upper and lower case letters, decimal digits, and a limited set of punctuation marks and symbols.<br><span style=\"color: rgb(0, 0, 0);\"><strong>Those can be used in calls as a part of username and can be used for billing (as a prefix)</strong></span><em><strong><br></strong></em><br><strong>unreserved \u00a0= \u00a0alphanum / mark<br>mark \u00a0 \u00a0 \u00a0 \u00a0= \u00a0\"-\" / \"_\" / \".\" / \"!\" / \"~\" / \"*\" / \" ' \"/ \"(\" / \")\"</strong><br><br>Please refer to RFC 3261 for more details.</p><p><br>If a switch operator wants to protect himself from billing disputes with vendors that do not recognize special characters (based on RFC 3261), it is possible to restrict the length of the number and reject calls with numbers longer than the E.164 format.</p><p>For example, the Vendor removes the period ('.') from incoming CLD 380.630700341 so that the number becomes 380630700341, Sippy checks the prefix as if it were 380. (with the period) \u00a0The operator can set \"Min. Length\" and \"Max. Length\" for the 380 prefix to be 12 in the Destinations menu.<br>After that calls to numbers like 380.630700341 would be properly rejected with the \"invalid number\" SIP error.</p>",
    "description_text": " Understanding Rating and Billing   This article explains how the rating and billing functionality work. \u00a0     How Calls are Rated and Billed   When a call goes through the softswitch there are at least 2 entities in the system to be billed for it: an Account and one or more Customers. All relevant Accounts and Customers are billed according to rules defined by the Tariff associated with each of them.  The Algorithm applied to Rating and Billing works like this:     When the system needs to rate or bill a call it first locates which Account is making it. \u00a0Once it recognizes the Account, it finds a Tariff for that Account and selects the best matching Rate for the destination number. \u00a0Since there may be nested customers (inside the Customer) it checks if the Customer to which that Account belongs is a Root Customer and then it selects the best matching Rate according to the respective Tariff for that Customer.      It iterates over the customer's chain until the Root Customer has been reached. \u00a0Rates are indexed by the DB server      When one of the links in the chain from the Account to the Root Customer doesn\u2019t have a Rate matching the destination number, the call will not be allowed to go through, since this would mean that nobody in the chain would pay for the call. \u00a0When traversing the chain the softswitch checks the difference between Balance and Credit Limit for each entity and rejects the call if it finds that at any point the Balance exceeds the respective Credit Limit - in this way the system prevents a customer from exceeding their credit limit      The call is rejected if the system encounters a Rate with a Forbidden parameter enabled; such Rates are designed to make it easier to ban a particular prefix (for example a toll free prefix or a pay-per-minute number)      The algorithm proceeds through several distinct billing parameters in the Account and in each Customer inside the Account.\u00a0 Those parameters and their meaning are described in details below:        From Tariff the system obtains the following parameters: \u00a0 \u00a0 \u00a0  \u00a0 \u00a0 \u00a0 \u00a0FreeSeconds : in seconds         ConnectFee : in monetary units         PostCallSurcharge : in percents (0.01 means 1%)         GracePeriod : in seconds   From Rate the system obtains: \u00a0 \u00a0 \u00a0   \u00a0 \u00a0 \u00a0 \u00a0Price1 : in monetary units per minute         PriceN : in monetary units per minute         Interval1 : in seconds         IntervalN : in seconds  The simplest parameters are: ConnectFee, which is the fixed amount of money charged for each successful call regardless of its duration, and PostCallSurcharge which is the additional charge applied, calculated as a percentage of the amount charged.  So, if the call cost is 1 dollar and the PostCallSurcharge is 0.01, the actual amount charged will be 1.01 dollar.  The following picture illustrates how the calls are charged. The process starts with comparing the value of the GracePeriod parameter with the duration of the call.  The GracePeriod parameter determines the time (if any) that  will not be charged for each call.  Calls with a duration of less than the GracePeriod value are not charged at all.  A GracePeriod value of 0 second and 1 second provide almost the same \"free\" period except that when the GracePeriod value is 1 second, connected calls with 0 second  duration are not charged a connection fee.  A ConnectFee is charged immediately upon connection, and all calls shorter than Interval1 are rounded to Interval1 seconds. FreeSeconds are granted after the Interval1, so this part of the call is not charged; therefore, calls shorter than (Interval1 + FreeSeconds) are rounded to Interval1 seconds. \u00a0If the call is longer than (Interval1 + FreeSeconds) the remaining portion is rounded up to multiple IntervalN seconds. After that, the PostCallSurcharge is applied to the total amount charged.          The call illustrated in the figure is charged using the following formula:             Connect fee : monetary units  Price 1 : monetary units  Price N : monetary units  Interval 1 : seconds  Interval N : seconds  Post call surcharge : fractional based on the setting in the Tariff/Destination Set (E.g. for 10% fractional = 0.1)     Special characters in scope of Rating and Billing   For the proper billing of incoming and outgoing calls it is important to know the meaning of \"Reserved\" and \"Unreserved\" characters that can be present in the SIP URI of the call.  Reserved characters are those characters that sometimes have special meaning. For example, forward @ character is used to separate different parts of a URI. reserved \u00a0 \u00a0= \u00a0\";\" / \"/\" / \"?\" / \":\" / \"@\" / \"&\" / \"=\" / \"+\" / \"$\" / \",\"  Unreserved characters that are allowed in a URI but do not have a reserved purpose are called unreserved. These include upper and lower case letters, decimal digits, and a limited set of punctuation marks and symbols. Those can be used in calls as a part of username and can be used for billing (as a prefix)  unreserved \u00a0= \u00a0alphanum / mark mark \u00a0 \u00a0 \u00a0 \u00a0= \u00a0\"-\" / \"_\" / \".\" / \"!\" / \"~\" / \"*\" / \" ' \"/ \"(\" / \")\"  Please refer to RFC 3261 for more details.   If a switch operator wants to protect himself from billing disputes with vendors that do not recognize special characters (based on RFC 3261), it is possible to restrict the length of the number and reject calls with numbers longer than the E.164 format.  For example, the Vendor removes the period ('.') from incoming CLD 380.630700341 so that the number becomes 380630700341, Sippy checks the prefix as if it were 380. (with the period) \u00a0The operator can set \"Min. Length\" and \"Max. Length\" for the 380 prefix to be 12 in the Destinations menu. After that calls to numbers like 380.630700341 would be properly rejected with the \"invalid number\" SIP error. ",
    "seo_data": {
      "meta_title": "",
      "meta_description": "",
      "meta_keywords": ""
    },
    "tags": [],
    "attachments": [],
    "cloud_files": [],
    "thumbs_up": 9,
    "thumbs_down": 7,
    "hits": 2495,
    "suggested": 0,
    "feedback_count": 0
  },
  {
    "id": 77556,
    "type": 1,
    "status": 2,
    "agent_id": 3763909,
    "created_at": "2013-04-19T15:06:48Z",
    "category_id": 81138,
    "folder_id": 133168,
    "title": "Understanding Routing",
    "updated_at": "2020-05-01T19:31:36Z",
    "description": "<div dir=\"ltr\"><h3><span style=\"font-size: 18px;\">Understanding Routing</span></h3><p><br></p><p>When the system needs to route a call it has to find a set of Connections which can accept it. \u00a0Finding a set of connections to accept the call takes place in three stages:</p><ol><li>The system starts the process by determining the specific Routing Group that the call should be routed to; this is achieved by finding an entity (i.e. Account or Customer) directly associated with the Root Customer which is responsible for the call and retrieving its Routing Group setting</li><li>At the second stage the system finds all Destination Sets in that Routing Group that have at least one Route matching the destination number. The Route with longest matching prefix is selected from each of those Destination Sets and paired with the Connection that has been associated with that Destination Set in the Routing Group. For example when the destination number is 1234567890, and there are two Destination Sets having Routes with prefixes 1, 12 and 123, 1234 respectively, the system will select Routes with prefixes 12 and 1234.</li><li>The resulting Route / Connection list is ordered based on the Routing Policy settings for the particular Routing Group.\u00a0</li></ol><p>Available policies are:</p><ul><li><em><strong>Least Cos</strong></em>t - Routes are ordered based on cost to the particular destination. Those with the lowest cost will be first</li><li><strong><em>Prefix Length</em></strong> - Routes are ordered based on prefix length. Those that have the longest prefix will be first</li><li><em><strong>Route Preference</strong></em> \u2013 Routes are ordered based on the Preference parameter. Routes with a higher Preference will be first</li><li><em><strong>Routing Entries Order</strong></em> - Routes are ordered based on the Routing Entries order in the each Routing Group. Routes coming from Destination Sets with lower Order number will be first</li></ul><p><br><strong>NOTE</strong>: unlike with Rates, where only one best matching Rate can  be selected, the system will select several Routes for the same destination number, point to the different Connections and try them one-by-one until the call is either connected or all possible Connections have been tried.<br><br>After the list of possible Routes has been built, the Softswitch will try to send the call to the Connections associated with each of those Routes; one by one until the call is either successfully connected or there are no more Connections to try.<br><br>Consider the following example: you have two terminating providers, A and B. \u00a0Provider A can terminate prefixes 1234 and 1345, while Provider B can terminate prefixes 1345 and 1456. \u00a0Prices for termination to prefix 1345 provided by B are lower than prices offered by A, but the quality of termination is higher with provider B. In this case your configuration might look like this::</p><p><br></p><p style=\"text-align: center;\"><img style=\"cursor: default;\" src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/5029117/original/1.jpg?1366617836\" class=\"fr-dii\"></p><p><br></p><p>Then, if the Routing Group policy is set to Least Cost the switch will send call to number 1-345-567-8901 to Connection \u201c1\u201d first and only if that fails then to Connection \u201c2\u201d. \u00a0However, if the Routing Group policy is set to Route Preference, the switch will try Connection \u201c2\u201d first and only then Connection \u201c1\u201d.<br><br>There are several other parameters that affect routing associated with each Route:</p><ul><li><em><strong>Forbidden</strong></em> \u2013 this parameter if set, instructs the Softswitch not to send any calls with a matching prefix to the Connections associated with the Destination Set</li><li><em><strong>Huntstop</strong></em> \u2013 this parameter if set, instructs the Softswitch to stop hunting routes when the Connection associated with the Route has been reached in the process of searching. \u00a0A failure code will be returned to the caller if the attempt to send the call into the Connection fails</li><li><strong><em>1xx timeout and 2xx timeout</em></strong> - two timeout parameters, allow limiting the amount of time the Softswitch waits for the call to be answered before sending the call over to the next available Connection. \u00a0The first timeout, called 1xx timeout, limits the amount of time the switch waits for any session progress response from the Connection (typically 180 Ringing or 183 Session Progress), it allows for detection of non-functional or unreachable Connections. \u00a0The second timeout, 2xx timeout, limits the amount of time the switch will wait for the call to be answered before trying to send it to the next available Connection. \u00a0The timeouts work concurrently so that whichever happens first \u201cwins\u201d.</li></ul><p><img class=\"fr-dib\" src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3029605166/original/352hti1rtmdaRsnNmCv27dpYts11Mbo7yQ.png?1498735619\" data-filelink=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3029605166/original/352hti1rtmdaRsnNmCv27dpYts11Mbo7yQ.png?1498735619\" data-fileid=\"3029605166\" data-uniquekey=\"1498735606243\" style=\"width: 440px; height: 135.461px;\"></p><ul><li><strong>Final 2xx Timeout, sec -</strong> this parameter allows setting the 2xx timeout for the last routing entry in the Routing Entries and/or Follow Me Entry. \u00a0By default, the 2xx timeout is set to 300 seconds, meaning that Sippy will wait for a \"200 OK\" message on the INVITE up to the <strong>Final 2xx Timeout</strong>. \u00a0The timeout is only applied to the last routing entry in the routing group and/or the last Follow Me Entry. \u00a0The Final 2xx timeout parameter was added from Sippy 4.5 on the Routing Group preferences:</li></ul><img class=\"fr-dib\" src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3029605140/original/wKh1-wdSgggfgr0l3eJ_Tdr-l5nEhDKHYg.png?1498735511\" data-filelink=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3029605140/original/wKh1-wdSgggfgr0l3eJ_Tdr-l5nEhDKHYg.png?1498735511\" data-fileid=\"3029605140\" data-uniquekey=\"1498735441031\" style=\"width: 449px; height: 324.321px;\">Note: all three timers are fired just after sending the INVITE to the vendor. \u00a0For example, with 2xx timeout = 10 seconds, if the Vendor/Connection is not able to connect the call (send a \"200 OK\" message to Sippy) within 10 seconds, the system will drop that Vendor/Connection from the call flow, and either try another Vendor, or drop the call. \u00a0This occurs even if the Vendor replied with first 1xx message at the 9th second of the call.</div>",
    "description_text": "  Understanding Routing     When the system needs to route a call it has to find a set of Connections which can accept it. \u00a0Finding a set of connections to accept the call takes place in three stages:   The system starts the process by determining the specific Routing Group that the call should be routed to; this is achieved by finding an entity (i.e. Account or Customer) directly associated with the Root Customer which is responsible for the call and retrieving its Routing Group setting  At the second stage the system finds all Destination Sets in that Routing Group that have at least one Route matching the destination number. The Route with longest matching prefix is selected from each of those Destination Sets and paired with the Connection that has been associated with that Destination Set in the Routing Group. For example when the destination number is 1234567890, and there are two Destination Sets having Routes with prefixes 1, 12 and 123, 1234 respectively, the system will select Routes with prefixes 12 and 1234.  The resulting Route / Connection list is ordered based on the Routing Policy settings for the particular Routing Group.\u00a0   Available policies are:   Least Cost - Routes are ordered based on cost to the particular destination. Those with the lowest cost will be first  Prefix Length - Routes are ordered based on prefix length. Those that have the longest prefix will be first  Route Preference \u2013 Routes are ordered based on the Preference parameter. Routes with a higher Preference will be first  Routing Entries Order - Routes are ordered based on the Routing Entries order in the each Routing Group. Routes coming from Destination Sets with lower Order number will be first    NOTE: unlike with Rates, where only one best matching Rate can  be selected, the system will select several Routes for the same destination number, point to the different Connections and try them one-by-one until the call is either connected or all possible Connections have been tried.  After the list of possible Routes has been built, the Softswitch will try to send the call to the Connections associated with each of those Routes; one by one until the call is either successfully connected or there are no more Connections to try.  Consider the following example: you have two terminating providers, A and B. \u00a0Provider A can terminate prefixes 1234 and 1345, while Provider B can terminate prefixes 1345 and 1456. \u00a0Prices for termination to prefix 1345 provided by B are lower than prices offered by A, but the quality of termination is higher with provider B. In this case your configuration might look like this::          Then, if the Routing Group policy is set to Least Cost the switch will send call to number 1-345-567-8901 to Connection \u201c1\u201d first and only if that fails then to Connection \u201c2\u201d. \u00a0However, if the Routing Group policy is set to Route Preference, the switch will try Connection \u201c2\u201d first and only then Connection \u201c1\u201d.  There are several other parameters that affect routing associated with each Route:   Forbidden \u2013 this parameter if set, instructs the Softswitch not to send any calls with a matching prefix to the Connections associated with the Destination Set  Huntstop \u2013 this parameter if set, instructs the Softswitch to stop hunting routes when the Connection associated with the Route has been reached in the process of searching. \u00a0A failure code will be returned to the caller if the attempt to send the call into the Connection fails  1xx timeout and 2xx timeout - two timeout parameters, allow limiting the amount of time the Softswitch waits for the call to be answered before sending the call over to the next available Connection. \u00a0The first timeout, called 1xx timeout, limits the amount of time the switch waits for any session progress response from the Connection (typically 180 Ringing or 183 Session Progress), it allows for detection of non-functional or unreachable Connections. \u00a0The second timeout, 2xx timeout, limits the amount of time the switch will wait for the call to be answered before trying to send it to the next available Connection. \u00a0The timeouts work concurrently so that whichever happens first \u201cwins\u201d.      Final 2xx Timeout, sec - this parameter allows setting the 2xx timeout for the last routing entry in the Routing Entries and/or Follow Me Entry. \u00a0By default, the 2xx timeout is set to 300 seconds, meaning that Sippy will wait for a \"200 OK\" message on the INVITE up to the Final 2xx Timeout. \u00a0The timeout is only applied to the last routing entry in the routing group and/or the last Follow Me Entry. \u00a0The Final 2xx timeout parameter was added from Sippy 4.5 on the Routing Group preferences:  Note: all three timers are fired just after sending the INVITE to the vendor. \u00a0For example, with 2xx timeout = 10 seconds, if the Vendor/Connection is not able to connect the call (send a \"200 OK\" message to Sippy) within 10 seconds, the system will drop that Vendor/Connection from the call flow, and either try another Vendor, or drop the call. \u00a0This occurs even if the Vendor replied with first 1xx message at the 9th second of the call. ",
    "seo_data": {
      "meta_title": "",
      "meta_description": "",
      "meta_keywords": ""
    },
    "tags": [
      "Least Cost Route",
      "Prefix Length",
      "Route Preference",
      "Routing"
    ],
    "attachments": [],
    "cloud_files": [],
    "thumbs_up": 9,
    "thumbs_down": 9,
    "hits": 3263,
    "suggested": 0,
    "feedback_count": 0
  },
  {
    "id": 77869,
    "type": 1,
    "status": 2,
    "agent_id": 3763909,
    "created_at": "2013-04-22T08:20:27Z",
    "category_id": 81138,
    "folder_id": 133168,
    "title": "Understanding Number Translation",
    "updated_at": "2021-09-29T19:14:17Z",
    "description": "<div dir=\"ltr\"><div dir=\"ltr\"><div dir=\"ltr\"><div><h3><span style=\"font-size: 18px;\"><strong>Practical Role of Number Translation</strong></span></h3><p><br></p><p dir=\"ltr\" style=\"line-height: 1.38; margin-bottom: 0pt;\"><span data-darkreader-inline-color=\"\" style=\"font-size: 10pt; font-family: Roboto, sans-serif; color: rgb(0, 0, 0); font-weight: 400; --darkreader-inline-color:#e8e6e3;\">Number translation plays a very important role in today\u2019s VoIP world by allowing networks with different and often conflicting numbering conventions to communicate. In an ideal world there would be only one numbering standard, and everybody would adhere to it, but unfortunately this is not the case in the real world.</span></p><br><p dir=\"ltr\" style=\"line-height: 1.38; margin-bottom: 0pt;\"><span data-darkreader-inline-color=\"\" style=\"font-size: 10pt; font-family: Roboto, sans-serif; color: rgb(0, 0, 0); font-weight: 400; --darkreader-inline-color:#e8e6e3;\">When it comes to plain old PSTN, almost every country has its own incompatible standards for dialing local, long distance and international numbers. Any VoIP provider who wants to provide services to customers in different countries will face the need to cope with the differences and provide a consistent numbering plan in the system, still letting users dial numbers in the way they are used to.</span></p><br><p dir=\"ltr\" style=\"line-height: 1.38; margin-bottom: 0pt;\"><span data-darkreader-inline-color=\"\" style=\"font-size: 10pt; font-family: Roboto, sans-serif; color: rgb(0, 0, 0); font-weight: 400; --darkreader-inline-color:#e8e6e3;\">Many VoIP carriers, require their customers to send calls to them using \"special\u201d numbering plans (country-specific plans, technical prefixes, etc). &nbsp;To cope with all real-world scenarios, the Softswitch provides a flexible number translation mechanism whose task is to compensate for differences in the dialing conventions of individual users and to adhere to Vendor\u2019s requirements. The diagram below illustrates how different CLD number translations are applied during a typical call.</span></p><p><br></p><p><img style=\"cursor: default;\" src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/5029262/original/number_translation_flow.png?1366618068\" class=\"fr-dii\"></p><ol><li>The customer dials a phone number in his SIP Phone. He enters the phone number in the same format he uses on a normal phone. The number is delivered to the Softswitch, which performs authentication, as a result identifying the corresponding Account in the system. In the example above, a customer who is physically located in Vancouver, Canada wants to call number 123456 in Dnepropetrovsk, Ukraine.</li><li>After identifying the calling Account the Softswitch translates the number using a CLD Translation Rule specific for the Account. In the example above this process results in the international dialing prefix 011 to be removed. The CLD becomes 380-56-123456 \u2013 number in the E.164 format.</li><li>The Softswitch then passes the resulting number into routing logic, which builds a list of possible destinations (Connections) towards which it would terminate the call. In the example above, two such Connections have been identified \u2013 Connection \u201cA\u201d and Connection \u201cB\u201d.</li><li>The called number in E.164 format is passed to the routing engine along with the set of Connections that can accept this call, and along with the CLD Translation Rules corresponding to each of those Connections. The routing engine tries to send the call to each of those Connections until it is either connected or there are no more Connections to try. In the example above, in the process of trying to reach the final destination for the call, the Softswitch first tries to send it to Connection A, which corresponds to the gateway connected to the PSTN in the same area where the destination number is. Therefore, applying the CLD Translation Rule for Connection A removes country code and local area code from the E.164 number and it becomes simply 123456 (4a). If for some reason, the call is not going through, the Softswitch attempts the next Connection (Connection B) from the routing list. Connection B corresponds to the gateway connected to the PSTN in the same country, but in a different area code. Again, before sending the call to the PSTN gateway the Softswitch takes the CLD in E.164 format and associates the corresponding CLD Translation Rule, which in this case removes the country code (380) and replaces it with long-distance access code (80). The CLD becomes 80-56-123456.</li></ol><p><br></p><h3><span style=\"font-size: 18px;\">How Number Translation Works</span></h3><p><br>The Softswitch is built with the assumption that all numbers inside the system are in the E.164 format, that is, country code followed by the area code followed by the local number followed by the optional extension number. However, as the previous section explains, in the real world, calls arrive in various formats that need to be converted into E.164 format, etc.</p><p><br>For the purpose of doing Account-specific to E.164, and then E.164 to Vendor-specific conversions, the system provides three different features that allow translation of called or calling number at different stages of the call through the switch.</p><p>There are 6 basic types of number translation available in the Softswitch:</p><ul><li><em><strong>Incoming Destination Number Translation in Authentication Rule</strong></em>. Configured at authentication rule level, is applied to the number called after matching specific authentication rules and before per-Account Number Translation. Configured via the CLD Translation Rule parameter in the Authentication Rules of the Account or via the CLD Translation Rule parameter in DID preferences (from 4.5 version)</li><li><em><strong>Incoming Calling Number Translation in Authentication Rule</strong></em>. Configured at authentication rule level, is applied to the calling number after matching specific authentication rules and before per-Account Number Translation. Configured via the CLI Translation Rule parameter in the Authentication Rules of the Account or via the CLI Translation Rule parameter in the Authentication Rules of DID.</li><li><em><strong>Incoming per-Account Destination Number Translation</strong></em>. Configured on a per-Account basis, is applied to the number called before any call rating and routing decisions are made. Configured via per-Account CLD Translation Rule Account parameter.</li><li><em><strong>Incoming per-Account Calling Number Translation</strong></em>. Configured on a per-Account basis, is applied to the calling number before any call rating and routing decisions are made. Configured via two per-Account parameters: CLI and Force CLI. If Force CLI is \"ON\", then the CLI of all incoming calls matched to that Account will be replaced with the value of the CLI parameter.</li><li><em><strong>Outgoing Destination Number Translation</strong></em>. Configured on a per-Connection basis, is applied to the number called. &nbsp;Is obtained after applying the number translation rule and after the rating and routing decisions are made but before a call is sent to the Connection. Configured via CLD Translation Rule parameter for each Connection or Outbound CLD in Trunks.</li><li><em><strong>Outgoing Calling Number Translation</strong></em>. Configured on a per-Connection basis, is applied to the original calling number before a call is sent to that connection. Configured via per-Connection CLI Translation Rule parameter.</li></ul><p><br></p><p style=\"text-align: center;\"><br></p><p style=\"text-align: left;\"><span style=\"font-size: 16px;\">Extended picture as of Sippy 2020 release</span><span style=\"font-size: 16px;\"><img src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3056321809/original/O6exU933Zf8o7YJIqG_Im2b7ukM6Ylxhjg.png?1598511610\" style=\"width: auto;\" class=\"fr-fic fr-dib\" data-attachment=\"[object Object]\" data-id=\"3056321809\"></span><br></p><p><br></p><h3><span style=\"font-size: 18px;\"><strong>Translation Rule Syntax</strong></span></h3><p><br>Translation rules are specified either as the replacement numbers or as a set of regular expressions with Python syntax in the following two forms:</p><ul><li>s/&lt;match what&gt;/&lt;replace with&gt;/</li><li>s/&lt;match what&gt;/&lt;replace with&gt;/g</li></ul><p><br>The former will match/replace a single matched occurrence or pattern, while the latter \u2013 all of them. Several expressions may be used in one translation rule; in this case they need to be separated by semicolon (\u201c;\u201d).<br><br>There are several \u201cspecial\u201d symbols in &lt;match what&gt; which allow you to define matching rules, for example ^ matches the beginning of the string, while $ - matches the end, so that for example ^1 will only match 1 as the first character of the string, while 9$ will only match 9 as a last character.</p><p><br></p><p>For example, the following translation rule can be used to strip the leading 011 prefix from the number:</p><ul><li>s/^011//</li></ul><p><br>Translation rule will add 53872# prefix:</p><ul><li>s/^/53872#/</li></ul><p><br>While the next rule will result in the number replaced with 123456 in all cases unconditionally.</p><ul><li>123456<br><br></li></ul><p>Translate all non-10 digit CLIs into a new one, and bypass the CLIs with a different length:</p><ul><li>s/^.{0,9}$/0123456789/<br><br></li></ul><p>Exclude + from the front of the number:</p><ul><li>s/^[+]//<br><br></li></ul><p>Add 1 to any sequence of 10 symbols:</p><ul><li>s/^(.{10})$/1\\1/<br><br></li></ul><p>Check if number contains a \"space\" OR \"-\" (dash) OR \".\" (dot) and replace all with \"block\":</p><ul><li>s/^.*([ ]|\\-|\\.).*$/block/<br><br></li></ul><p>Find space in number and remove it:</p><ul><li>'s/[ ]//'</li></ul><p><br></p><p>If number does not start with 14 prefix, then replace it with \"BLOCK\":</p><ul><li>'s/^(?!(14)).*$/BLOCK/'</li></ul><p><br></p><p><font size=\"3\"><strong><font>Random number generation:</font></strong></font></p><p><em>To replace the original value with 5 random characters each of which can be 0, 1, 2, 3 and 6:</em></p><ul><li>s/.*/${R:[0-3,6]5}/</li></ul><p><br></p><p><em>To get the translated number with some constant prefix and the body with the numbers from some range:</em></p><p><u>Example:</u></p><p>prefix +17266</p><p>body - any number from 00000001 to 99999999</p><ul><li><span data-darkreader-inline-bgcolor=\"\" rel=\"tempredactor\" style=\"background-color: rgb(255, 255, 255); --darkreader-inline-bgcolor:#181a1b;\">s/.*/+17266${R:[0-9]7[1-9]}/</span></li></ul><p>Generate 1 of 6 random numbers</p><ul><li>s/.*/${R:[a-f]1}/; s/^a/+919995346432/; s/^b/+919995000100/; s/^c/+919846000012/; s/^d/+919746532512/; s/^e/+919783252017/; s/^f/+919230456789/;</li></ul><p dir=\"ltr\"><br>For more details on Python regular expressions syntax please check the following link:<br><br><a data-fr-linked=\"true\" href=\"http://docs.python.org/release/2.4/lib/re-syntax.html\u200b\u200b\">http://docs.python.org/release/2.4/lib/re-syntax.html</a> (Sippy 2020 and below)<br><a href=\"https://docs.python.org/3.6/library/re.html\">https://docs.python.org/3.6/library/re.html</a> (Sippy 2021 and up)</p></div></div></div></div>",
    "description_text": "     Practical Role of Number Translation     Number translation plays a very important role in today\u2019s VoIP world by allowing networks with different and often conflicting numbering conventions to communicate. In an ideal world there would be only one numbering standard, and everybody would adhere to it, but unfortunately this is not the case in the real world.   When it comes to plain old PSTN, almost every country has its own incompatible standards for dialing local, long distance and international numbers. Any VoIP provider who wants to provide services to customers in different countries will face the need to cope with the differences and provide a consistent numbering plan in the system, still letting users dial numbers in the way they are used to.   Many VoIP carriers, require their customers to send calls to them using \"special\u201d numbering plans (country-specific plans, technical prefixes, etc). \u00a0To cope with all real-world scenarios, the Softswitch provides a flexible number translation mechanism whose task is to compensate for differences in the dialing conventions of individual users and to adhere to Vendor\u2019s requirements. The diagram below illustrates how different CLD number translations are applied during a typical call.        The customer dials a phone number in his SIP Phone. He enters the phone number in the same format he uses on a normal phone. The number is delivered to the Softswitch, which performs authentication, as a result identifying the corresponding Account in the system. In the example above, a customer who is physically located in Vancouver, Canada wants to call number 123456 in Dnepropetrovsk, Ukraine.  After identifying the calling Account the Softswitch translates the number using a CLD Translation Rule specific for the Account. In the example above this process results in the international dialing prefix 011 to be removed. The CLD becomes 380-56-123456 \u2013 number in the E.164 format.  The Softswitch then passes the resulting number into routing logic, which builds a list of possible destinations (Connections) towards which it would terminate the call. In the example above, two such Connections have been identified \u2013 Connection \u201cA\u201d and Connection \u201cB\u201d.  The called number in E.164 format is passed to the routing engine along with the set of Connections that can accept this call, and along with the CLD Translation Rules corresponding to each of those Connections. The routing engine tries to send the call to each of those Connections until it is either connected or there are no more Connections to try. In the example above, in the process of trying to reach the final destination for the call, the Softswitch first tries to send it to Connection A, which corresponds to the gateway connected to the PSTN in the same area where the destination number is. Therefore, applying the CLD Translation Rule for Connection A removes country code and local area code from the E.164 number and it becomes simply 123456 (4a). If for some reason, the call is not going through, the Softswitch attempts the next Connection (Connection B) from the routing list. Connection B corresponds to the gateway connected to the PSTN in the same country, but in a different area code. Again, before sending the call to the PSTN gateway the Softswitch takes the CLD in E.164 format and associates the corresponding CLD Translation Rule, which in this case removes the country code (380) and replaces it with long-distance access code (80). The CLD becomes 80-56-123456.      How Number Translation Works   The Softswitch is built with the assumption that all numbers inside the system are in the E.164 format, that is, country code followed by the area code followed by the local number followed by the optional extension number. However, as the previous section explains, in the real world, calls arrive in various formats that need to be converted into E.164 format, etc.   For the purpose of doing Account-specific to E.164, and then E.164 to Vendor-specific conversions, the system provides three different features that allow translation of called or calling number at different stages of the call through the switch.  There are 6 basic types of number translation available in the Softswitch:   Incoming Destination Number Translation in Authentication Rule. Configured at authentication rule level, is applied to the number called after matching specific authentication rules and before per-Account Number Translation. Configured via the CLD Translation Rule parameter in the Authentication Rules of the Account or via the CLD Translation Rule parameter in DID preferences (from 4.5 version)  Incoming Calling Number Translation in Authentication Rule. Configured at authentication rule level, is applied to the calling number after matching specific authentication rules and before per-Account Number Translation. Configured via the CLI Translation Rule parameter in the Authentication Rules of the Account or via the CLI Translation Rule parameter in the Authentication Rules of DID.  Incoming per-Account Destination Number Translation. Configured on a per-Account basis, is applied to the number called before any call rating and routing decisions are made. Configured via per-Account CLD Translation Rule Account parameter.  Incoming per-Account Calling Number Translation. Configured on a per-Account basis, is applied to the calling number before any call rating and routing decisions are made. Configured via two per-Account parameters: CLI and Force CLI. If Force CLI is \"ON\", then the CLI of all incoming calls matched to that Account will be replaced with the value of the CLI parameter.  Outgoing Destination Number Translation. Configured on a per-Connection basis, is applied to the number called. \u00a0Is obtained after applying the number translation rule and after the rating and routing decisions are made but before a call is sent to the Connection. Configured via CLD Translation Rule parameter for each Connection or Outbound CLD in Trunks.  Outgoing Calling Number Translation. Configured on a per-Connection basis, is applied to the original calling number before a call is sent to that connection. Configured via per-Connection CLI Translation Rule parameter.         Extended picture as of Sippy 2020 release      Translation Rule Syntax   Translation rules are specified either as the replacement numbers or as a set of regular expressions with Python syntax in the following two forms:   s/<match what>/<replace with>/  s/<match what>/<replace with>/g    The former will match/replace a single matched occurrence or pattern, while the latter \u2013 all of them. Several expressions may be used in one translation rule; in this case they need to be separated by semicolon (\u201c;\u201d).  There are several \u201cspecial\u201d symbols in <match what> which allow you to define matching rules, for example ^ matches the beginning of the string, while $ - matches the end, so that for example ^1 will only match 1 as the first character of the string, while 9$ will only match 9 as a last character.     For example, the following translation rule can be used to strip the leading 011 prefix from the number:   s/^011//    Translation rule will add 53872# prefix:   s/^/53872#/    While the next rule will result in the number replaced with 123456 in all cases unconditionally.   123456     Translate all non-10 digit CLIs into a new one, and bypass the CLIs with a different length:   s/^.{0,9}$/0123456789/     Exclude + from the front of the number:   s/^[+]//     Add 1 to any sequence of 10 symbols:   s/^(.{10})$/1\\1/     Check if number contains a \"space\" OR \"-\" (dash) OR \".\" (dot) and replace all with \"block\":   s/^.*([ ]|\\-|\\.).*$/block/     Find space in number and remove it:   's/[ ]//'      If number does not start with 14 prefix, then replace it with \"BLOCK\":   's/^(?!(14)).*$/BLOCK/'      Random number generation:  To replace the original value with 5 random characters each of which can be 0, 1, 2, 3 and 6:   s/.*/${R:[0-3,6]5}/      To get the translated number with some constant prefix and the body with the numbers from some range:  Example:  prefix +17266  body - any number from 00000001 to 99999999   s/.*/+17266${R:[0-9]7[1-9]}/   Generate 1 of 6 random numbers   s/.*/${R:[a-f]1}/; s/^a/+919995346432/; s/^b/+919995000100/; s/^c/+919846000012/; s/^d/+919746532512/; s/^e/+919783252017/; s/^f/+919230456789/;    For more details on Python regular expressions syntax please check the following link:  http://docs.python.org/release/2.4/lib/re-syntax.html (Sippy 2020 and below) https://docs.python.org/3.6/library/re.html (Sippy 2021 and up)     ",
    "seo_data": {
      "meta_title": "",
      "meta_description": "",
      "meta_keywords": ""
    },
    "tags": [
      "CLD translation rule",
      "CLI translation rule",
      "number translation",
      "regular expression"
    ],
    "attachments": [],
    "cloud_files": [],
    "thumbs_up": 19,
    "thumbs_down": 10,
    "hits": 10753,
    "suggested": 0,
    "feedback_count": 0
  },
  {
    "id": 84153,
    "type": 1,
    "status": 2,
    "agent_id": 3763909,
    "created_at": "2013-05-10T14:01:10Z",
    "category_id": 81138,
    "folder_id": 133168,
    "title": "Activation & Expiration Date/Upload Actions",
    "updated_at": "2015-03-07T11:43:59Z",
    "description": "<p><b>Activation and expiration date for routes and rates</b> - allows to specify \r\ncertain date/time limitation for each route/rate. This allows you to \r\nupload pricelists for your customers and vendors before the actual price\r\n change is to occur, which usually happens at midnight.\r\n\r\n</p>\r\n<div>\r\n<p>\r\nThere might be some misunderstandings how different actions are treated \r\ndepending on their current status and newly enetered data.\r\n</p>\r\n<p><br></p>\r\n<p>Action <b>A</b>: this action will add a new route/rate entry. If on the time of\r\n activation of new route there is another old active (activation date in\r\n past, expiration in future or never) route, it will be expired with the\r\n rate activation date. Using this action for regular price \r\nchanges/updates will make sure your CDRs are always consistent with \r\ntheir according rate/route data.\r\n</p>\r\n<p>\r\nAction <b>D</b>: the rate will be deleted, no matter what is activation/expiration date.\r\n</p>\r\n<p>\r\nAction <b>U</b>: allows to make any modifcation to rate/route data, the only \r\nexception is the activation/expiration date. If a date is in the past it\r\n cannot be changed for both dates. Using this action can lead to \r\nsituation when CDRs billing price will differ form corresponding rate \r\ndata.\r\n</p>\r\n<p>\r\nAction <b>S</b>: the same as action U, but the action is performed based on prefix, not the rate/route id.\r\n</p>\r\n<p>\r\nAction <b>AS</b>: If the prefix exists edit it like S, if not, add it like A.</p>\r\n</div>",
    "description_text": " Activation and expiration date for routes and rates - allows to specify \ncertain date/time limitation for each route/rate. This allows you to \nupload pricelists for your customers and vendors before the actual price\n change is to occur, which usually happens at midnight.\n\n \n \n \nThere might be some misunderstandings how different actions are treated \ndepending on their current status and newly enetered data.\n \n   \n Action A: this action will add a new route/rate entry. If on the time of\n activation of new route there is another old active (activation date in\n past, expiration in future or never) route, it will be expired with the\n rate activation date. Using this action for regular price \nchanges/updates will make sure your CDRs are always consistent with \ntheir according rate/route data.\n \n \nAction D: the rate will be deleted, no matter what is activation/expiration date.\n \n \nAction U: allows to make any modifcation to rate/route data, the only \nexception is the activation/expiration date. If a date is in the past it\n cannot be changed for both dates. Using this action can lead to \nsituation when CDRs billing price will differ form corresponding rate \ndata.\n \n \nAction S: the same as action U, but the action is performed based on prefix, not the rate/route id.\n \n \nAction AS: If the prefix exists edit it like S, if not, add it like A. \n ",
    "seo_data": {
      "meta_title": "",
      "meta_description": "",
      "meta_keywords": ""
    },
    "tags": [],
    "attachments": [],
    "cloud_files": [],
    "thumbs_up": 1,
    "thumbs_down": 5,
    "hits": 562,
    "suggested": 0,
    "feedback_count": 0
  },
  {
    "id": 91019,
    "type": 1,
    "status": 2,
    "agent_id": 3763909,
    "created_at": "2013-05-29T09:23:53Z",
    "category_id": 81138,
    "folder_id": 133168,
    "title": "Weighted Distribution",
    "updated_at": "2016-04-11T06:43:10Z",
    "description": "<p>The <b>Weighted Distribution</b> allows to split traffic randomly between the Vendor Connections but keeping the distribution in proportion to their weights. <br><br><b>Example: </b><br><br>Lets assume that there are three routing group entries: <br><br></p>\r\n<p></p>\r\n<blockquote style=\"margin: 0 0 0 40px; border: none; padding: 0px;\"><table id=\"table70675\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\"><tbody class=\"current\">\r\n<tr>\r\n<td class=\"\"><p><i style=\"color: rgb(0, 0, 0);\">Route 1</i></p></td>\r\n<td class=\"\"><p><i style=\"color: rgb(0, 0, 0);\">Weight 3</i></p></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\"><p><i style=\"color: rgb(0, 0, 0);\">Route 2</i></p></td>\r\n<td class=\"\"><p><i class=\"current\" style=\"color: rgb(0, 0, 0);\">Weight 2</i></p></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\"><p><i style=\"color: rgb(0, 0, 0);\">Route 3</i></p></td>\r\n<td class=\"\"><p><i><span style=\"color: rgb(0, 0, 0);\">Weight 3</span></i></p></td>\r\n</tr>\r\n</tbody></table></blockquote>\r\n<p><br><br>For every call there is a chance that any of those routes will become the most preferred. The <i>Route 2</i>\u00a0will be preferred route in approximately 25<i>%</i> of calls as well as the <i>Route 1</i>, and the <i>Route 3</i>\u00a0will be most preferred in around 37.5<i>%</i> of calls. <br><br>\u00a0There is a special value of weight - <i>'No Value'</i>. This allows to apply a policy after the Weighted Distribution. <br><br><b>Description of Routing Policy application. </b><br><br>The policies are applied in three stages. <br>The policies which come before Weighted Distribution are <u>applied first</u>. <br>Then the entries with defined weight and No Value weight are split into groups keeping their positions after the first stage policies have been applied. And then the Weighted Distribution is applied to each group of entries with the defined weight. Groups with No Value weight are kept untouched. <br>At the third stage the groups of No Value weight are sorted according the policies which come after the Weighted Distribution. The groups of already applied Weighted Distribution are kept untouched. <br><br><b>Example: </b><br><br>Let's assume we have a Routing group\u00a0which have the following routing policy <b>Preference</b> -&gt; <b>Weighted Distribution</b> -&gt; <b>Least Cost</b>. <br><br><u>The entries of the routing group are:\u00a0</u></p>\r\n<p><br></p>\r\n<blockquote style=\"margin: 0 0 0 40px; border: none; padding: 0px;\"><table id=\"table93703\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\"><tbody class=\"current\">\r\n<tr class=\"current\">\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"background-color: rgb(238, 236, 225);\">\u00a0<span style=\"color: rgb(0, 0, 0);\"><b>Route</b>\r\n</span>\r\n</span></td>\r\n<td class=\"\" style=\"text-align: center;\">\r\n<span style=\"background-color: rgb(238, 236, 225);\"><span style=\"color: rgb(0, 0, 0);\"><b>Preference</b>\u00a0</span>\r\n</span>\r\n</td>\r\n<td class=\"\" style=\"text-align: center;\">\r\n<span style=\"background-color: rgb(238, 236, 225);\"><span style=\"color: rgb(0, 0, 0);\"><b>Weight</b>\u00a0</span>\r\n</span>\r\n</td>\r\n<td class=\"\" style=\"text-align: center;\">\r\n<span style=\"color: rgb(0, 0, 0);\"><span style=\"background-color: rgb(238, 236, 225);\"><b>Cost</b>\u00a0</span></span>\r\n</td>\r\n</tr>\r\n<tr>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">Route 1<br>\r\n</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">No Value</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">1</span></td>\r\n</tr>\r\n<tr>\r\n<td style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">Route 2</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">3</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">No Value</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">Route 3</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">4</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\"><p style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">Route 4</span></p></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">4</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\"><p style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">Route 5</span></p></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">5</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">3</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\"><p style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">Route 6</span></p></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">5</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">4</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\"><p style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">Route 7</span></p></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">6</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">No Value</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">3</span></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\"><p style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">Route 8</span></p></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">6</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">No Value</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">1</span></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\"><p style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">Route 9</span></p></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">7</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">No Value</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n</tr>\r\n</tbody></table></blockquote>\r\n<p></p>\r\n<p><br><br><u>After first stage sort on preference the order of routes will be:\u00a0</u></p>\r\n<p><br><br></p>\r\n<p></p>\r\n<p></p>\r\n<blockquote style=\"margin: 0 0 0 40px; border: none; padding: 0px;\"><table id=\"table92373\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\" style=\"text-align: center; \"><tbody>\r\n<tr class=\"current\">\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"background-color: rgb(238, 236, 225);\">\u00a0<span style=\"color: rgb(0, 0, 0);\"><b>Route</b>\r\n</span>\r\n</span></td>\r\n<td style=\"text-align: center;\"><b style=\"color: rgb(0, 0, 0); background-color: rgb(238, 236, 225);\">Preference</b></td>\r\n<td style=\"text-align: center;\"><b style=\"color: rgb(0, 0, 0); background-color: rgb(238, 236, 225);\">Weight\u00a0</b></td>\r\n<td style=\"text-align: center;\"><b style=\"color: rgb(0, 0, 0);\"><span style=\"background-color: rgb(238, 236, 225);\">Cost\u00a0</span></b></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">Route 9</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">7</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">No Value</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\"><p class=\"current\" style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">Route 8</span></p></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">6</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">No Value</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">1</span></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\"><p style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">Route 7</span></p></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">6</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">No Value</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">3</span></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"line-height: 1.3; color: rgb(0, 0, 0);\">Route 5</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">5</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">3</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\"><p class=\"current\" style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">Route 6</span></p></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">5</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">4</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\"><p style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">Route 3</span></p></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">4</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\"><p style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">Route 4</span></p></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">4</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\"><p style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">Route 2</span></p></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">3</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">No Value</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\"><p class=\"current\" style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">Route 1</span></p></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">No Value</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">1</span></td>\r\n</tr>\r\n</tbody></table></blockquote>\r\n<p style=\"text-align: center; \"><br></p>\r\n<p><br>Please note that the <i>Routes 7</i> and <i>8</i> have the same preference and thus the result of the preference sort is unpredictable. This also applies to pairs (<i>Route 5, Route 6</i>) and (<i>Route 3, Route 4</i>). <br><br>The <u>stage two</u> of policy application begins now. The entries are split into groups of the entries to which the Weighted Distribution can be applied and those which are not affected by the distribution: <br><br><u>Group 1: The Weighted Distribution is not applicable </u><br><br></p>\r\n<blockquote style=\"margin: 0 0 0 40px; border: none; padding: 0px;\"><table id=\"table47381\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\"><tbody class=\"current\">\r\n<tr class=\"current\">\r\n<td class=\"\" style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0); background-color: rgb(238, 236, 225);\">\u00a0<b>Route</b></span></td>\r\n<td style=\"text-align: center; \"><b style=\"color: rgb(0, 0, 0); background-color: rgb(238, 236, 225);\">Preference</b></td>\r\n<td style=\"text-align: center; \"><b style=\"color: rgb(0, 0, 0); background-color: rgb(238, 236, 225);\">Weight\u00a0</b></td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\"><span style=\"background-color: rgb(238, 236, 225);\"><b>Cost</b>\u00a0</span></span></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\" style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">Route 9</span></td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">7</span></td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">No Value</span></td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n</tr>\r\n<tr>\r\n<td style=\"text-align: center; \" class=\"\">\r\n<span style=\"color: rgb(0, 0, 0); line-height: 1.3;\">Route\u00a0</span><span style=\"color: rgb(0, 0, 0);\">8</span>\r\n</td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">6</span></td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">No Value</span></td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">1</span></td>\r\n</tr>\r\n<tr>\r\n<td style=\"text-align: center; \" class=\"\">\r\n<span style=\"color: rgb(0, 0, 0); line-height: 1.3;\">Route\u00a0</span><span style=\"color: rgb(0, 0, 0);\">7</span>\r\n</td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">6</span></td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">No Value</span></td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">3</span></td>\r\n</tr>\r\n</tbody></table></blockquote> <br>\r\n<br>\r\n\r\n\r\n<p><u>Group 2: The Weighted Distribution is applicable\u00a0</u></p>\r\n<p><u><br></u></p>\r\n<blockquote style=\"margin: 0 0 0 40px; border: none; padding: 0px;\"><table id=\"table91949\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\"><tbody>\r\n<tr class=\"current\">\r\n<td class=\"\" style=\"text-align: center; \"><b style=\"color: rgb(0, 0, 0); background-color: rgb(238, 236, 225);\">Route</b></td>\r\n<td style=\"text-align: center; \"><b style=\"color: rgb(0, 0, 0); background-color: rgb(238, 236, 225);\">Preference</b></td>\r\n<td style=\"text-align: center; \"><b style=\"color: rgb(0, 0, 0); background-color: rgb(238, 236, 225);\">Weight</b></td>\r\n<td style=\"text-align: center; \"><b style=\"color: rgb(0, 0, 0);\"><span style=\"background-color: rgb(238, 236, 225);\">Cost</span></b></td>\r\n</tr>\r\n<tr>\r\n<td style=\"text-align: center; \" class=\"\">\r\n<span style=\"color: rgb(0, 0, 0); line-height: 1.3;\">Route\u00a0</span><span style=\"color: rgb(0, 0, 0);\">5</span>\r\n</td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">5</span></td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">3</span></td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n</tr>\r\n<tr>\r\n<td style=\"text-align: center; \" class=\"\">\r\n<span style=\"color: rgb(0, 0, 0); line-height: 1.3;\">Route\u00a0</span><span style=\"color: rgb(0, 0, 0);\">6</span>\r\n</td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">5</span></td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">4</span></td>\r\n<td class=\"\" style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n</tr>\r\n</tbody></table></blockquote>\r\n<p></p>\r\n<p><br></p>\r\n<p><br><u>Group 3: The Weighted Distribution is applicable </u><br><br></p>\r\n<p></p>\r\n<p></p>\r\n<blockquote style=\"margin: 0 0 0 40px; border: none; padding: 0px;\"><table id=\"table61849\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\"><tbody>\r\n<tr class=\"current\">\r\n<td class=\"\" style=\"text-align: center; \"><b style=\"color: rgb(0, 0, 0); background-color: rgb(238, 236, 225);\">Route</b></td>\r\n<td style=\"text-align: center; \"><b style=\"color: rgb(0, 0, 0); background-color: rgb(238, 236, 225);\">Preference</b></td>\r\n<td style=\"text-align: center; \"><b style=\"color: rgb(0, 0, 0); background-color: rgb(238, 236, 225);\">Weight</b></td>\r\n<td style=\"text-align: center; \"><b style=\"color: rgb(0, 0, 0);\"><span style=\"background-color: rgb(238, 236, 225);\">Cost</span></b></td>\r\n</tr>\r\n<tr>\r\n<td style=\"text-align: center; \" class=\"\">\r\n<span style=\"color: rgb(0, 0, 0); line-height: 1.3;\">Route\u00a0</span><span style=\"color: rgb(0, 0, 0);\">3</span>\r\n</td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">4</span></td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n</tr>\r\n<tr>\r\n<td style=\"text-align: center; \" class=\"\">\r\n<span style=\"color: rgb(0, 0, 0); line-height: 1.3;\">Route\u00a0</span><span style=\"color: rgb(0, 0, 0);\">4</span>\r\n</td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">4</span></td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n</tr>\r\n</tbody></table></blockquote>\r\n<p><br></p>\r\n<p><br><u>Group 4: The Weighted Distribution is not applicable </u><br><br></p>\r\n<p></p>\r\n<p></p>\r\n<blockquote style=\"margin: 0 0 0 40px; border: none; padding: 0px;\"><table id=\"table80355\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\"><tbody>\r\n<tr class=\"current\">\r\n<td class=\"\" style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0); background-color: rgb(238, 236, 225);\">\u00a0<b>Route</b></span></td>\r\n<td class=\"\" style=\"text-align: center; \"><b style=\"color: rgb(0, 0, 0); background-color: rgb(238, 236, 225);\">Preference</b></td>\r\n<td style=\"text-align: center; \"><b style=\"color: rgb(0, 0, 0); background-color: rgb(238, 236, 225);\">Weight</b></td>\r\n<td style=\"text-align: center; \"><b style=\"color: rgb(0, 0, 0);\"><span style=\"background-color: rgb(238, 236, 225);\">Cost</span></b></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\" style=\"text-align: center; \">\r\n<span style=\"color: rgb(0, 0, 0); line-height: 1.3;\">Route\u00a0</span><span style=\"color: rgb(0, 0, 0);\">2</span>\r\n</td>\r\n<td class=\"\" style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">3</span></td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">No Value</span></td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n</tr>\r\n<tr>\r\n<td style=\"text-align: center; \" class=\"\">\r\n<span style=\"color: rgb(0, 0, 0); line-height: 1.3;\">Route\u00a0</span><span style=\"color: rgb(0, 0, 0);\">1</span>\r\n</td>\r\n<td class=\"\" style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">No Value</span></td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">1</span></td>\r\n</tr>\r\n</tbody></table></blockquote>\r\n<p><br></p>\r\n<p><br>The groups 2 and 3 are distinct groups because they have different preferences. <br><br>Then the weighted distribution is applied to the groups 2 and 3 independently. Let's assume that the order of the routes in those groups left unchanged after the weighted distribution. <br><br>The <u>stage three</u> of policy application starts. The entries in groups 1 and 4 are sorted according to their costs. The groups 2 and 3 are kept unchanged. <br></p>\r\n<p><u><br></u></p>\r\n<p><u>So the final routes order will be: </u><br></p>\r\n<p><u><br></u></p>\r\n<p><u><br></u></p>\r\n<p></p>\r\n<p></p>\r\n<blockquote style=\"margin: 0 0 0 40px; border: none; padding: 0px;\"><table id=\"table32720\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\"><tbody class=\"current\">\r\n<tr class=\"current\">\r\n<td class=\"\" style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0); background-color: rgb(238, 236, 225);\"><b>Route</b></span></td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0); background-color: rgb(238, 236, 225);\"><b>Preference</b></span></td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0); background-color: rgb(238, 236, 225);\"><b>Weight</b></span></td>\r\n<td style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\"><b><span style=\"background-color: rgb(238, 236, 225);\">Cost</span></b></span></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\"><p style=\"text-align: left;\"><span style=\"text-align: center; color: rgb(0, 0, 0);\">Route 8</span></p></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">6</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">No Value</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">1</span></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\"><p style=\"text-align: left;\"><span style=\"text-align: center; color: rgb(0, 0, 0);\">Route 9</span></p></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">7</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">No Value</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\"><p style=\"text-align: left;\"><span style=\"text-align: center; color: rgb(0, 0, 0);\">Route 7</span></p></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">6</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">No Value</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">3</span></td>\r\n</tr>\r\n<tr class=\"current\">\r\n<td class=\"\"><p style=\"text-align: left;\"><span style=\"text-align: center; color: rgb(0, 0, 0);\">Route 5</span></p></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">5</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">3</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\"><p style=\"text-align: left;\"><span style=\"text-align: center; color: rgb(0, 0, 0);\">Route 6</span></p></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">5</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">4</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\"><p class=\"current\" style=\"text-align: left;\"><span style=\"text-align: center; color: rgb(0, 0, 0);\" class=\"current\">Route 3</span></p></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">4</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\"><p class=\"current\" style=\"text-align: left;\"><span style=\"text-align: center; color: rgb(0, 0, 0);\">Route 4</span></p></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">4</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\"><p class=\"current\" style=\"text-align: left;\"><span style=\"text-align: center; color: rgb(0, 0, 0);\">Route 1</span></p></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">No Value</span></td>\r\n<td class=\"\" style=\"text-align: center;\"><span style=\"color: rgb(0, 0, 0);\">1</span></td>\r\n</tr>\r\n<tr>\r\n<td class=\"\"><p style=\"text-align: left;\"><span style=\"text-align: center; color: rgb(0, 0, 0);\">Route 2</span></p></td>\r\n<td class=\"\" style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">3</span></td>\r\n<td class=\"\" style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">No Value</span></td>\r\n<td class=\"\" style=\"text-align: center; \"><span style=\"color: rgb(0, 0, 0);\">2</span></td>\r\n</tr>\r\n</tbody></table></blockquote>\r\n<p><br><br>Note!\u00a0 It's dangerous to use the same preference for No Value routes and routes with a weight because the sort on an equal values can distribute the entries randomly giving unwanted side effects. A rule of thumb is to create groups of No Value routes and routes with a weight by using a policy before the Weighted Distribution.</p>\r\n",
    "description_text": " The Weighted Distribution allows to split traffic randomly between the Vendor Connections but keeping the distribution in proportion to their weights.   Example:   Lets assume that there are three routing group entries:    \n \n \n\n  Route 1  \n  Weight 3  \n\n\n  Route 2  \n  Weight 2  \n\n\n  Route 3  \n  Weight 3  \n\n \n   For every call there is a chance that any of those routes will become the most preferred. The Route 2\u00a0will be preferred route in approximately 25% of calls as well as the Route 1, and the Route 3\u00a0will be most preferred in around 37.5% of calls.   \u00a0There is a special value of weight - 'No Value'. This allows to apply a policy after the Weighted Distribution.   Description of Routing Policy application.   The policies are applied in three stages.  The policies which come before Weighted Distribution are applied first.  Then the entries with defined weight and No Value weight are split into groups keeping their positions after the first stage policies have been applied. And then the Weighted Distribution is applied to each group of entries with the defined weight. Groups with No Value weight are kept untouched.  At the third stage the groups of No Value weight are sorted according the policies which come after the Weighted Distribution. The groups of already applied Weighted Distribution are kept untouched.   Example:   Let's assume we have a Routing group\u00a0which have the following routing policy Preference -> Weighted Distribution -> Least Cost.   The entries of the routing group are:\u00a0 \n   \n \n\n \u00a0Route\n\n \n \nPreference\u00a0\n\n \n \nWeight\u00a0\n\n \n \nCost\u00a0\n \n\n\n Route 1 \n \n 2 \n No Value \n 1 \n\n\n Route 2 \n 3 \n No Value \n 2 \n\n\n Route 3 \n 4 \n 2 \n 2 \n\n\n  Route 4  \n 4 \n 2 \n 2 \n\n\n  Route 5  \n 5 \n 3 \n 2 \n\n\n  Route 6  \n 5 \n 4 \n 2 \n\n\n  Route 7  \n 6 \n No Value \n 3 \n\n\n  Route 8  \n 6 \n No Value \n 1 \n\n\n  Route 9  \n 7 \n No Value \n 2 \n\n \n \n   After first stage sort on preference the order of routes will be:\u00a0 \n    \n \n \n \n\n \u00a0Route\n\n \n Preference \n Weight\u00a0 \n Cost\u00a0 \n\n\n Route 9 \n 7 \n No Value \n 2 \n\n\n  Route 8  \n 6 \n No Value \n 1 \n\n\n  Route 7  \n 6 \n No Value \n 3 \n\n\n Route 5 \n 5 \n 3 \n 2 \n\n\n  Route 6  \n 5 \n 4 \n 2 \n\n\n  Route 3  \n 4 \n 2 \n 2 \n\n\n  Route 4  \n 4 \n 2 \n 2 \n\n\n  Route 2  \n 3 \n No Value \n 2 \n\n\n  Route 1  \n 2 \n No Value \n 1 \n\n \n   \n  Please note that the Routes 7 and 8 have the same preference and thus the result of the preference sort is unpredictable. This also applies to pairs (Route 5, Route 6) and (Route 3, Route 4).   The stage two of policy application begins now. The entries are split into groups of the entries to which the Weighted Distribution can be applied and those which are not affected by the distribution:   Group 1: The Weighted Distribution is not applicable    \n \n\n \u00a0Route \n Preference \n Weight\u00a0 \n Cost\u00a0 \n\n\n Route 9 \n 7 \n No Value \n 2 \n\n\n \nRoute\u00a08\n \n 6 \n No Value \n 1 \n\n\n \nRoute\u00a07\n \n 6 \n No Value \n 3 \n\n   \n \n\n\n Group 2: The Weighted Distribution is applicable\u00a0 \n   \n \n\n Route \n Preference \n Weight \n Cost \n\n\n \nRoute\u00a05\n \n 5 \n 3 \n 2 \n\n\n \nRoute\u00a06\n \n 5 \n 4 \n 2 \n\n \n \n   \n  Group 3: The Weighted Distribution is applicable    \n \n \n \n\n Route \n Preference \n Weight \n Cost \n\n\n \nRoute\u00a03\n \n 4 \n 2 \n 2 \n\n\n \nRoute\u00a04\n \n 4 \n 2 \n 2 \n\n \n   \n  Group 4: The Weighted Distribution is not applicable    \n \n \n \n\n \u00a0Route \n Preference \n Weight \n Cost \n\n\n \nRoute\u00a02\n \n 3 \n No Value \n 2 \n\n\n \nRoute\u00a01\n \n 2 \n No Value \n 1 \n\n \n   \n  The groups 2 and 3 are distinct groups because they have different preferences.   Then the weighted distribution is applied to the groups 2 and 3 independently. Let's assume that the order of the routes in those groups left unchanged after the weighted distribution.   The stage three of policy application starts. The entries in groups 1 and 4 are sorted according to their costs. The groups 2 and 3 are kept unchanged.   \n   \n So the final routes order will be:   \n   \n   \n \n \n \n\n Route \n Preference \n Weight \n Cost \n\n\n  Route 8  \n 6 \n No Value \n 1 \n\n\n  Route 9  \n 7 \n No Value \n 2 \n\n\n  Route 7  \n 6 \n No Value \n 3 \n\n\n  Route 5  \n 5 \n 3 \n 2 \n\n\n  Route 6  \n 5 \n 4 \n 2 \n\n\n  Route 3  \n 4 \n 2 \n 2 \n\n\n  Route 4  \n 4 \n 2 \n 2 \n\n\n  Route 1  \n 2 \n No Value \n 1 \n\n\n  Route 2  \n 3 \n No Value \n 2 \n\n \n   Note!\u00a0 It's dangerous to use the same preference for No Value routes and routes with a weight because the sort on an equal values can distribute the entries randomly giving unwanted side effects. A rule of thumb is to create groups of No Value routes and routes with a weight by using a policy before the Weighted Distribution. \n",
    "seo_data": {
      "meta_title": "",
      "meta_description": "",
      "meta_keywords": ""
    },
    "tags": [],
    "attachments": [],
    "cloud_files": [],
    "thumbs_up": 3,
    "thumbs_down": 8,
    "hits": 1436,
    "suggested": 0,
    "feedback_count": 0
  },
  {
    "id": 3000062198,
    "type": 1,
    "status": 2,
    "agent_id": 3763909,
    "created_at": "2017-02-01T03:31:22Z",
    "category_id": 81138,
    "folder_id": 133168,
    "title": "Timeouts affecting calls in Sippy",
    "updated_at": "2020-02-20T13:41:51Z",
    "description": "<p>The Sippy Softswitch has multiple layers of timeouts that are configurable to control the flow and quality of your calls. Timeouts provide multiple benefits to you as a Sippy operator, including quality assurance, the provision of an added layer of logic for routing optimization, and call redirection accommodating user preferences.</p><p><br></p><p>Timeouts are imposed on outbound/upstream traffic to ensure the quality of your connections is delivered. Route forwarding occurs within your routing table to attempt to terminate the call through successive Routing Entries in the event that a gateway (Vendor &gt; Connection) cannot be reached for any number of reasons. Adjusting multiple timeouts is possible with Sippy to empower you to configure routing preferences that are better suited to your network characteristics.</p><p><br></p><p>Inbound traffic timeouts depict the call flow of the call through your customer's preferred termination points and the total time that the originating caller waits. Inbound timeouts empower the control over Call Forwarding attempts to multiple selections, Voicemail, and a total time for all termination attempts.</p><h3><br></h3><h2>Outbound/Upstream traffic timeouts and their order</h2><p><br></p><p>Outbound traffic is the calls that have originated at your customer's UA or IP that are sent to your Sippy Softswitch for terminating through your destinations. Calls are Authenticated to an Account, billed by the Tariff associated to the Account's Balance, and routed according to the Routing Entries that are configured in your Routing Group. The calls are passed to your Vendor/Supplier for termination.</p><ol><li><strong><span style=\"color: rgb(184, 49, 47);\">Reply Timeout, Sec</span></strong> - Configured on Vendor &gt; Connection, the time that Sippy will wait for the 100 reply search. Also known as 100 timeout. The default value is 5 seconds, which is configurable in your Vendor &gt; Connection - Reply Timeout, Sec.</li><li><strong><span style=\"color: rgb(184, 49, 47);\">1xx Timeout, sec</span></strong> - The time that Sippy waits for any session progress response from the Vendor &gt; Connection. The default 1xx Timeout is <strong>10 seconds</strong>, which is configurable in your Destination Set &gt; Route - the specific route for your prefix.</li><li><strong><span style=\"color: rgb(184, 49, 47);\">2xx Timeout, sec</span></strong> - The time that Sippy waits for the call to be answered resulting in a 2xx\u2014Successful Response and the call to begin. The default 2xx Timeout is <strong>60 seconds</strong>, which is configurable in your Destination Set &gt; Route - the specific route for your prefix.</li><li><strong><span style=\"color: rgb(184, 49, 47);\">Final 2xx Timeout, sec</span></strong> -<span data-identifyelement=\"190\" data-test-id=\"article-description\">\u00a0this parameter allows setting the 2xx timeout for the last routing entry in the Routing Entries/Follow Me Entry, by default it's set to 300 seconds, meaning that Sippy will be waiting for 200OK message on the INVITE up to this <strong>Final 2xx Timeout</strong>. The timeout is applied to the last routing entry in the routing group/last Follow Me Entry only. Since 4.5 version of Sippy on Routing Group preferences the new item has been added:</span></li></ol><p><strong><span style=\"color: rgb(184, 49, 47);\"><img src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3051300254/original/orpHFG918bLjsqV2GEcBZNs6QfXbpM5Plw.png?1582205998\" style=\"width: 411px;\" class=\"fr-fic fr-dib\" data-attachment=\"[object Object]\" data-id=\"3051300254\"></span></strong><br><br><em>Note: All three timers (1xx, 2xx, and Final 2xx) are fired just after sending the INVITE to the vendor. E.g. with 2xx timeout = 10 seconds, case the vendor/connection is not able to connect the call (send 200OK message to us) within 10 seconds, we're dropping that vendor/connection from the call flow, and either try another vendor or drop the call. This is applied even if the vendor replied with the first 1xx message at the 9th second of the call.</em></p><p><span data-test-desctext=\"\" data-test-selectablecontent=\"\">\u00a0 \u00a0 \u00a0 \u00a0\u00a0</span></p><p><span data-test-desctext=\"\" data-test-selectablecontent=\"\">\u00a0 \u00a0 \u00a0 \u00a0 <u>Let's consider that timeouts are set as below:\u00a0</u><br> Vendor/connection --&gt;<strong>\u00a0Reply timeout (100 Trying timeout)</strong> = 5 sec\u00a0</span></p><p><span data-test-desctext=\"\" data-test-selectablecontent=\"\">\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Destination set --&gt; Route --&gt;<strong>\u00a01xx timeout</strong> = 10 sec\u00a0</span></p><p><span data-test-desctext=\"\" data-test-selectablecontent=\"\">\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Destination set --&gt; Route --&gt;<strong>\u00a02xx timeout</strong> = 2 sec\u00a0</span></p><p><span data-test-desctext=\"\" data-test-selectablecontent=\"\"><br> Next step, a user makes a call and <strong>100 Trying</strong> is delayed for 4 sec.\u00a0</span></p><p><span data-test-desctext=\"\" data-test-selectablecontent=\"\">\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0As a result, the call is dropped in 2 sec due to <strong>2xx timeout</strong> because all timeouts are fired simultaneously. In our case, the first timeout is <strong>2xx</strong> which runs out in 2 sec and it doesn't matter that the system should wait for 100 Trying within 4 sec.</span>\u00a0</p><p><br></p><p><em><strong><span style=\"color: rgb(184, 49, 47);\">\u00a0 \u00a0 \u00a0 \u00a0</span></strong></em><span style=\"color: rgb(184, 49, 47);\">\u00a0</span><span style=\"color: rgb(0, 0, 0);\">5.</span><em><strong><span style=\"color: rgb(184, 49, 47);\">\u00a0Max Session Time</span></strong> - The total duration of a call that is allowed once setup has been completed and the call has begun. This parameter is configured on each Account under Advanced Parameters. The Max Session Time affects inbound, outbound,</em><em>\u00a0and On-Net calls alike.\u00a0</em><em>More information can be found at the linked documents at the foot of this page.</em></p><p><br></p><h2>Inbound traffic timeouts and their order</h2><ol><li><strong><span style=\"color: rgb(184, 49, 47);\">Follow Me timeout</span></strong> - The \"Follow Me\" feature empowers each Account within Sippy to forward calls to another specified CLD after a trying attempt has been made for a configurable timeframe.</li><li><strong><span style=\"color: rgb(184, 49, 47);\">VM Timeout, secs</span></strong> - The Voicemail timeout determines the point in time at which the call is directed to an Account's configured Voicemail.<br><em>NOTE: \"VM Enabled\" checkbox is selected by default on Account creation (4.5) with a \"VM Timeout, secs\" of 30 as a default timeout enabled.</em></li><li><strong><span style=\"color: rgb(184, 49, 47);\">Max Session Time</span></strong> - The total duration of a call that is allowed once setup has been completed and the call has begun. This parameter is configured on each Account under Advanced Parameters. The Max Session Time affects inbound, outbound, and Onnet calls alike and has a default value of 3600 seconds.</li><li><strong><span style=\"color: rgb(184, 49, 47);\"><strong><span style=\"color: rgb(184, 49, 47);\">Final 2xx Timeout, sec</span></strong> -</span></strong><span style=\"color: rgb(0, 0, 0);\"><span data-identifyelement=\"190\" data-test-id=\"article-description\">\u00a0this parameter allows setting the 2xx timeout for the last routing entry in the Routing Entries/Follow Me Entry, by default it's set to 300 seconds, meaning that Sippy will be waiting for 200OK message on the INVITE up to this Final 2xx Timeout. The timeout is applied to the last routing entry in the routing group/last Follow Me Entry only.</span></span></li></ol><p style=\"text-align: left;\"><br></p><p style=\"text-align: left;\"><em>Note: More information can be found at the linked documents at the foot of this page.</em></p><p><br></p><p><br></p><h2>On-Net calls timeout</h2><ul><li><strong><span style=\"color: rgb(184, 49, 47);\">On-Net timeout</span>\u00a0</strong>- The hardcoded Sippy timeout for Onnet calls is 15 seconds (for 5.0 see below). This affects calls that are made from Account to Account in the Sippy Softswitch with the Timeout initiated when <em>an action is not taken by the receiving Account</em>.</li></ul><p><br></p><p>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 From 5.0 Sippy introduced 3 additional <strong><span style=\"color: rgb(184, 49, 47);\">on-net timeouts</span></strong> (that were hard-coded till 5.0) that are configurable for each routing group, namely a:</p><pre contenteditable=\"false\" data-code-brush=\"html\" rel=\"highlighter\">onnet_timeout_100 \u00a0(default value 5 sec)\nonnet_timeout_1xx \u00a0(default value 10 sec)\nonnet_timeout_2xx \u00a0(default value 60 sec)</pre><p>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0On the current stage, they can be tuned only by Sippy support team via database directly. The default values can be also changed for the system on a permanent basis.</p><p><br></p><h2>Hardcoded RFC timeouts</h2><ul><li>A timeout of <strong>32 seconds</strong> is a hard-coded as a default timer compliant to RFC 3261 relating to incomplete transactions or unreliable transports: <a href=\"https://tools.ietf.org/html/rfc3261#page-114\" rel=\"noreferrer\" target=\"_blank\" title=\"\">https://tools.ietf.org/html/rfc3261#page-114</a></li><li>A hardcoded timeout of <strong>300 seconds</strong> is employed in the scenario that there is no 200 OK from the last routing entry gateway within 300 seconds. The call is dropped on 487 Request Expired from the Sippy Softswitch.</li></ul><p><br></p><p><br></p><h2>RTP Timeout</h2><p><br></p><p>The default value for Sippy's built-in RTP timer is <strong>60 seconds</strong>. There are several features regarding the RTP timeout:</p><ul><li>It works only in the scenario that media traffic is passing via the server, through Sippy's built-in RTPproxy media proxy.</li><li>RTP packets are sent by Sippy without a response from the callee's side.</li><li>The duration of the call will be adjusted for 60 seconds (RTP timer value) once the RTP timer is activated.</li></ul><p><br></p><h2>Troubleshooting and Identifying calls that are affected by timeouts</h2><p><br></p><p>Most often, a call that has been ended as a result of a timeout will be interrupted by Sippy with a CANCEL SIP message. By capturing a specific Call ID of an affected call and running a SIP Log Viewer within Sippy's Tools, the SIP Log will display a CANCEL after the specified length of time, as can be seen in the following image. The CANCEL was sent by the originating switch, in this case, identifying a timeout of 15 seconds which is an Onnet call timeout.</p><p><br></p><p style=\"text-align: center;\"><img class=\"fr-dib\" src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3026062105/original/UamYkHAs2G8mb1KI6CUmukI9LwbReC0z8g.png?1486101310\" data-filelink=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3026062105/original/UamYkHAs2G8mb1KI6CUmukI9LwbReC0z8g.png?1486101310\" data-fileid=\"3026062105\" data-uniquekey=\"1486100911846\"></p><p><br></p><p><br></p><p><strong>More documentation/information:</strong></p><ul><li><a href=\"http://support.sippysoft.com/solution/articles/145637-call-forwarding-follow-me-\">Call Forwarding / Follow Me</a></li><li><a href=\"http://support.sippysoft.com/solution/articles/77556-understanding-routing\">Understanding Routing</a></li></ul><p><br></p><p><strong>API application manipulation documentation:</strong></p><ul><li><a href=\"http://support.sippysoft.com/solution/articles/107435-connections-management\">XML-RPC API - Connections Management</a> - manipulation of 100 Reply Timeout.</li><li><a href=\"http://support.sippysoft.com/solution/articles/107473-destination-sets-management\">XML-RPC API - Destination Sets Management</a> - manipulation of 1xx and 2xx Timeouts.</li><li><a href=\"http://support.sippysoft.com/solution/categories/107132/folders/176717/articles/107312-account-creation-and-parameters\">XML-RPC API - Account Creation and Parameters</a> and <a href=\"http://support.sippysoft.com/solution/articles/107320-xml-rpc-api-updating-accounts\">XML-RPC API Updating Accounts</a> - VM enable and VM Timeout manipulation.</li><li><a data-pjax=\"#body-container\" href=\"http://support.sippysoft.com/solution/articles/107412-xml-rpc-api-follow-me-feature-management\">XML-RPC API - \"Follow Me\" Feature Management</a> - manipulation of call forwarding timeouts.</li></ul>",
    "description_text": " The Sippy Softswitch has multiple layers of timeouts that are configurable to control the flow and quality of your calls. Timeouts provide multiple benefits to you as a Sippy operator, including quality assurance, the provision of an added layer of logic for routing optimization, and call redirection accommodating user preferences.     Timeouts are imposed on outbound/upstream traffic to ensure the quality of your connections is delivered. Route forwarding occurs within your routing table to attempt to terminate the call through successive Routing Entries in the event that a gateway (Vendor > Connection) cannot be reached for any number of reasons. Adjusting multiple timeouts is possible with Sippy to empower you to configure routing preferences that are better suited to your network characteristics.     Inbound traffic timeouts depict the call flow of the call through your customer's preferred termination points and the total time that the originating caller waits. Inbound timeouts empower the control over Call Forwarding attempts to multiple selections, Voicemail, and a total time for all termination attempts.     Outbound/Upstream traffic timeouts and their order     Outbound traffic is the calls that have originated at your customer's UA or IP that are sent to your Sippy Softswitch for terminating through your destinations. Calls are Authenticated to an Account, billed by the Tariff associated to the Account's Balance, and routed according to the Routing Entries that are configured in your Routing Group. The calls are passed to your Vendor/Supplier for termination.   Reply Timeout, Sec - Configured on Vendor > Connection, the time that Sippy will wait for the 100 reply search. Also known as 100 timeout. The default value is 5 seconds, which is configurable in your Vendor > Connection - Reply Timeout, Sec.  1xx Timeout, sec - The time that Sippy waits for any session progress response from the Vendor > Connection. The default 1xx Timeout is 10 seconds, which is configurable in your Destination Set > Route - the specific route for your prefix.  2xx Timeout, sec - The time that Sippy waits for the call to be answered resulting in a 2xx\u2014Successful Response and the call to begin. The default 2xx Timeout is 60 seconds, which is configurable in your Destination Set > Route - the specific route for your prefix.  Final 2xx Timeout, sec -\u00a0this parameter allows setting the 2xx timeout for the last routing entry in the Routing Entries/Follow Me Entry, by default it's set to 300 seconds, meaning that Sippy will be waiting for 200OK message on the INVITE up to this Final 2xx Timeout. The timeout is applied to the last routing entry in the routing group/last Follow Me Entry only. Since 4.5 version of Sippy on Routing Group preferences the new item has been added:     Note: All three timers (1xx, 2xx, and Final 2xx) are fired just after sending the INVITE to the vendor. E.g. with 2xx timeout = 10 seconds, case the vendor/connection is not able to connect the call (send 200OK message to us) within 10 seconds, we're dropping that vendor/connection from the call flow, and either try another vendor or drop the call. This is applied even if the vendor replied with the first 1xx message at the 9th second of the call.  \u00a0 \u00a0 \u00a0 \u00a0\u00a0  \u00a0 \u00a0 \u00a0 \u00a0 Let's consider that timeouts are set as below:\u00a0  Vendor/connection -->\u00a0Reply timeout (100 Trying timeout) = 5 sec\u00a0  \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Destination set --> Route -->\u00a01xx timeout = 10 sec\u00a0  \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Destination set --> Route -->\u00a02xx timeout = 2 sec\u00a0    Next step, a user makes a call and 100 Trying is delayed for 4 sec.\u00a0  \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0As a result, the call is dropped in 2 sec due to 2xx timeout because all timeouts are fired simultaneously. In our case, the first timeout is 2xx which runs out in 2 sec and it doesn't matter that the system should wait for 100 Trying within 4 sec.\u00a0     \u00a0 \u00a0 \u00a0 \u00a0\u00a05.\u00a0Max Session Time - The total duration of a call that is allowed once setup has been completed and the call has begun. This parameter is configured on each Account under Advanced Parameters. The Max Session Time affects inbound, outbound,\u00a0and On-Net calls alike.\u00a0More information can be found at the linked documents at the foot of this page.     Inbound traffic timeouts and their order   Follow Me timeout - The \"Follow Me\" feature empowers each Account within Sippy to forward calls to another specified CLD after a trying attempt has been made for a configurable timeframe.  VM Timeout, secs - The Voicemail timeout determines the point in time at which the call is directed to an Account's configured Voicemail. NOTE: \"VM Enabled\" checkbox is selected by default on Account creation (4.5) with a \"VM Timeout, secs\" of 30 as a default timeout enabled.  Max Session Time - The total duration of a call that is allowed once setup has been completed and the call has begun. This parameter is configured on each Account under Advanced Parameters. The Max Session Time affects inbound, outbound, and Onnet calls alike and has a default value of 3600 seconds.  Final 2xx Timeout, sec -\u00a0this parameter allows setting the 2xx timeout for the last routing entry in the Routing Entries/Follow Me Entry, by default it's set to 300 seconds, meaning that Sippy will be waiting for 200OK message on the INVITE up to this Final 2xx Timeout. The timeout is applied to the last routing entry in the routing group/last Follow Me Entry only.      Note: More information can be found at the linked documents at the foot of this page.        On-Net calls timeout   On-Net timeout\u00a0- The hardcoded Sippy timeout for Onnet calls is 15 seconds (for 5.0 see below). This affects calls that are made from Account to Account in the Sippy Softswitch with the Timeout initiated when an action is not taken by the receiving Account.      \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 From 5.0 Sippy introduced 3 additional on-net timeouts (that were hard-coded till 5.0) that are configurable for each routing group, namely a:  onnet_timeout_100 \u00a0(default value 5 sec)\nonnet_timeout_1xx \u00a0(default value 10 sec)\nonnet_timeout_2xx \u00a0(default value 60 sec)  \u00a0 \u00a0 \u00a0 \u00a0 \u00a0On the current stage, they can be tuned only by Sippy support team via database directly. The default values can be also changed for the system on a permanent basis.     Hardcoded RFC timeouts   A timeout of 32 seconds is a hard-coded as a default timer compliant to RFC 3261 relating to incomplete transactions or unreliable transports: https://tools.ietf.org/html/rfc3261#page-114  A hardcoded timeout of 300 seconds is employed in the scenario that there is no 200 OK from the last routing entry gateway within 300 seconds. The call is dropped on 487 Request Expired from the Sippy Softswitch.         RTP Timeout     The default value for Sippy's built-in RTP timer is 60 seconds. There are several features regarding the RTP timeout:   It works only in the scenario that media traffic is passing via the server, through Sippy's built-in RTPproxy media proxy.  RTP packets are sent by Sippy without a response from the callee's side.  The duration of the call will be adjusted for 60 seconds (RTP timer value) once the RTP timer is activated.      Troubleshooting and Identifying calls that are affected by timeouts     Most often, a call that has been ended as a result of a timeout will be interrupted by Sippy with a CANCEL SIP message. By capturing a specific Call ID of an affected call and running a SIP Log Viewer within Sippy's Tools, the SIP Log will display a CANCEL after the specified length of time, as can be seen in the following image. The CANCEL was sent by the originating switch, in this case, identifying a timeout of 15 seconds which is an Onnet call timeout.             More documentation/information:   Call Forwarding / Follow Me  Understanding Routing      API application manipulation documentation:   XML-RPC API - Connections Management - manipulation of 100 Reply Timeout.  XML-RPC API - Destination Sets Management - manipulation of 1xx and 2xx Timeouts.  XML-RPC API - Account Creation and Parameters and XML-RPC API Updating Accounts - VM enable and VM Timeout manipulation.  XML-RPC API - \"Follow Me\" Feature Management - manipulation of call forwarding timeouts.  ",
    "seo_data": {
      "meta_title": "",
      "meta_description": "",
      "meta_keywords": ""
    },
    "tags": [
      "Routing"
    ],
    "attachments": [],
    "cloud_files": [],
    "thumbs_up": 0,
    "thumbs_down": 0,
    "hits": 1616,
    "suggested": 0,
    "feedback_count": 0
  },
  {
    "id": 3000051206,
    "type": 1,
    "status": 2,
    "agent_id": 3763909,
    "created_at": "2016-04-05T07:24:47Z",
    "category_id": 81138,
    "folder_id": 133168,
    "title": "Understanding CPS",
    "updated_at": "2020-05-01T17:52:40Z",
    "description": "<p dir=\"ltr\" style=\"line-height: 1.38; text-indent: 0pt; text-align: left;\"><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0);'>Controlling the amount of calls passing through your softswitch is a very important task and in order to ensure that the actual amount of calls that have been routed is equal to the expected amount, you need to understand the mechanism of controlling the CPS rate.</span></p><p dir=\"ltr\" style=\"line-height: 1.38; text-indent: 0pt; text-align: left;\"><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0);'><br></span></p><p dir=\"ltr\" style=\"line-height: 1.38; text-indent: 0pt; text-align: left;\"><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0);'>The task of controlling calls is particularly important to cope with unpredictable spikes of new calls that may arrive at the softswitch. Call spikes should be handled properly to make sure that the least possible number of calls is rejected and that the CPS value is not exceeded. \u00a0</span></p><p dir=\"ltr\" style=\"line-height: 1.38; text-indent: 0pt; text-align: left;\"><span style='font-size: 14.6667px; font-family: Arial, \"Helvetica Neue\", Helvetica, Arial, sans-serif; color: rgb(0, 0, 0); font-weight: 400;'>For example:</span></p><p dir=\"ltr\" style=\"line-height: 1.38; text-indent: 0pt; text-align: left;\"><br></p><p dir=\"ltr\" style=\"line-height: 1.38; text-indent: 0pt; text-align: left;\"><font face=\"Arial, Helvetica Neue, Helvetica, Arial, sans-serif\"><span style=\"font-size: 14.6667px;\">During the time frame of 1 minute 60 calls are received. The initials CPS (Calls per Second) might mislead you to think of CPS in terms of a perfect ratio of seconds to calls of 1:1. \u00a0In actuality, calls do not arrive in perfect ratios of 1:1. \u00a0Consider what happens if 50 calls are received in the first 5 seconds and 10 calls in the last 55.\u00a0</span></font><em><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0);'>Should the softswitch reject 45 out of 50 calls that came in the first 5 seconds?</span></em></p><p dir=\"ltr\" style=\"line-height: 1.38; text-align: left;\"><br></p><p><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0);'>To handle the situation above, our developers created a mechanism called the Token Bucket which dynamically controls the call rate. \u00a0The Token Bucket is full of tokens and the number of tokens in the bucket depends on the CPS value of your softswitch. \u00a0The Token Bucket is constantly, linearly refilled with new tokens to ensure that it is full. \u00a0The Token Bucket capacity is equal to the CPS value of your softswitch multiplied by the cost of the call in tokens and by 60 seconds. \u00a0The Token Bucket cannot hold more tokens than its capacity. Each call has its own cost in tokens. In order to pass the calls, we need to extract the correct amount of tokens out of the bucket. If the amount necessary is not available, the call will be rejected.</span></p><p dir=\"ltr\" style=\"line-height: 1.38;\"><br></p><p dir=\"ltr\" style=\"line-height: 1.38;\"><strong><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0); font-weight: 400;'><strong><font size=\"3\">Here is a simple example:</font></strong></span></strong></p><ul><li dir=\"ltr\" style=\"line-height: 1.38;\"><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline;'>CPS is 1 and the bucket is full</span></li><li dir=\"ltr\" style=\"line-height: 1.38;\"><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0);'>One call costs 100 tokens</span></li><li dir=\"ltr\" style=\"line-height: 1.38;\"><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline;'>Bucket filling speed is CPS * Call cost (100 tokens per second)</span></li><li dir=\"ltr\" style=\"line-height: 1.38;\"><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline;'>Bucket size is CPS * Call cost * 60 seconds (6000 tokens)</span></li></ul><p><br></p><p dir=\"ltr\" style=\"line-height: 1.38;\"><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline;'>Now, going back to the scenario of 50 calls in the first 5 seconds...</span></p><p dir=\"ltr\" style=\"line-height: 1.38;\"><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline;'>If we receive 50 calls in 5 seconds all of them will pass through; however, only 1500 tokens will remain in the bucket (decrease of 5000 tokens on calls and increase of 500 tokens on re-filling flow).</span></p><p dir=\"ltr\" style=\"line-height: 1.38;\"><br></p><p><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0); background-color: transparent;'>If we receive another portion of 55 calls in the next 5 seconds, only 20 of them will pass and the rest of them will be rejected; however, if the portion is smaller (10 calls during next 50 seconds) all of them will pass successfully.</span></p>",
    "description_text": " Controlling the amount of calls passing through your softswitch is a very important task and in order to ensure that the actual amount of calls that have been routed is equal to the expected amount, you need to understand the mechanism of controlling the CPS rate.     The task of controlling calls is particularly important to cope with unpredictable spikes of new calls that may arrive at the softswitch. Call spikes should be handled properly to make sure that the least possible number of calls is rejected and that the CPS value is not exceeded. \u00a0  For example:     During the time frame of 1 minute 60 calls are received. The initials CPS (Calls per Second) might mislead you to think of CPS in terms of a perfect ratio of seconds to calls of 1:1. \u00a0In actuality, calls do not arrive in perfect ratios of 1:1. \u00a0Consider what happens if 50 calls are received in the first 5 seconds and 10 calls in the last 55.\u00a0Should the softswitch reject 45 out of 50 calls that came in the first 5 seconds?     To handle the situation above, our developers created a mechanism called the Token Bucket which dynamically controls the call rate. \u00a0The Token Bucket is full of tokens and the number of tokens in the bucket depends on the CPS value of your softswitch. \u00a0The Token Bucket is constantly, linearly refilled with new tokens to ensure that it is full. \u00a0The Token Bucket capacity is equal to the CPS value of your softswitch multiplied by the cost of the call in tokens and by 60 seconds. \u00a0The Token Bucket cannot hold more tokens than its capacity. Each call has its own cost in tokens. In order to pass the calls, we need to extract the correct amount of tokens out of the bucket. If the amount necessary is not available, the call will be rejected.     Here is a simple example:   CPS is 1 and the bucket is full  One call costs 100 tokens  Bucket filling speed is CPS * Call cost (100 tokens per second)  Bucket size is CPS * Call cost * 60 seconds (6000 tokens)      Now, going back to the scenario of 50 calls in the first 5 seconds...  If we receive 50 calls in 5 seconds all of them will pass through; however, only 1500 tokens will remain in the bucket (decrease of 5000 tokens on calls and increase of 500 tokens on re-filling flow).     If we receive another portion of 55 calls in the next 5 seconds, only 20 of them will pass and the rest of them will be rejected; however, if the portion is smaller (10 calls during next 50 seconds) all of them will pass successfully. ",
    "seo_data": {
      "meta_title": "",
      "meta_description": "",
      "meta_keywords": ""
    },
    "tags": [],
    "attachments": [],
    "cloud_files": [],
    "thumbs_up": 0,
    "thumbs_down": 5,
    "hits": 437,
    "suggested": 0,
    "feedback_count": 0
  },
  {
    "id": 3000080552,
    "type": 1,
    "status": 2,
    "agent_id": 3763909,
    "created_at": "2018-07-31T18:12:43Z",
    "category_id": 81138,
    "folder_id": 133168,
    "title": "Understanding Answer Seizure Ratio (ASR)",
    "updated_at": "2021-06-10T11:10:25Z",
    "description": "<p style=\"text-align: left;\">ASR is the ratio of <u>Successfully Connected Calls</u> to <u>Call Attempts</u>.\u00a0</p><p style=\"text-align: left;\"><br></p><p style=\"text-align: left;\">Usually, shown as a percentage (%), the formula is: \u00a0 <em>Successful (answered) Calls / Calls attempts * 100. \u00a0</em></p><p style=\"text-align: left;\"><br></p><p style=\"text-align: left;\">Where call attempts (\"seizures\") relate to all calls, regardless of success or failure and, \u00a0where Successful (answered) calls are answered by a human or recording machine (such as voicemail).</p><p style=\"text-align: left;\"><br></p><p>The acceptable level (%) of ASR depends on the type of voice traffic you are passing, and your goals in terms of revenue and traffic statistics. \u00a0It is generally understood that carriers with very low ASRs (~20%) have a high volume of calls that fail, and therefore calls that consume infrastructure resources, with no (or very little) revenue. \u00a0 As such, higher ASRs generally equate to higher revenue/margins. \u00a0If you are experiencing low ASR statistics, you will generally see a low ACD (Average Call Duration) - often caused by a high volume of calls from Outbound Call Centers (See below). \u00a0 Your Sippy Softswitch does not typically affect ASR.\u00a0\u00a0</p><p><br></p><p>To understand how you can create and modify routing based on quality (ASR) - please see: <a href=\"https://support.sippysoft.com/support/solutions/articles/77903-quality-based-routing\" rel=\"noreferrer noopener\">Quality Based Routing</a></p><p><br></p><p><strong>Regular National Carriers (Incumbent Carriers)</strong></p><p><br></p><p>Incumbent residential carriers generally have long ACD (Average Call Duration), and high ASR rations (typically around 70%) due to the natural, conversational traffic that occurs on the network and because they have sufficient network resources to place all the calls made. \u00a0 At peak times (such as New Year and other holidays) where customers are attempting to call with higher frequency - the network ASR may temporarily decrease due to lack of network resources - and busy phone lines. \u00a0 National Carriers will also limit interconnections with international wholesale SIP clients that have ASR levels that are too low (usually between ~ 50%-60%)\u00a0</p><p><br></p><p><strong>International SIP carriers</strong></p><p><br></p><p>Wholesale international SIP carriers generally aim for an ASR of roughly 50%, If they are interconnecting with a national carrier, they may seek to have 50%-60%+ to ensure best rates and access. \u00a0 Wholesale carriers need to move high volumes of calls across multiple vendors (routes) at the lowest cost possible. The result is more requests (call attempts) to the vendor network (route) than the vendor is able to process. \u00a0In the previous case, calls will often fail to the next available vendor (Route) or are dropped - thus resulting in lower number of connected calls to call attempts (a lower ASR). \u00a0\u00a0</p><p><br></p><p>Wholesale operators with good (high) ASR rates may \"blend\" some Outbound Call Center traffic with their standard wholesale traffic; this lowers the average ASR, so they will impose strict limits on the volume (CPS) and concurrent capacity (CC) of calls that they accept.</p><p><br></p><p><strong>Outbound Call Centers Solution Providers (carriers)</strong></p><p><br></p><p>Call centers are measured in \"seats\" (number of active agents). \u00a0The goal of a call center is to have an active call for every agent all the time (i.e. no agent should be sitting idle). \u00a0If agents dial the numbers individually, it takes time to place the call and connect with a real human - time that can be automated. \u00a0For optimal efficiency, most large Outbound Call Centers use \"Auto-Dialers\" to place calls. \u00a0 The auto-dialer will continually place calls - non-stop. \u00a0When a call is answered, the dialer plays a message and attempts to connect the \"live\" call with an available agent. Ensuring that there is an answered call for every agent means that the auto-dialer has to make more phone calls than there are agents as it can take 20-30 calls to get an answered call at the same time as the agent is free.\u00a0</p><p><br></p><p>Outbound Call Centers only care about, and pay for, connected calls and will pass all requests to multiple vendors (many of which usually terminate to the same carrier). \u00a0Many of the calls are \"trash\" (wrong or incorrect numbers, poorly formatted phone numbers, etc.), sent at high calls per second (CPS).\u00a0 The result is a low ratio of successfully connected calls to call attempts (ASR Usually &lt;20%). \u00a0</p><p><br></p><p><br></p><p><br></p>",
    "description_text": " ASR is the ratio of Successfully Connected Calls to Call Attempts.\u00a0     Usually, shown as a percentage (%), the formula is: \u00a0 Successful (answered) Calls / Calls attempts * 100. \u00a0     Where call attempts (\"seizures\") relate to all calls, regardless of success or failure and, \u00a0where Successful (answered) calls are answered by a human or recording machine (such as voicemail).     The acceptable level (%) of ASR depends on the type of voice traffic you are passing, and your goals in terms of revenue and traffic statistics. \u00a0It is generally understood that carriers with very low ASRs (~20%) have a high volume of calls that fail, and therefore calls that consume infrastructure resources, with no (or very little) revenue. \u00a0 As such, higher ASRs generally equate to higher revenue/margins. \u00a0If you are experiencing low ASR statistics, you will generally see a low ACD (Average Call Duration) - often caused by a high volume of calls from Outbound Call Centers (See below). \u00a0 Your Sippy Softswitch does not typically affect ASR.\u00a0\u00a0     To understand how you can create and modify routing based on quality (ASR) - please see: Quality Based Routing     Regular National Carriers (Incumbent Carriers)     Incumbent residential carriers generally have long ACD (Average Call Duration), and high ASR rations (typically around 70%) due to the natural, conversational traffic that occurs on the network and because they have sufficient network resources to place all the calls made. \u00a0 At peak times (such as New Year and other holidays) where customers are attempting to call with higher frequency - the network ASR may temporarily decrease due to lack of network resources - and busy phone lines. \u00a0 National Carriers will also limit interconnections with international wholesale SIP clients that have ASR levels that are too low (usually between ~ 50%-60%)\u00a0     International SIP carriers     Wholesale international SIP carriers generally aim for an ASR of roughly 50%, If they are interconnecting with a national carrier, they may seek to have 50%-60%+ to ensure best rates and access. \u00a0 Wholesale carriers need to move high volumes of calls across multiple vendors (routes) at the lowest cost possible. The result is more requests (call attempts) to the vendor network (route) than the vendor is able to process. \u00a0In the previous case, calls will often fail to the next available vendor (Route) or are dropped - thus resulting in lower number of connected calls to call attempts (a lower ASR). \u00a0\u00a0     Wholesale operators with good (high) ASR rates may \"blend\" some Outbound Call Center traffic with their standard wholesale traffic; this lowers the average ASR, so they will impose strict limits on the volume (CPS) and concurrent capacity (CC) of calls that they accept.     Outbound Call Centers Solution Providers (carriers)     Call centers are measured in \"seats\" (number of active agents). \u00a0The goal of a call center is to have an active call for every agent all the time (i.e. no agent should be sitting idle). \u00a0If agents dial the numbers individually, it takes time to place the call and connect with a real human - time that can be automated. \u00a0For optimal efficiency, most large Outbound Call Centers use \"Auto-Dialers\" to place calls. \u00a0 The auto-dialer will continually place calls - non-stop. \u00a0When a call is answered, the dialer plays a message and attempts to connect the \"live\" call with an available agent. Ensuring that there is an answered call for every agent means that the auto-dialer has to make more phone calls than there are agents as it can take 20-30 calls to get an answered call at the same time as the agent is free.\u00a0     Outbound Call Centers only care about, and pay for, connected calls and will pass all requests to multiple vendors (many of which usually terminate to the same carrier). \u00a0Many of the calls are \"trash\" (wrong or incorrect numbers, poorly formatted phone numbers, etc.), sent at high calls per second (CPS).\u00a0 The result is a low ratio of successfully connected calls to call attempts (ASR Usually <20%). \u00a0          ",
    "seo_data": {
      "meta_title": "Understanding ASR",
      "meta_description": "This article explains what Answer Seizure Ratio (ASR) is, and how it affects the network statistics, revenue and more.   Includes details on standard ASR for National Carriers, Wholesale SIP carriers, and Call Centers.",
      "meta_keywords": "ASR, ACD, CPS, Call Centers, Carriers, Wholesale SIP, Wholesale VOIP, answer seizure ratio"
    },
    "tags": [
      "ASR",
      "Answer Seizure Ratio",
      "Blended",
      "ACD",
      "call center",
      "SIP Carriers",
      "Wholesale VOIP Carriers"
    ],
    "attachments": [],
    "cloud_files": [],
    "thumbs_up": 2,
    "thumbs_down": 0,
    "hits": 1075,
    "suggested": 0,
    "feedback_count": 0
  },
  {
    "id": 3000082414,
    "type": 1,
    "status": 2,
    "agent_id": 3763909,
    "created_at": "2018-09-24T20:45:12Z",
    "category_id": 81138,
    "folder_id": 133168,
    "title": "Virtual Environment(s), also referred to as Virtual Partition(s)",
    "updated_at": "2021-06-10T11:10:25Z",
    "description": "<p style=\"\"><strong>Virtual Environment(s), also referred to as Virtual Partition(s)</strong></p><p style=\"\"><br></p><p style=\"\">* NOTE: \u00a0Virtual Environments are only available for purchased and/or rented Sippy Softswitch Licenses</p><p style=\"\"><br></p><p style=\"\">A Virtual Environment (or Partition) is similar to a <a href=\"https://en.wikipedia.org/wiki/Virtual_machine\" title=\"Virtual machine\">virtual machine</a>, \u00a0each Environment having its own set of Administrators, Customers, Vendors, Tariffs, Routes, and Billing Options. \u00a0This makes it a safe way to seperate differenent business offerings without affecting commerical operations. \u00a0For example. seperating Retail Offerings from Wholesale offering, or to provide a virtual softswitch solution to a customer/vendor.\u00a0</p><p style=\"\"><br></p><p style=\"\">Virtualization is valuable to service providers wishing to offer their customers/vendors \u00a0more options, whilst maintaining the exsting operations securely. \u00a0 It is possible to cap the capacity provided on a virtual environment, for example, if you have 2000CC capacity, you may wish to allocate a up to 200CC and maybe 40CPS to the additional environment (the amout you allocate is completely up to you). \u00a0</p><p style=\"\"><br></p><p style=\"\"><strong>Security</strong></p><p style=\"\"><br></p><p style=\"\">As the administrator of the whole switch, you have the ability to access the Virtual Environments at anytime. \u00a0Whereas, the Virtual Envrionment Administrator can ONLY administrate his own environment.</p><p style=\"\">\u00a0</p><p style=\"\"><strong>Scale</strong></p><p style=\"\"><br></p><p style=\"\">You can run multiple virtual environments (virtual environments cannot run virtual environments); \u00a0we recommend a maximum of between 10 - 15 enviorments on a single server (hardware permitting) as each environment does consume hardware resources to operate.\u00a0</p><p style=\"\"><br></p><p style=\"\"><br></p><p style=\"\"><br></p><p style=\"\"><br></p>",
    "description_text": " Virtual Environment(s), also referred to as Virtual Partition(s)     * NOTE: \u00a0Virtual Environments are only available for purchased and/or rented Sippy Softswitch Licenses     A Virtual Environment (or Partition) is similar to a virtual machine, \u00a0each Environment having its own set of Administrators, Customers, Vendors, Tariffs, Routes, and Billing Options. \u00a0This makes it a safe way to seperate differenent business offerings without affecting commerical operations. \u00a0For example. seperating Retail Offerings from Wholesale offering, or to provide a virtual softswitch solution to a customer/vendor.\u00a0     Virtualization is valuable to service providers wishing to offer their customers/vendors \u00a0more options, whilst maintaining the exsting operations securely. \u00a0 It is possible to cap the capacity provided on a virtual environment, for example, if you have 2000CC capacity, you may wish to allocate a up to 200CC and maybe 40CPS to the additional environment (the amout you allocate is completely up to you). \u00a0     Security     As the administrator of the whole switch, you have the ability to access the Virtual Environments at anytime. \u00a0Whereas, the Virtual Envrionment Administrator can ONLY administrate his own environment.  \u00a0  Scale     You can run multiple virtual environments (virtual environments cannot run virtual environments); \u00a0we recommend a maximum of between 10 - 15 enviorments on a single server (hardware permitting) as each environment does consume hardware resources to operate.\u00a0             ",
    "seo_data": {
      "meta_title": "",
      "meta_description": "",
      "meta_keywords": ""
    },
    "tags": [
      "Environment",
      "Virtual Environment",
      "Virtual Partition",
      "Partition",
      "Hosted Partition",
      "Hosted Environment"
    ],
    "attachments": [],
    "cloud_files": [],
    "thumbs_up": 0,
    "thumbs_down": 0,
    "hits": 161,
    "suggested": 0,
    "feedback_count": 0
  },
  {
    "id": 3000086578,
    "type": 1,
    "status": 2,
    "agent_id": 4048869,
    "created_at": "2019-02-21T14:55:46Z",
    "category_id": 81138,
    "folder_id": 133168,
    "title": "Max Session Duration",
    "updated_at": "2020-03-31T17:48:46Z",
    "description": "<p>When providing a service to a wholesale customer an owner of the Sippy Softswitch needs to allow as many simultaneous sessions as possible while at the same time prohibiting the customer to overuse his balance.</p><p><br></p><p>To achieve this goal the Sippy Softswitch starting from <span style=\"color: rgb(0, 0, 0);\"><span style=\"font-family: Verdana;\"><span style=\"line-height: 1.3;\">Sippy 2020</span></span></span><strong>\u00a0</strong>extends the allowed maximum duration of an active call in real time. <strong>The algorithm is changed only for Accounts's balance</strong> and works like this:</p><ul><li>A call comes in. The Sippy tries to allocate money for the first period of time.</li><li>If the balance is sufficient then the call is allowed to connect and continue at least for this first period.</li><li>The call connects and some time before the allocated time is over the Sippy tries to allocate additional period of time to extend the duration of the call.</li><li>If this allocation is successful then the maximum allowed call duration is extended accordingly.</li><li>This re-allocation is repeated until either balance is over or <strong>Max Session Time</strong> of an Account is reached.</li><li>When the next re-allocation is unsuccessful the Sippy does not extend the max call duration anymore and the call is disconnected by <strong>Session Timeout</strong> when it reaches the max call duration which was set previously.</li></ul><p><br></p><p><span style=\"font-size: 18px;\">There are two possible algorithms of the session time allocation.</span></p><ul><li>Average Call Duration (<strong>ACD</strong>) only - every new allocation tries to acquire exactly one more ACD. This algorithm defaults to 5 seconds if ACD is 5 seconds or less.</li><li><strong>Incremental</strong> - the Sippy tries to acquire 10 seconds first and twice as much as previously attempted duration <strong>until it reaches either 200 seconds or ACD, <u>whichever is bigger</u>.\u00a0</strong>Further allocation till Session Timeout is performed according to the tables below</li></ul><p><br></p><p><strong>New allocation attempt is performed 5 seconds before Session Timeout for the call.</strong></p><p><br></p><h2>Example</h2><p>Lets assume that:</p><ul><li>Interval 1 = 10 seconds</li><li>Interval N = 15 seconds</li><li>Price 1 = $6 / minute</li><li>Price N = $4 / minute</li></ul><h3><br></h3><h3><strong>ACD algorithm, ACD = 140 seconds</strong></h3><table style=\"width: 100%;\"><thead><tr><th>Timeline<br></th><th>Try To Allocate<br></th><th><div style=\"text-align: center;\">Actually Allocated Period</div></th><th>Session Timeout<br></th><th>Blocked Balance<br></th></tr></thead><tbody><tr><td style=\"width: 19.9542%;\">Connect + 0 seconds</td><td style=\"width: 19.9542%; text-align: right;\">140 seconds</td><td style=\"width: 19.9542%; text-align: right;\">145 seconds</td><td style=\"width: 19.9542%; text-align: right;\">145 seconds</td><td style=\"width: 20%; text-align: right;\">$1+$9=$10</td></tr><tr><td style=\"width: 19.9542%;\">Connect + 140 seconds</td><td style=\"width: 19.9542%; text-align: right;\">140 seconds</td><td style=\"width: 19.9542%; text-align: right;\">150 seconds</td><td style=\"width: 19.9542%; text-align: right;\">295 seconds</td><td style=\"width: 20%; text-align: right;\">$10+$10=$20</td></tr><tr><td style=\"width: 19.9542%;\">Connect + 290 seconds</td><td style=\"width: 19.9542%; text-align: right;\">140 seconds</td><td style=\"width: 19.9542%; text-align: right;\">150 seconds</td><td style=\"width: 19.9542%; text-align: right;\">445 seconds</td><td style=\"width: 20%; text-align: right;\">$20+$10=$30</td></tr></tbody></table><h3><br></h3><h3>Incremental algorithm for the case when ACD &lt;200 (ACD = 140)</h3><table style=\"width: 100%;\"><thead><tr><th>Timeline<br></th><th>Try To Allocate<br></th><th><div style=\"text-align: center;\">Actually Allocated Period</div></th><th>Session Timeout<br></th><th>Blocked Balance<br></th></tr></thead><tbody><tr><td style=\"width: 20.0000%;\">Connect + 0 seconds<br></td><td style=\"width: 20%; text-align: right;\">10 seconds<br></td><td style=\"width: 20%; text-align: right;\">10 seconds<br></td><td style=\"width: 20%; text-align: right;\">10 seconds<br></td><td style=\"width: 20%; text-align: right;\">$1<br></td></tr><tr><td style=\"width: 20.0000%;\">Connect + 5 seconds<br></td><td style=\"width: 20%; text-align: right;\">20 seconds<br></td><td style=\"width: 20%; text-align: right;\">30 seconds<br></td><td style=\"width: 20%; text-align: right;\">40 seconds<br></td><td style=\"width: 20%; text-align: right;\">$1+$2=$3<br></td></tr><tr><td style=\"width: 20.0000%;\">Connect + 35 seconds<br></td><td style=\"width: 20%; text-align: right;\">40 seconds<br></td><td style=\"width: 20%; text-align: right;\">45 seconds<br></td><td style=\"width: 20%; text-align: right;\">85 seconds<br></td><td style=\"width: 20%; text-align: right;\">$3+$3=$6<br></td></tr><tr><td>Connect + 80 seconds<br></td><td style=\"text-align: right;\">80 seconds<br></td><td style=\"text-align: right;\">90 seconds<br></td><td style=\"text-align: right;\">175 seconds<br></td><td style=\"text-align: right;\">$6+$6=$12<br></td></tr><tr><td>Connect + 170 seconds</td><td style=\"text-align: right;\">160 seconds</td><td style=\"text-align: right;\">165 seconds</td><td style=\"text-align: right;\">340 seconds<br></td><td style=\"text-align: right;\">$12+$11=$23</td></tr><tr><td>Connect + 335 seconds</td><td style=\"text-align: right;\">200 seconds</td><td style=\"text-align: right;\">210 seconds</td><td style=\"text-align: right;\">550 seconds</td><td style=\"text-align: right;\">$23+$14=$37</td></tr><tr><td>Connect + 545 seconds</td><td style=\"text-align: right;\">200 seconds</td><td style=\"text-align: right;\">210 seconds<br></td><td style=\"text-align: right;\">760 seconds</td><td style=\"text-align: right;\">$37+$14=$51</td></tr><tr><td>Connect + 755 seconds</td><td style=\"text-align: right;\">200 seconds</td><td style=\"text-align: right;\">210 seconds</td><td style=\"text-align: right;\">970 seconds</td><td style=\"text-align: right;\">$51+$14=$65</td></tr></tbody></table><p><br></p><h3>Incremental algorithm for the case when ACD &gt;200 (ACD = 230)</h3><table style=\"width: 100%;\"><thead><tr><th>Timeline<br></th><th>Try To Allocate<br></th><th><div style=\"text-align: center;\">Actually Allocated Period</div></th><th>Session Timeout<br></th><th>Blocked Balance<br></th></tr></thead><tbody><tr><td style=\"width: 20.0000%;\">Connect + 0 seconds<br></td><td style=\"width: 20%; text-align: right;\">10 seconds<br></td><td style=\"width: 20%; text-align: right;\">10 seconds<br></td><td style=\"width: 20%; text-align: right;\">10 seconds<br></td><td style=\"width: 20%; text-align: right;\">$1<br></td></tr><tr><td style=\"width: 20.0000%;\">Connect + 5 seconds<br></td><td style=\"width: 20%; text-align: right;\">20 seconds<br></td><td style=\"width: 20%; text-align: right;\">30 seconds<br></td><td style=\"width: 20%; text-align: right;\">40 seconds<br></td><td style=\"width: 20%; text-align: right;\">$1+$2=$3<br></td></tr><tr><td style=\"width: 20.0000%;\">Connect + 35 seconds<br></td><td style=\"width: 20%; text-align: right;\">40 seconds<br></td><td style=\"width: 20%; text-align: right;\">45 seconds<br></td><td style=\"width: 20%; text-align: right;\">85 seconds<br></td><td style=\"width: 20%; text-align: right;\">$3+$3=$6<br></td></tr><tr><td>Connect + 80 seconds<br></td><td style=\"text-align: right;\">80 seconds<br></td><td style=\"text-align: right;\">90 seconds<br></td><td style=\"text-align: right;\">175 seconds<br></td><td style=\"text-align: right;\">$6+$6=$12<br></td></tr><tr><td>Connect + 170 seconds</td><td style=\"text-align: right;\">160 seconds</td><td style=\"text-align: right;\">165 seconds</td><td style=\"text-align: right;\">340 seconds<br></td><td style=\"text-align: right;\">$12+$11=$23</td></tr><tr><td>Connect + 335 seconds</td><td style=\"text-align: right;\">230 seconds</td><td style=\"text-align: right;\">240 seconds</td><td style=\"text-align: right;\">580 seconds</td><td style=\"text-align: right;\">$23+$16=$39</td></tr><tr><td>Connect + 575 seconds</td><td style=\"text-align: right;\">230 seconds</td><td style=\"text-align: right;\">240 seconds<br></td><td style=\"text-align: right;\">820 seconds</td><td style=\"text-align: right;\">$39+$16=$55</td></tr><tr><td>Connect + 815 seconds</td><td style=\"text-align: right;\">230 seconds</td><td style=\"text-align: right;\">240 seconds</td><td style=\"text-align: right;\">1060 seconds</td><td style=\"text-align: right;\">$55+$16=$71</td></tr></tbody></table><p><br></p><p>New strackerd is enabled by default in\u00a0<span style=\"color: rgb(0, 0, 0);\"><span style=\"font-family: Verdana;\"><span style=\"line-height: 1.3;\">Sippy 2020.</span></span></span></p><p><br></p><p>The time allocation algorithm can be chosen with the option 'system/strackerd/next_duration_algorithm' in the system_config. The available values are 'ACD' (default) and \u00a0'incremental'. This option is available via XML-RPC API and on System Parameters page of Web UI.</p>",
    "description_text": " When providing a service to a wholesale customer an owner of the Sippy Softswitch needs to allow as many simultaneous sessions as possible while at the same time prohibiting the customer to overuse his balance.     To achieve this goal the Sippy Softswitch starting from Sippy 2020\u00a0extends the allowed maximum duration of an active call in real time. The algorithm is changed only for Accounts's balance and works like this:   A call comes in. The Sippy tries to allocate money for the first period of time.  If the balance is sufficient then the call is allowed to connect and continue at least for this first period.  The call connects and some time before the allocated time is over the Sippy tries to allocate additional period of time to extend the duration of the call.  If this allocation is successful then the maximum allowed call duration is extended accordingly.  This re-allocation is repeated until either balance is over or Max Session Time of an Account is reached.  When the next re-allocation is unsuccessful the Sippy does not extend the max call duration anymore and the call is disconnected by Session Timeout when it reaches the max call duration which was set previously.      There are two possible algorithms of the session time allocation.   Average Call Duration (ACD) only - every new allocation tries to acquire exactly one more ACD. This algorithm defaults to 5 seconds if ACD is 5 seconds or less.  Incremental - the Sippy tries to acquire 10 seconds first and twice as much as previously attempted duration until it reaches either 200 seconds or ACD, whichever is bigger.\u00a0Further allocation till Session Timeout is performed according to the tables below      New allocation attempt is performed 5 seconds before Session Timeout for the call.     Example  Lets assume that:   Interval 1 = 10 seconds  Interval N = 15 seconds  Price 1 = $6 / minute  Price N = $4 / minute      ACD algorithm, ACD = 140 seconds Timeline Try To Allocate  Actually Allocated Period Session Timeout Blocked Balance  Connect + 0 seconds  140 seconds  145 seconds  145 seconds  $1+$9=$10  Connect + 140 seconds  140 seconds  150 seconds  295 seconds  $10+$10=$20  Connect + 290 seconds  140 seconds  150 seconds  445 seconds  $20+$10=$30     Incremental algorithm for the case when ACD <200 (ACD = 140) Timeline Try To Allocate  Actually Allocated Period Session Timeout Blocked Balance  Connect + 0 seconds   10 seconds   10 seconds   10 seconds   $1   Connect + 5 seconds   20 seconds   30 seconds   40 seconds   $1+$2=$3   Connect + 35 seconds   40 seconds   45 seconds   85 seconds   $3+$3=$6   Connect + 80 seconds   80 seconds   90 seconds   175 seconds   $6+$6=$12   Connect + 170 seconds  160 seconds  165 seconds  340 seconds   $12+$11=$23  Connect + 335 seconds  200 seconds  210 seconds  550 seconds  $23+$14=$37  Connect + 545 seconds  200 seconds  210 seconds   760 seconds  $37+$14=$51  Connect + 755 seconds  200 seconds  210 seconds  970 seconds  $51+$14=$65     Incremental algorithm for the case when ACD >200 (ACD = 230) Timeline Try To Allocate  Actually Allocated Period Session Timeout Blocked Balance  Connect + 0 seconds   10 seconds   10 seconds   10 seconds   $1   Connect + 5 seconds   20 seconds   30 seconds   40 seconds   $1+$2=$3   Connect + 35 seconds   40 seconds   45 seconds   85 seconds   $3+$3=$6   Connect + 80 seconds   80 seconds   90 seconds   175 seconds   $6+$6=$12   Connect + 170 seconds  160 seconds  165 seconds  340 seconds   $12+$11=$23  Connect + 335 seconds  230 seconds  240 seconds  580 seconds  $23+$16=$39  Connect + 575 seconds  230 seconds  240 seconds   820 seconds  $39+$16=$55  Connect + 815 seconds  230 seconds  240 seconds  1060 seconds  $55+$16=$71     New strackerd is enabled by default in\u00a0Sippy 2020.     The time allocation algorithm can be chosen with the option 'system/strackerd/next_duration_algorithm' in the system_config. The available values are 'ACD' (default) and \u00a0'incremental'. This option is available via XML-RPC API and on System Parameters page of Web UI. ",
    "seo_data": {
      "meta_title": "",
      "meta_description": "",
      "meta_keywords": ""
    },
    "tags": [
      "balance",
      "ACD",
      "Billing Intervals",
      "Billing",
      "Max Session Time",
      "Balance Allocation"
    ],
    "attachments": [],
    "cloud_files": [],
    "thumbs_up": 0,
    "thumbs_down": 0,
    "hits": 305,
    "suggested": 0,
    "feedback_count": 0
  },
  {
    "id": 3000093931,
    "type": 1,
    "status": 2,
    "agent_id": 3763909,
    "created_at": "2019-11-04T16:10:01Z",
    "category_id": 81138,
    "folder_id": 133168,
    "title": "System \"cache\"",
    "updated_at": "2021-06-10T11:10:26Z",
    "description": "<h2 style=\"text-align: justify;\">General information</h2><p style=\"text-align: justify;\">Any changes related to <strong>R</strong><strong>ates</strong>, <strong>Routes</strong>, <strong>Destination Sets</strong>, <strong>Tariffs</strong>, <strong>DID numbers</strong>, <strong>DID Charging Groups</strong> and <strong>Routing Groups</strong> may not be applied immediately. You need to wait at least for 1 min so that the system can update its internal \"cache\". Sometimes, in case of a heavy bulk update of, for example, multiple destination sets at once, it may be required more than 1 min.</p><p style=\"text-align: justify;\"><br></p><h2 style=\"text-align: justify;\">Goal</h2><p style=\"text-align: justify;\">This internal \"cache\" was designed specifically in order to increase system performance. Roughly saying, the system loses some performance (speed) while updating the authentication/routing data (made by a human) and spends some time on writing the newly updated data into the \"cache\". However when a real call comes, it does not spend any time on querying the DB and filtering the results. Instead, the system already has this data in \"cache\" which greatly decreases the time during the authentication/authorization/routing of every new call.</p><p style=\"text-align: justify;\"><br></p><h2 style=\"text-align: justify;\">Workflow</h2><p style=\"text-align: justify;\">The update \"cache\" job is run every minute. Thus, in case of a minor change, you may expect the new changes to be applied within 1 min. When a multiple entities are updated (e.g. a bulk update of 10 tariffs with 65535 rates each using binary upload), these entities are put into a queue and processed one-by-one. As a result, it could take more than 1 min to update the \"cache\" and depends how powerful is your bare metal server (i.e. CPU, HDD etc).</p><p><br></p><h2>How do I know whether my recent changes are already in the \"cache\" or not ?</h2><p>There is a tool called <strong>Test Dial Plan</strong> which uses system's \"cache\". If your recent changes didn't reflect the result of Test Dial Plan, it means that the cache is still about to be updated.</p><p><br></p><p>After adding the prefix <strong>1786</strong> in account's tariff:</p><p><br></p><p><img src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3048490328/original/KkkTXmbclzGUioMyrV0DXOTOIZPOqmEeYQ.png?1572883705\" style=\"width: auto;\" class=\"fr-fic fr-fil fr-dib fr-bordered fr-shadow\" data-attachment=\"[object Object]\" data-id=\"3048490328\"></p><p><br></p><p>After waiting for <strong>1 min</strong> and update of system \"cache\":</p><p><br></p><p><img src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3048490331/original/jMCKMhoky9srZEKUfBxv3vtM1PVUgeHvuQ.png?1572883719\" style=\"width: auto;\" class=\"fr-fic fr-fil fr-dib fr-bordered fr-shadow\" data-attachment=\"[object Object]\" data-id=\"3048490331\"></p>",
    "description_text": " General information  Any changes related to Rates, Routes, Destination Sets, Tariffs, DID numbers, DID Charging Groups and Routing Groups may not be applied immediately. You need to wait at least for 1 min so that the system can update its internal \"cache\". Sometimes, in case of a heavy bulk update of, for example, multiple destination sets at once, it may be required more than 1 min.     Goal  This internal \"cache\" was designed specifically in order to increase system performance. Roughly saying, the system loses some performance (speed) while updating the authentication/routing data (made by a human) and spends some time on writing the newly updated data into the \"cache\". However when a real call comes, it does not spend any time on querying the DB and filtering the results. Instead, the system already has this data in \"cache\" which greatly decreases the time during the authentication/authorization/routing of every new call.     Workflow  The update \"cache\" job is run every minute. Thus, in case of a minor change, you may expect the new changes to be applied within 1 min. When a multiple entities are updated (e.g. a bulk update of 10 tariffs with 65535 rates each using binary upload), these entities are put into a queue and processed one-by-one. As a result, it could take more than 1 min to update the \"cache\" and depends how powerful is your bare metal server (i.e. CPU, HDD etc).     How do I know whether my recent changes are already in the \"cache\" or not ?  There is a tool called Test Dial Plan which uses system's \"cache\". If your recent changes didn't reflect the result of Test Dial Plan, it means that the cache is still about to be updated.     After adding the prefix 1786 in account's tariff:          After waiting for 1 min and update of system \"cache\":      ",
    "seo_data": {
      "meta_title": "",
      "meta_description": ""
    },
    "tags": [],
    "attachments": [],
    "cloud_files": [],
    "thumbs_up": 1,
    "thumbs_down": 0,
    "hits": 152,
    "suggested": 0,
    "feedback_count": 0
  },
  {
    "id": 3000094513,
    "type": 1,
    "status": 2,
    "agent_id": 3763909,
    "created_at": "2019-11-27T12:59:49Z",
    "category_id": 81138,
    "folder_id": 133168,
    "title": "System parameters",
    "updated_at": "2021-06-10T11:10:26Z",
    "description": "<h2>Overview</h2><p><br></p><p>The System Parameters page includes all options that can be selected for each particular sub-environment. \u00a0Note that individual sub-environments which might exist inside the \"main\" environment cannot be affected by changes in other sub-environments as each environment has its own separate \"System Parameters\" page. \u00a0</p><p><br></p><h2>Branding</h2><p><br></p><p>The section includes options for customization of the login page of your Sippy Softswitch. <a href=\"https://support.sippysoft.com/a/solutions/articles/157555\" rel=\"noopener noreferrer\" target=\"_blank\">More info...</a></p><p><br></p><p><img src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3049120176/original/vDTKrO6q9Va5idmBJgHrGVHRzkLuLw3VVw.png?1574858651\" style=\"width: auto;\" class=\"fr-fic fr-fil fr-dib fr-bordered\" data-attachment=\"[object Object]\" data-id=\"3049120176\"></p><p><br></p><h2>Backup</h2><p><br></p><p>This section is related to an automatic backup of your environment. <a href=\"https://support.sippysoft.com/a/solutions/articles/77882\" rel=\"noopener noreferrer\" target=\"_blank\">More info...</a></p><p><br></p><p><img src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3049120370/original/Mxfv3YVPR-_EqQKJKkVUtxUTDk9qbQluYA.png?1574858961\" style=\"width: auto;\" class=\"fr-fic fr-fil fr-dib fr-bordered\" data-attachment=\"[object Object]\" data-id=\"3049120370\"></p><p><br></p><h2>Data Retention</h2><p><br></p><p style=\"text-align: justify;\">This section includes options to setup the automatic cleanup of your database and the internal storage of your server:</p><p style=\"text-align: justify;\"><br></p><p style=\"text-align: justify;\"><img src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3049120515/original/kIOmOZEGJbWejb9_VAJleuLVAaIMAAXWDw.png?1574859162\" style=\"width: auto;\" class=\"fr-fic fr-fil fr-dib fr-bordered\" data-attachment=\"[object Object]\" data-id=\"3049120515\"></p><p><br></p><p style=\"text-align: justify;\">In other words, it controls how long your data (CDRs, expired Rates/Routes) is kept in the database; when it's moved to archives and how long it is to be kept in archived state in the storage of your bare metal server. <a href=\"https://support.sippysoft.com/a/solutions/articles/3000086536\" rel=\"noopener noreferrer\" target=\"_blank\">More info...</a></p><p style=\"text-align: justify;\"><br></p><p style=\"text-align: justify;\"><strong>Starting from 2020</strong> version a new option was added - <strong>Purge Old Invoices in</strong>: <span style='color: rgb(24, 50, 71); font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;  text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;'>it determines the period of time when the Invoice entities should be removed from database. The default value for this parameter is <strong>1</strong></span><strong data-identifyelement=\"228\" style='box-sizing: border-box; font-weight: 700; color: rgb(24, 50, 71); font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;  text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;'>\u00a0year</strong><span style='color: rgb(24, 50, 71); font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;  text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;'>.</span>\u00a0</p><p><br></p><h2>Billing</h2><p><br></p><p>This section includes following parameters:</p><ul><li><strong>On-Net Calls Duration:</strong> duration rounding policy for On-Net calls.</li></ul><p><strong>Round</strong>: system applies default arithmetical round. <u>5.2 sec</u> will become<strong>\u00a0</strong><u>5 sec</u>; <u>5.5 sec</u> will become <u>6 sec</u>.</p><p><strong>Round-Up</strong>: always rounds to a higher integer value. <u>5.2 sec</u> will become<strong>\u00a0</strong><u>6 sec</u>; <u>5.5 sec</u> will become <u>6 sec</u><strong>\u00a0</strong>as well.</p><p><br></p><p><strong>Starting from 2020</strong> version following options were added:</p><ul><li><strong>Balance Allocation Alg.:\u00a0</strong>Algorithm to define the session time for the calls so that balance is allocated more precise.</li><li><strong>Tariffs Cost Precision:</strong> cost decimal precision default values used upon creation of new Tariff. Default is 20</li><li><strong>Vendors Cost Precision:\u00a0</strong>cost decimal precision default values used upon creation of new Vendor. Default is 20</li></ul><p><br></p><h2>SIP</h2><p><br></p><p>This section includes options related to SIP protocol:</p><ul><li style=\"text-align: justify;\"><strong>Realm</strong>: a realm to be sent to the remote party during <a href=\"https://support.sippysoft.com/a/solutions/articles/77553\" rel=\"noopener noreferrer\" target=\"_blank\">Digest Authorization</a></li><li style=\"text-align: justify;\"><strong>User Agent</strong>: the value to be put into the <u>User-Agent</u> header while sending a SIP request to any remote server, gateway, or equipment of your vendor or customer. Default value is \"Sippy Softswitch ${SS_VER}\" where the \"${SS_VER}\" part is replaced with for example\"v5.2-PRODUCTION.253\" (taken from System Information page)</li><li style=\"text-align: justify;\"><strong>Default Media Relay</strong>: default Media Relay to be chosen during creation of any entity which has this option. It could be either a Built-in Proxy or remote <a href=\"https://support.sippysoft.com/a/solutions/articles/3000045763\" rel=\"noopener noreferrer\" target=\"_blank\">SMG server</a>. For example, by adding a new Vendor Connection the system will choose the corresponding \"Preferred Media Relay\"</li><li style=\"text-align: justify;\"><strong>H.323 Converter</strong>: H.323 to SIP converter (and visa versa). \"Yate\" is considered as more stable and reliable as of &lt;=5.2 version of Sippy. <strong>Deprecated in &gt;=2020 version along with deprecation of h323 support.</strong></li><li style=\"text-align: justify;\"><strong>LRN Server Address</strong>: the IP address of your provider's LRN server</li><li style=\"text-align: justify;\"><strong>LRN Request Timeout\u00a0</strong>(seconds): the time the system must wait to receive an answer from the LRN server, before routing the call using CLD.</li><li style=\"text-align: justify;\"><strong>Enabled LRN Cache</strong>: the system is able to keep LRN data for every number separately in order to avoid querying the LRN server every time when it needs the information. The LRN Cache functionality is particularly beneficial to you in cases where the LRN provider updates LRN data only once per week as there will not be a need to frequently request the LRN data - this can save you money in LRN requests. \u00a0</li><li style=\"text-align: justify;\"><strong>LRN Cache Expires in</strong>: determines how long to keep LRN data in cache. <a href=\"https://support.sippysoft.com/a/solutions/articles/3000015642\" rel=\"noopener noreferrer\" target=\"_blank\">More info...</a></li><li><strong>Anonymous in Contact:</strong> whether to send Anonymous in Display Name of Contact header to the outgoing leg (usually Vendor). <strong>Available starting from 2020 version.</strong></li></ul><p><br></p><h2>SMTP Server</h2><p><br></p><p style=\"text-align: justify;\">Settings that control the system's emailing functions such as a \"Forgot Password\" request or a system alert (e.g. Low Disk Space)</p><ul><li><strong>Server Address / Port</strong>: requires an IP address and a port if you use your own SMTP server. The Default value is \"localhost\" - this means the system is set to use the internal built-in mail agent</li><li><strong>Connection mode</strong>: type of encryption</li><li><strong>Username / Password</strong>: credentials for the connection (if needed)</li></ul><p><br></p><p>The <strong>\"Test\" button</strong> enables sending a test message to any email recipient</p><p><br></p><h2>Web Interface</h2><p><br></p><p style=\"text-align: justify;\">A batch of options to configure your Web-interface. Some of the options are internal options of the Apache web server so we do not recommend changing them unless you're very familiar with the possible consequences.</p><p style=\"text-align: justify;\"><br></p><ul><li style=\"text-align: justify;\"><strong>Web Address</strong>: the IP address or domain name of your Web-interface</li><li style=\"text-align: justify;\"><strong>Generate SSL Certificate</strong>: a checkbox that controls whether to generate a trusted certificate signed by Let's Encrypt. <a href=\"https://support.sippysoft.com/a/solutions/articles/3000070011\" rel=\"noopener noreferrer\" target=\"_blank\">More info...</a></li><li style=\"text-align: justify;\"><strong>Certificate / Key</strong>: options for importing your own certificate signed by any provider (e.g. GoDaddy). <a href=\"https://support.sippysoft.com/a/solutions/articles/78262\" rel=\"noopener noreferrer\" target=\"_blank\">More info...</a></li><li style=\"text-align: justify;\"><strong>Display Precision</strong>: all prices in the system are represented as numbers with a floating point. This option controls how many digits to display after the floating point on the Web-interface. Note that the database keeps all prices in raw format with maximum precision. The \"Display Precision\" option only controls how to represent them on the Web<br><br>An example with Display Precision = 6:<br><img src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3049154409/original/5Job8e1FRIfLVKT_4RJPdDxZxC5I4tzEUQ.png?1574940038\" style=\"width: auto;\" class=\"fr-fic fr-fil fr-dib fr-bordered\" data-attachment=\"[object Object]\" data-id=\"3049154409\"><br>Here is how it looks in the DB:<br><img src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3049154481/original/pnEoUIxkCuI4SJHxZ0CCSSMHvEoNzanz8Q.png?1574940144\" style=\"width: auto;\" class=\"fr-fic fr-fil fr-dib\" data-attachment=\"[object Object]\" data-id=\"3049154481\"><br></li><li style=\"text-align: justify;\"><strong>Default Login Page</strong>: an option to choose the default type of Web portal to log into:<br><br><strong>\"All\"</strong> allows the display of a drop-down menu and permits choice of login on the Login page:<br><br><img src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3049150794/original/z50XDS5e5kYGz6qq30nJ3o9puTnTWicaVw.png?1574934638\" style=\"width: auto;\" class=\"fr-fic fr-dib fr-bordered\" data-attachment=\"[object Object]\" data-id=\"3049150794\"><br><strong>\"Customer\"</strong> sets Customer portal as the default type and hides the drop-down menu:<br><br><img src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3049150880/original/lwToYo2Q3hUu-JhizS4rneI77XLW2QWRzw.png?1574934851\" style=\"width: auto;\" class=\"fr-fic fr-dib fr-bordered\" data-attachment=\"[object Object]\" data-id=\"3049150880\"><br>As a result, a user must enter credentials as either the \"root\" customer (ssp-root) or as any other user registered in the system as a <u>Web User</u> or a <u>Customer</u>. If there is a need to log into either Account or Vendor portals, you need to change the address link respectively:<br><a href=\"https://test01.sippysoft.com/account.php\">https://&lt;IP_of_your_switch&gt;/account.php</a><br><a href=\"https://test01.sippysoft.com/account.php\">https://&lt;IP_of_your_switch&gt;/vendor.php</a><br><br>The same logic is applied for the <strong>\"Account\"</strong> and <strong>\"Vendor\"</strong> values of the \"Default Login Page\" option.<br><br></li><li><strong>Maintenance message:</strong> message displayed to web users when accessing the server case Maintenance Mode is set to anything but Off</li><li><strong>MFA - </strong>Multi Factored Authentication method applicable to all web users in Environment. <strong>Available starting from 2020 version.\u00a0</strong><a href=\"https://support.sippysoft.com/a/solutions/articles/3000092540\"></a><a href=\"https://support.sippysoft.com/a/solutions/articles/3000092540\">More info...</a></li><li style=\"text-align: justify;\"><strong>Total Servers Limit</strong>: an option of Apache web server which sets the total server (connections) limit. \u00a0The limit is shared between all your Environments. The option is available only in the first (or main) Environment</li><li style=\"text-align: justify;\"><strong>Session Timeout</strong>: a time limit for the system to wait before a web user is logged out automatically. For instance, setting \"30 minutes\" means that if there is no activity by a particular user within 30 minutes, the system closes the web session for the inactive user. As a result, a user has to log into the Web-interface using his credentials again</li><li style=\"text-align: justify;\"><strong>Default Start Date</strong>: the first specified time to be associated with the data to be displayed by any report. By default, all Web reports fetch statistics for 1 hour.</li><li style=\"text-align: justify;\"><strong>Maintenance Mode\u00a0</strong>- a feature that restricts access to web reports. You may find it in \"System Parameters\":<ul><li style=\"text-align: justify;\">if \"CDRs update\" is selected, the system blocks reports for all users except \"remote-assistance\" and \"ssp-root\" user. This option doesn't influence call processing and CDRs storing. Just restricts CDRs web management.</li><li style=\"text-align: justify;\">if \"System Update\" is selected, the system blocks web for all users except \"ssp-root\" user with a message that you may specify in a \"System Parameters\" menu:</li></ul></li></ul><p><img src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3058076609/original/nog2j-j45OkBuhiByTn4gGPUWjaEm01wLA.png?1603725316\" style=\"width: auto;\" class=\"fr-fic fr-fil fr-dib\" data-attachment=\"[object Object]\" data-id=\"3058076609\"></p><p style=\"text-align: justify;\"><br></p><h2 style=\"text-align: justify;\">Remote Assistance</h2><p style=\"text-align: justify;\"><br></p><p style=\"text-align: justify;\"><strong>Enabled</strong>: a checkbox that signals your choice of whether to enable or disable \"remote-assistance\" for the Environment. The \"remote-assistance\" user is a special user that doesn't have a password; instead, it uses a special pre-shared key to log into your Web. If the \"remote-assistance\" user is disabled, we (Sippy support) will not be able to log into your Web-interface. It is recommended to keep the \"remote-assistance\" user enabled because Web access is something that Sippy support \u00a0normally uses for troubleshooting purposes.</p><p style=\"text-align: justify;\"><br></p><p><br></p><p><br></p><p><br></p><p><br></p>",
    "description_text": " Overview     The System Parameters page includes all options that can be selected for each particular sub-environment. \u00a0Note that individual sub-environments which might exist inside the \"main\" environment cannot be affected by changes in other sub-environments as each environment has its own separate \"System Parameters\" page. \u00a0     Branding     The section includes options for customization of the login page of your Sippy Softswitch. More info...          Backup     This section is related to an automatic backup of your environment. More info...          Data Retention     This section includes options to setup the automatic cleanup of your database and the internal storage of your server:          In other words, it controls how long your data (CDRs, expired Rates/Routes) is kept in the database; when it's moved to archives and how long it is to be kept in archived state in the storage of your bare metal server. More info...     Starting from 2020 version a new option was added - Purge Old Invoices in: it determines the period of time when the Invoice entities should be removed from database. The default value for this parameter is 1\u00a0year.\u00a0     Billing     This section includes following parameters:   On-Net Calls Duration: duration rounding policy for On-Net calls.   Round: system applies default arithmetical round. 5.2 sec will become\u00a05 sec; 5.5 sec will become 6 sec.  Round-Up: always rounds to a higher integer value. 5.2 sec will become\u00a06 sec; 5.5 sec will become 6 sec\u00a0as well.     Starting from 2020 version following options were added:   Balance Allocation Alg.:\u00a0Algorithm to define the session time for the calls so that balance is allocated more precise.  Tariffs Cost Precision: cost decimal precision default values used upon creation of new Tariff. Default is 20  Vendors Cost Precision:\u00a0cost decimal precision default values used upon creation of new Vendor. Default is 20      SIP     This section includes options related to SIP protocol:   Realm: a realm to be sent to the remote party during Digest Authorization  User Agent: the value to be put into the User-Agent header while sending a SIP request to any remote server, gateway, or equipment of your vendor or customer. Default value is \"Sippy Softswitch ${SS_VER}\" where the \"${SS_VER}\" part is replaced with for example\"v5.2-PRODUCTION.253\" (taken from System Information page)  Default Media Relay: default Media Relay to be chosen during creation of any entity which has this option. It could be either a Built-in Proxy or remote SMG server. For example, by adding a new Vendor Connection the system will choose the corresponding \"Preferred Media Relay\"  H.323 Converter: H.323 to SIP converter (and visa versa). \"Yate\" is considered as more stable and reliable as of <=5.2 version of Sippy. Deprecated in >=2020 version along with deprecation of h323 support.  LRN Server Address: the IP address of your provider's LRN server  LRN Request Timeout\u00a0(seconds): the time the system must wait to receive an answer from the LRN server, before routing the call using CLD.  Enabled LRN Cache: the system is able to keep LRN data for every number separately in order to avoid querying the LRN server every time when it needs the information. The LRN Cache functionality is particularly beneficial to you in cases where the LRN provider updates LRN data only once per week as there will not be a need to frequently request the LRN data - this can save you money in LRN requests. \u00a0  LRN Cache Expires in: determines how long to keep LRN data in cache. More info...  Anonymous in Contact: whether to send Anonymous in Display Name of Contact header to the outgoing leg (usually Vendor). Available starting from 2020 version.      SMTP Server     Settings that control the system's emailing functions such as a \"Forgot Password\" request or a system alert (e.g. Low Disk Space)   Server Address / Port: requires an IP address and a port if you use your own SMTP server. The Default value is \"localhost\" - this means the system is set to use the internal built-in mail agent  Connection mode: type of encryption  Username / Password: credentials for the connection (if needed)      The \"Test\" button enables sending a test message to any email recipient     Web Interface     A batch of options to configure your Web-interface. Some of the options are internal options of the Apache web server so we do not recommend changing them unless you're very familiar with the possible consequences.      Web Address: the IP address or domain name of your Web-interface  Generate SSL Certificate: a checkbox that controls whether to generate a trusted certificate signed by Let's Encrypt. More info...  Certificate / Key: options for importing your own certificate signed by any provider (e.g. GoDaddy). More info...  Display Precision: all prices in the system are represented as numbers with a floating point. This option controls how many digits to display after the floating point on the Web-interface. Note that the database keeps all prices in raw format with maximum precision. The \"Display Precision\" option only controls how to represent them on the Web  An example with Display Precision = 6:  Here is how it looks in the DB:    Default Login Page: an option to choose the default type of Web portal to log into:  \"All\" allows the display of a drop-down menu and permits choice of login on the Login page:   \"Customer\" sets Customer portal as the default type and hides the drop-down menu:   As a result, a user must enter credentials as either the \"root\" customer (ssp-root) or as any other user registered in the system as a Web User or a Customer. If there is a need to log into either Account or Vendor portals, you need to change the address link respectively: https://<IP_of_your_switch>/account.php https://<IP_of_your_switch>/vendor.php  The same logic is applied for the \"Account\" and \"Vendor\" values of the \"Default Login Page\" option.    Maintenance message: message displayed to web users when accessing the server case Maintenance Mode is set to anything but Off  MFA - Multi Factored Authentication method applicable to all web users in Environment. Available starting from 2020 version.\u00a0More info...  Total Servers Limit: an option of Apache web server which sets the total server (connections) limit. \u00a0The limit is shared between all your Environments. The option is available only in the first (or main) Environment  Session Timeout: a time limit for the system to wait before a web user is logged out automatically. For instance, setting \"30 minutes\" means that if there is no activity by a particular user within 30 minutes, the system closes the web session for the inactive user. As a result, a user has to log into the Web-interface using his credentials again  Default Start Date: the first specified time to be associated with the data to be displayed by any report. By default, all Web reports fetch statistics for 1 hour.  Maintenance Mode\u00a0- a feature that restricts access to web reports. You may find it in \"System Parameters\":  if \"CDRs update\" is selected, the system blocks reports for all users except \"remote-assistance\" and \"ssp-root\" user. This option doesn't influence call processing and CDRs storing. Just restricts CDRs web management.  if \"System Update\" is selected, the system blocks web for all users except \"ssp-root\" user with a message that you may specify in a \"System Parameters\" menu:          Remote Assistance     Enabled: a checkbox that signals your choice of whether to enable or disable \"remote-assistance\" for the Environment. The \"remote-assistance\" user is a special user that doesn't have a password; instead, it uses a special pre-shared key to log into your Web. If the \"remote-assistance\" user is disabled, we (Sippy support) will not be able to log into your Web-interface. It is recommended to keep the \"remote-assistance\" user enabled because Web access is something that Sippy support \u00a0normally uses for troubleshooting purposes.                ",
    "seo_data": {
      "meta_title": "",
      "meta_description": ""
    },
    "tags": [],
    "attachments": [],
    "cloud_files": [],
    "thumbs_up": 0,
    "thumbs_down": 0,
    "hits": 211,
    "suggested": 0,
    "feedback_count": 0
  },
  {
    "id": 3000095071,
    "type": 1,
    "status": 2,
    "agent_id": 3763909,
    "created_at": "2019-12-05T15:27:27Z",
    "category_id": 81138,
    "folder_id": 133168,
    "title": "Network Traffic Capture",
    "updated_at": "2021-06-10T11:10:26Z",
    "description": "<h2><span style=\"color: rgb(0, 0, 0);\">Overview</span></h2><p style=\"text-align: justify;\"><span style=\"color: rgb(0, 0, 0);\"><br></span></p><p style=\"text-align: justify;\"><span style=\"color: rgb(0, 0, 0);\">Sometimes it can be difficult to determine the reason for a call failure even after having a SIP diagram extracted. An Admin user usually collects a TCP dump of a call while trying to reproduce the issue; in such a case, the Admin user should have access to the CLI (Command Line Interface) of the bare metal server where the Sippy softswitch is running. \u00a0It is possible to use an external tool/device which shares the same network with the Softswitch; when this is so, that could itself create a barrier in the investigation process.</span></p><p style=\"text-align: justify;\"><span style=\"color: rgb(0, 0, 0);\"><br></span></p><p style=\"text-align: justify;\"><span style=\"color: rgb(0, 0, 0);\">The Sippy softswitch provides a Web-interface tool with basic parameters which helps to collect a PCAP trace and forward it to an email address as an attachment.\u00a0 The tool is available at System Management --&gt; Tools --&gt; Network Traffic Capture.</span></p><p><span style=\"color: rgb(0, 0, 0);\"><br></span></p><h2><span style=\"color: rgb(0, 0, 0);\">Description</span></h2><p><span style=\"color: rgb(0, 0, 0);\"><br></span></p><p style=\"text-align: justify;\"><span style=\"color: rgb(0, 0, 0);\">The top of the page contains the options that should be filled in:</span></p><p style=\"text-align: justify;\"><span style=\"color: rgb(0, 0, 0);\"><br></span></p><p style=\"text-align: justify;\"><span style=\"color: rgb(0, 0, 0);\"><span style='box-sizing: border-box; word-break: break-word; overflow-wrap: break-word; font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif; font-size: 13px; font-weight: 400; text-align: start; text-indent: 0px;'><strong style=\"box-sizing: border-box; font-weight: 700;\">Target Hosts</strong> -</span><span style='font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif; font-size: 13px; font-weight: 400; text-align: start; text-indent: 0px;'>\u00a0contains the list of IP addresses that are going to be monitored. In the example below, the Traffic Capture will be gathering all packets coming <u>from</u> and <u>to</u> those five IP addresses.</span></span></p><p style=\"text-align: justify;\"><span style=\"color: rgb(0, 0, 0);\"><br></span></p><p style=\"text-align: justify;\"><span style=\"color: rgb(0, 0, 0);\"><img src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3049350498/original/arGQIDL3nKFZiQ8XI7jaFXPfqAD0k_rg4g.png?1575558726\" style=\"width: auto;\" class=\"fr-fic fr-fil fr-dib fr-bordered\" data-attachment=\"[object Object]\" data-id=\"3049350498\"></span></p><p style=\"text-align: justify;\"><span style=\"color: rgb(0, 0, 0);\"><br></span></p><p style=\"text-align: justify;\"><span style=\"color: rgb(0, 0, 0);\"><span style='font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif; font-size: 13px; font-weight: 400; text-align: start; text-indent: 0px;'>The IP addresses can be separated by \"new line\", by \"comma\" or even by \"comma + space\".</span></span></p><p style=\"text-align: justify;\"><span style=\"color: rgb(0, 0, 0);\"><br></span></p><p style=\"text-align: justify;\"><span style=\"color: rgb(0, 0, 0);\"><strong>Interface</strong> - an option to set the network interface and source IP address for TCP Dump to run at. There will be more than one option to choose if you have at least two IP address assigned to your Environment.</span></p><p style=\"text-align: justify;\"><span style=\"color: rgb(0, 0, 0);\"><br></span></p><p style=\"text-align: justify;\"><span style=\"color: rgb(0, 0, 0);\"><strong>Duration, min</strong> - how long the Traffic Capture will run.</span></p><p style=\"text-align: justify;\"><span style=\"color: rgb(0, 0, 0);\"><strong>E-mail</strong> - an email address to send the collected PCAP file in the end. Several recipients are supported and should be separated by \"comma\".</span></p><p><span style=\"color: rgb(0, 0, 0);\"><br></span></p><p><span style=\"color: rgb(0, 0, 0);\">Once all parameters are set, press the \"Add\" button to include the task into the queue:</span></p><p><span style=\"color: rgb(0, 0, 0);\"><br></span></p><p><span style=\"color: rgb(0, 0, 0);\"><img src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3049349994/original/8mnh2HFNODfYj_zFU2fq6MeiwKjJxpiJCw.png?1575557758\" style=\"width: auto;\" class=\"fr-fic fr-fil fr-dib fr-bordered\" data-attachment=\"[object Object]\" data-id=\"3049349994\"></span></p><p><span style=\"color: rgb(0, 0, 0);\"><br></span></p><p><span style=\"color: rgb(0, 0, 0);\">In a minute, the system will start gathering the traffic and your task will change its status to \"In Progress\", which means Traffic Dump has started capturing packets on selected interface and IP address. If the test call is to be examined, it's the best time to start it.</span><span style=\"color: rgb(0, 0, 0);\"><br></span></p><p><span style=\"color: rgb(0, 0, 0);\"><img src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3049350028/original/f9W2pIbsg333y-FlA2JsJMrzsitM0rTUmg.png?1575557823\" style=\"width: auto;\" class=\"fr-fic fr-fil fr-dib fr-bordered\" data-attachment=\"[object Object]\" data-id=\"3049350028\"></span></p><p><br></p><p style=\"text-align: justify;\"><span style=\"color: rgb(0, 0, 0);\">Finally, when the dump is completed, the icon to download the trace will appear:</span></p><p style=\"text-align: justify;\"><span style=\"color: rgb(0, 0, 0);\"><img src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3049350293/original/Q0dRXnQxDU8ycBzYjPn9JpXWXUHG2oDqdA.png?1575558268\" style=\"width: auto;\" class=\"fr-fic fr-fil fr-dib fr-bordered\" data-attachment=\"[object Object]\" data-id=\"3049350293\"></span></p><p style=\"text-align: justify;\"><span style=\"color: rgb(0, 0, 0);\"><br></span></p><p style=\"text-align: justify;\"><span style=\"color: rgb(0, 0, 0);\">Note that traffic dumps are kept in the list for 48 hours. Thus, please make sure you downloaded a copy of the trace in order not to lose it in 2 days.</span></p><p><span style=\"color: rgb(0, 0, 0);\">And its max size is the following:<br></span></p><pre><code>MAXIMUM_DUMP_SIZE = 256 \u00a0 \u00a0 \u00a0 \u00a0 # megabytes</code></pre><p><br></p>",
    "description_text": " Overview     Sometimes it can be difficult to determine the reason for a call failure even after having a SIP diagram extracted. An Admin user usually collects a TCP dump of a call while trying to reproduce the issue; in such a case, the Admin user should have access to the CLI (Command Line Interface) of the bare metal server where the Sippy softswitch is running. \u00a0It is possible to use an external tool/device which shares the same network with the Softswitch; when this is so, that could itself create a barrier in the investigation process.     The Sippy softswitch provides a Web-interface tool with basic parameters which helps to collect a PCAP trace and forward it to an email address as an attachment.\u00a0 The tool is available at System Management --> Tools --> Network Traffic Capture.     Description     The top of the page contains the options that should be filled in:     Target Hosts -\u00a0contains the list of IP addresses that are going to be monitored. In the example below, the Traffic Capture will be gathering all packets coming from and to those five IP addresses.          The IP addresses can be separated by \"new line\", by \"comma\" or even by \"comma + space\".     Interface - an option to set the network interface and source IP address for TCP Dump to run at. There will be more than one option to choose if you have at least two IP address assigned to your Environment.     Duration, min - how long the Traffic Capture will run.  E-mail - an email address to send the collected PCAP file in the end. Several recipients are supported and should be separated by \"comma\".     Once all parameters are set, press the \"Add\" button to include the task into the queue:          In a minute, the system will start gathering the traffic and your task will change its status to \"In Progress\", which means Traffic Dump has started capturing packets on selected interface and IP address. If the test call is to be examined, it's the best time to start it.        Finally, when the dump is completed, the icon to download the trace will appear:       Note that traffic dumps are kept in the list for 48 hours. Thus, please make sure you downloaded a copy of the trace in order not to lose it in 2 days.  And its max size is the following:   MAXIMUM_DUMP_SIZE = 256 \u00a0 \u00a0 \u00a0 \u00a0 # megabytes    ",
    "seo_data": {
      "meta_title": "",
      "meta_description": ""
    },
    "tags": [],
    "attachments": [],
    "cloud_files": [],
    "thumbs_up": 0,
    "thumbs_down": 1,
    "hits": 302,
    "suggested": 0,
    "feedback_count": 0
  }
]