{
  "id": 3000051206,
  "type": 1,
  "status": 2,
  "agent_id": 3763909,
  "created_at": "2016-04-05T07:24:47Z",
  "category_id": 81138,
  "folder_id": 133168,
  "title": "Understanding CPS",
  "updated_at": "2020-05-01T17:52:40Z",
  "description": "<p dir=\"ltr\" style=\"line-height: 1.38; text-indent: 0pt; text-align: left;\"><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0);'>Controlling the amount of calls passing through your softswitch is a very important task and in order to ensure that the actual amount of calls that have been routed is equal to the expected amount, you need to understand the mechanism of controlling the CPS rate.</span></p><p dir=\"ltr\" style=\"line-height: 1.38; text-indent: 0pt; text-align: left;\"><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0);'><br></span></p><p dir=\"ltr\" style=\"line-height: 1.38; text-indent: 0pt; text-align: left;\"><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0);'>The task of controlling calls is particularly important to cope with unpredictable spikes of new calls that may arrive at the softswitch. Call spikes should be handled properly to make sure that the least possible number of calls is rejected and that the CPS value is not exceeded. \u00a0</span></p><p dir=\"ltr\" style=\"line-height: 1.38; text-indent: 0pt; text-align: left;\"><span style='font-size: 14.6667px; font-family: Arial, \"Helvetica Neue\", Helvetica, Arial, sans-serif; color: rgb(0, 0, 0); font-weight: 400;'>For example:</span></p><p dir=\"ltr\" style=\"line-height: 1.38; text-indent: 0pt; text-align: left;\"><br></p><p dir=\"ltr\" style=\"line-height: 1.38; text-indent: 0pt; text-align: left;\"><font face=\"Arial, Helvetica Neue, Helvetica, Arial, sans-serif\"><span style=\"font-size: 14.6667px;\">During the time frame of 1 minute 60 calls are received. The initials CPS (Calls per Second) might mislead you to think of CPS in terms of a perfect ratio of seconds to calls of 1:1. \u00a0In actuality, calls do not arrive in perfect ratios of 1:1. \u00a0Consider what happens if 50 calls are received in the first 5 seconds and 10 calls in the last 55.\u00a0</span></font><em><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0);'>Should the softswitch reject 45 out of 50 calls that came in the first 5 seconds?</span></em></p><p dir=\"ltr\" style=\"line-height: 1.38; text-align: left;\"><br></p><p><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0);'>To handle the situation above, our developers created a mechanism called the Token Bucket which dynamically controls the call rate. \u00a0The Token Bucket is full of tokens and the number of tokens in the bucket depends on the CPS value of your softswitch. \u00a0The Token Bucket is constantly, linearly refilled with new tokens to ensure that it is full. \u00a0The Token Bucket capacity is equal to the CPS value of your softswitch multiplied by the cost of the call in tokens and by 60 seconds. \u00a0The Token Bucket cannot hold more tokens than its capacity. Each call has its own cost in tokens. In order to pass the calls, we need to extract the correct amount of tokens out of the bucket. If the amount necessary is not available, the call will be rejected.</span></p><p dir=\"ltr\" style=\"line-height: 1.38;\"><br></p><p dir=\"ltr\" style=\"line-height: 1.38;\"><strong><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0); font-weight: 400;'><strong><font size=\"3\">Here is a simple example:</font></strong></span></strong></p><ul><li dir=\"ltr\" style=\"line-height: 1.38;\"><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline;'>CPS is 1 and the bucket is full</span></li><li dir=\"ltr\" style=\"line-height: 1.38;\"><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0);'>One call costs 100 tokens</span></li><li dir=\"ltr\" style=\"line-height: 1.38;\"><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline;'>Bucket filling speed is CPS * Call cost (100 tokens per second)</span></li><li dir=\"ltr\" style=\"line-height: 1.38;\"><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline;'>Bucket size is CPS * Call cost * 60 seconds (6000 tokens)</span></li></ul><p><br></p><p dir=\"ltr\" style=\"line-height: 1.38;\"><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline;'>Now, going back to the scenario of 50 calls in the first 5 seconds...</span></p><p dir=\"ltr\" style=\"line-height: 1.38;\"><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline;'>If we receive 50 calls in 5 seconds all of them will pass through; however, only 1500 tokens will remain in the bucket (decrease of 5000 tokens on calls and increase of 500 tokens on re-filling flow).</span></p><p dir=\"ltr\" style=\"line-height: 1.38;\"><br></p><p><span style='font-size: 14.6667px; font-family: Arial,\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(0, 0, 0); background-color: transparent;'>If we receive another portion of 55 calls in the next 5 seconds, only 20 of them will pass and the rest of them will be rejected; however, if the portion is smaller (10 calls during next 50 seconds) all of them will pass successfully.</span></p>",
  "description_text": " Controlling the amount of calls passing through your softswitch is a very important task and in order to ensure that the actual amount of calls that have been routed is equal to the expected amount, you need to understand the mechanism of controlling the CPS rate.     The task of controlling calls is particularly important to cope with unpredictable spikes of new calls that may arrive at the softswitch. Call spikes should be handled properly to make sure that the least possible number of calls is rejected and that the CPS value is not exceeded. \u00a0  For example:     During the time frame of 1 minute 60 calls are received. The initials CPS (Calls per Second) might mislead you to think of CPS in terms of a perfect ratio of seconds to calls of 1:1. \u00a0In actuality, calls do not arrive in perfect ratios of 1:1. \u00a0Consider what happens if 50 calls are received in the first 5 seconds and 10 calls in the last 55.\u00a0Should the softswitch reject 45 out of 50 calls that came in the first 5 seconds?     To handle the situation above, our developers created a mechanism called the Token Bucket which dynamically controls the call rate. \u00a0The Token Bucket is full of tokens and the number of tokens in the bucket depends on the CPS value of your softswitch. \u00a0The Token Bucket is constantly, linearly refilled with new tokens to ensure that it is full. \u00a0The Token Bucket capacity is equal to the CPS value of your softswitch multiplied by the cost of the call in tokens and by 60 seconds. \u00a0The Token Bucket cannot hold more tokens than its capacity. Each call has its own cost in tokens. In order to pass the calls, we need to extract the correct amount of tokens out of the bucket. If the amount necessary is not available, the call will be rejected.     Here is a simple example:   CPS is 1 and the bucket is full  One call costs 100 tokens  Bucket filling speed is CPS * Call cost (100 tokens per second)  Bucket size is CPS * Call cost * 60 seconds (6000 tokens)      Now, going back to the scenario of 50 calls in the first 5 seconds...  If we receive 50 calls in 5 seconds all of them will pass through; however, only 1500 tokens will remain in the bucket (decrease of 5000 tokens on calls and increase of 500 tokens on re-filling flow).     If we receive another portion of 55 calls in the next 5 seconds, only 20 of them will pass and the rest of them will be rejected; however, if the portion is smaller (10 calls during next 50 seconds) all of them will pass successfully. ",
  "seo_data": {
    "meta_title": "",
    "meta_description": "",
    "meta_keywords": ""
  },
  "tags": [],
  "attachments": [],
  "cloud_files": [],
  "thumbs_up": 0,
  "thumbs_down": 5,
  "hits": 437,
  "suggested": 0,
  "feedback_count": 0,
  "collaboration": {
    "convo_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJUeXBlIjoiYXJ0aWNsZSIsIkNvbnZvSWQiOiIzMDAwMDUxMjA2LWVuIiwiVXNlcklkIjoiMzAxMjA4OTUyNCIsImV4cCI6MTYzNTM3MTAyN30.w_Uqajkc6zYvsz3ETtI0XPQoAlSR8BqmQL9kUmQNvCI"
  }
}