{
  "id": 3000061100,
  "type": 1,
  "status": 2,
  "agent_id": 3901167,
  "created_at": "2016-12-16T16:36:44Z",
  "category_id": 81138,
  "folder_id": 134069,
  "title": "Diversion header support per RFC5806",
  "updated_at": "2020-03-17T14:29:14Z",
  "description": "<p>This documentation reflects the implementation details for Diversion header support in Sippy.</p><p>The header contains the originally called number, and is useful in case the CLD has gotten completely rewritten before sending the call to vendor.</p><p>Developed in order to comply with Turkish Telecommunication Board requirements, could be installed on any Sippy version above 4.5.</p><p>For implementation details/cost please contact our <a href=\"http://www.sippysoft.com/contact-sippy\">Sales/Billing department</a></p><p><br></p><h2>Areas of use:</h2><ul><li>Call to Account that has Follow-Me enabled</li><li>Call to Registered account via DID</li><li>Call to Registered account forwarded to another Account</li><li>Call to Account Trunk via DID</li><li>Call to Calling Card and Call-back application</li></ul><p><br></p><p>For extra details see <a href=\"https://tools.ietf.org/html/rfc5806\">RFC5806</a></p><p><br></p><p>The main place for Diversion to be configured is Connection preferences interface:</p><p><img data-uniquekey=\"1481906210915\" data-fileid=\"3024916639\" data-filelink=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3024916639/original/K0arwhtMKQRDSIwKC16r5hdcvtfJpga-4w.jpg?1481906649\" class=\"fr-dib\" src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3024916639/original/K0arwhtMKQRDSIwKC16r5hdcvtfJpga-4w.jpg?1481906649\" style=\"width: 300px;\"></p><p><br></p><p>After setting Enable Diversion checkbox the translated incoming CLD would be sent in Diversion header to Vendor for one of the following events:</p><ul><li>Follow Me was triggered for this call</li><li>Call came to the Callback/Calling Card IVR application</li></ul><p><br></p><p>Switch operator can also set the Diversion Header Tr. Rule in order to change the Diversion number according to the Vendor requirements.</p><p><br></p><p>Sippy will pass the incoming Diversion header to vendor in case neither of the events mentioned above were triggered, otherwise the incoming Diversion number would be substituted by the one generated by Sippy.</p><p><br></p><p><span style=\"font-size: 24px;\"><strong>Detailed example of the scenario with Follow Me:</strong></span></p><p>Call comes to Sippy with CLD = B92071234567, authentication is done to the DID 92071234567 via Incoming DID = B92071234567. CLD Tr. Rule is applied, cutting the tech prefix B.</p><p><img data-uniquekey=\"1481906210915\" data-fileid=\"3024916900\" data-filelink=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3024916900/original/QzQ4S7OKSOjffKKa-yBUh-GqEhtwRbo9cQ.jpg?1481907265\" class=\"fr-dib\" src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3024916900/original/QzQ4S7OKSOjffKKa-yBUh-GqEhtwRbo9cQ.jpg?1481907265\" style=\"width: 300px;\"></p><p>DID is assigned to Account diversion_test, with Onnet = Default on Routing Group, and Follow Me configured to forward all calls to 12061234567 number unconditionally (always).</p><p><img data-uniquekey=\"1481906210915\" data-fileid=\"3024916938\" data-filelink=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3024916938/original/cGRsgua5oHUVJD6c6mocKe5HMOrW1rgDag.jpg?1481907407\" class=\"fr-dib\" src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3024916938/original/cGRsgua5oHUVJD6c6mocKe5HMOrW1rgDag.jpg?1481907407\" style=\"width: 300px;\"></p><p>Incoming Routing for Account diversion_test has Trunk = Registered Account\u00a0</p><p><img data-uniquekey=\"1481906210915\" data-fileid=\"3024916948\" data-filelink=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3024916948/original/L2zZm63Cvi69EuRQCI0kLsl5WJIY-YJZMw.jpg?1481907422\" class=\"fr-dib\" src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3024916948/original/L2zZm63Cvi69EuRQCI0kLsl5WJIY-YJZMw.jpg?1481907422\" style=\"width: 300px;\"></p><p>The call would be sent to the Follow Me leg through the Routing Group of Account diversion_test to the Test Vendor-Test connection with CLD=12061234567.</p><p>Case Diversion is enabled on connection, 92071234567 number would be sent in Diversion header, so that the vendor can do the reconfiguration based on this parameter.</p><p><br></p><p><span style=\"font-size: 24px;\"><strong>Detailed example of the scenario with DID-Registered Account/Trunk:</strong></span></p><p>Call comes to Sippy with CLD = B92071234567, authentication is done to the DID 92071234567 via Incoming DID = B92071234567. CLD Tr. Rule is applied, cutting the tech prefix B.</p><p><img data-uniquekey=\"1481906210915\" data-fileid=\"3024916900\" data-filelink=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3024916900/original/QzQ4S7OKSOjffKKa-yBUh-GqEhtwRbo9cQ.jpg?1481907265\" class=\"fr-dib\" src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3024916900/original/QzQ4S7OKSOjffKKa-yBUh-GqEhtwRbo9cQ.jpg?1481907265\" style=\"width: 300px;\"></p><p>DID is assigned to Account diversion_test, with Onnet = Default on Routing Group</p><p>Incoming Routing for Account diversion_test has Trunk = Registered Account, and Fwd DID Mode = Diversion Header</p><p><img data-uniquekey=\"1481906210915\" data-fileid=\"3024916948\" data-filelink=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3024916948/original/L2zZm63Cvi69EuRQCI0kLsl5WJIY-YJZMw.jpg?1481907422\" class=\"fr-dib\" src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3024916948/original/L2zZm63Cvi69EuRQCI0kLsl5WJIY-YJZMw.jpg?1481907422\" style=\"width: 300px;\"></p><p>The call would be sent to the Registered Account with Diversion header containing the DID call came to Sippy Softswitch, To and URI headers would have account's name.</p><hr><p><span style=\"font-size: 16px;\"><strong>Connected documentation links:</strong></span></p><p><a href=\"https://support.sippysoft.com/en/support/solutions/articles/77914-rewriting-cli-and-cld-with-external-script\">External Translator documentation\u00a0</a></p><p><br></p><p><a href=\"https://support.sippysoft.com/en/support/solutions/articles/78278-calling-card-ivr-application\">Calling Card IVR Application</a></p><p><br></p><p><a href=\"https://support.sippysoft.com/en/support/solutions/articles/79051-ani-callback-ivr-application\">ANI Callback IVR application</a></p><p><br></p>",
  "description_text": " This documentation reflects the implementation details for Diversion header support in Sippy.  The header contains the originally called number, and is useful in case the CLD has gotten completely rewritten before sending the call to vendor.  Developed in order to comply with Turkish Telecommunication Board requirements, could be installed on any Sippy version above 4.5.  For implementation details/cost please contact our Sales/Billing department     Areas of use:   Call to Account that has Follow-Me enabled  Call to Registered account via DID  Call to Registered account forwarded to another Account  Call to Account Trunk via DID  Call to Calling Card and Call-back application      For extra details see RFC5806     The main place for Diversion to be configured is Connection preferences interface:       After setting Enable Diversion checkbox the translated incoming CLD would be sent in Diversion header to Vendor for one of the following events:   Follow Me was triggered for this call  Call came to the Callback/Calling Card IVR application      Switch operator can also set the Diversion Header Tr. Rule in order to change the Diversion number according to the Vendor requirements.     Sippy will pass the incoming Diversion header to vendor in case neither of the events mentioned above were triggered, otherwise the incoming Diversion number would be substituted by the one generated by Sippy.     Detailed example of the scenario with Follow Me:  Call comes to Sippy with CLD = B92071234567, authentication is done to the DID 92071234567 via Incoming DID = B92071234567. CLD Tr. Rule is applied, cutting the tech prefix B.    DID is assigned to Account diversion_test, with Onnet = Default on Routing Group, and Follow Me configured to forward all calls to 12061234567 number unconditionally (always).    Incoming Routing for Account diversion_test has Trunk = Registered Account\u00a0    The call would be sent to the Follow Me leg through the Routing Group of Account diversion_test to the Test Vendor-Test connection with CLD=12061234567.  Case Diversion is enabled on connection, 92071234567 number would be sent in Diversion header, so that the vendor can do the reconfiguration based on this parameter.     Detailed example of the scenario with DID-Registered Account/Trunk:  Call comes to Sippy with CLD = B92071234567, authentication is done to the DID 92071234567 via Incoming DID = B92071234567. CLD Tr. Rule is applied, cutting the tech prefix B.    DID is assigned to Account diversion_test, with Onnet = Default on Routing Group  Incoming Routing for Account diversion_test has Trunk = Registered Account, and Fwd DID Mode = Diversion Header    The call would be sent to the Registered Account with Diversion header containing the DID call came to Sippy Softswitch, To and URI headers would have account's name.   Connected documentation links:  External Translator documentation\u00a0     Calling Card IVR Application     ANI Callback IVR application    ",
  "seo_data": {
    "meta_title": "",
    "meta_description": "",
    "meta_keywords": ""
  },
  "tags": [
    "diversion"
  ],
  "attachments": [],
  "cloud_files": [],
  "thumbs_up": 0,
  "thumbs_down": 1,
  "hits": 892,
  "suggested": 0,
  "feedback_count": 0,
  "collaboration": {
    "convo_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJUeXBlIjoiYXJ0aWNsZSIsIkNvbnZvSWQiOiIzMDAwMDYxMTAwLWVuIiwiVXNlcklkIjoiMzAxMjA4OTUyNCIsImV4cCI6MTYzNTM3MTAzOX0.rA_zqzu8cj8PIt5dfDnX2Ndlpom3gsajg0BT9D5c5TY"
  }
}