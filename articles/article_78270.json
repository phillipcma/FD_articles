{
  "id": 78270,
  "type": 1,
  "status": 2,
  "agent_id": 3763909,
  "created_at": "2013-04-23T09:17:25Z",
  "category_id": 82218,
  "folder_id": 134765,
  "title": "Voicemail application",
  "updated_at": "2018-07-24T09:53:36Z",
  "description": "<div style=\"\"><h3 style=\"\"><span style=\"font-size: 24px;\">Overview</span></h3><p style=\"\"><br>This application consists of two subsystems:</p><ul><li>Voice Mail Recording Subsystem</li><li>Listen to Voice Mail Subsystem</li></ul><p><br>Both of them look like independent applications and require independent call routing setup.<br><br>Since version 2.1 of Sippy Softswitch it is possible to mix these applications: when Voice Mail Recording scenario is in action, user can press * and access his Voicemail after Voice Mail PIN check. This feature is controlled by <strong>VM Dialing Access</strong> account flag.</p><hr><strong><font size=\"4\">Voice Mail Recording Subsystem</font></strong><br><br><em>Note. This application is executed automatically with no additional setup when On-Net Voicemail Connection is enabled.<br></em><br>This application is executed when the callee is unavailable. The application plays prompt and records a caller's voice message into the voice mailbox. These messages can be later inspected by the owner of mailbox using the Listen To Voice Mail Subsystem.</div><div style=\"\"><br></div><div style=\"\"><span style=\"font-size: 18px;\">Voicemail control options</span></div><ul><li style=\"\"><strong><em>account's preferences</em></strong><span style=\"font-size: 18px;\"><img style=\"width: 945px; height: 119.903px;\" data-uniquekey=\"1526038660194\" data-fileid=\"3036410453\" data-filelink=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3036410453/original/9DkL5QGUpOcn1XPFlBjxaboiMsBFV9cUKQ.jpg?1526038953\" class=\"fr-dib fr-draggable fr-fil\" src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3036410453/original/9DkL5QGUpOcn1XPFlBjxaboiMsBFV9cUKQ.jpg?1526038953\"></span></li></ul><p style=\"\"><br></p><p style=\"\">Main checkbox to be set - <strong>VM Enabled</strong>.\u00a0</p><p style=\"\"><strong>VM Dialin Access</strong> checkbox allows reaching voicemail by dialing <strong>VM Check #</strong> with authentication under that account.</p><ul><li style=\"\"><strong><em>routing group's preferences</em></strong></li></ul><p style=\"\"><img style=\"width: 952px; height: 62.8505px;\" data-uniquekey=\"1526038979622\" data-fileid=\"3036410530\" data-filelink=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3036410530/original/Gr3Y4Am9nraYgRArj-CrJuKJ40bpIs5lbA.jpg?1526039206\" class=\"fr-dib fr-draggable\" src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3036410530/original/Gr3Y4Am9nraYgRArj-CrJuKJ40bpIs5lbA.jpg?1526039206\"></p><p style=\"\"><strong>Default</strong> setting allows usage of built-in System Vendor/System Connection</p><p style=\"\"><br></p><p style=\"\"><br></p><h2 id=\"ListentoVoiceMailSubsystem\"><strong><font size=\"4\">Listen to Voice Mail Subsystem</font></strong></h2><p style=\"\">This subsystem allows the user to listen to the voice messages left by other callers. Could be useful when the user wants to listen his voicemail box by calling to DID number.</p><p style=\"\"><br></p><p style=\"\"><strong>In the simple case send the call to the VM Check # to IP of the system, authenticate as account, and proceed with manage of mailbox.</strong></p><p><br></p><h3 id=\"Callroutingsetup1\" style=\"\">Enhanced c<font size=\"3\">all routing setup</font></h3><ol><li>Add a DID, assign it to the account you want to use.</li><li>In account set <strong>VM Enabled\u00a0</strong>checkbox and configure some PIN code for it. The CLI should match the account's username, otherwise the call would be rejected. You can set the CLI translation rule for this account to the account's username.</li><li>Add vendor connection. Set the Asterisk's host/port in the Destination field of Vendor Connection (ex: 192.168.0.100:5062).</li><li>Set the CLD Translation Rule for the connection to the value <strong>s/.*/vm/</strong></li><li>Correct the Onnet routing value to the connection you've configured.</li><li>Call to the DID number from outside and you'd be prompted to enter the PIN code of the account. Once entered, you'd be able to manage its voicemail box.</li></ol><p style=\"\"><br></p><h2 id=\"Configurationoptions\" style=\"\">Configuration options to be done in ivr_config DB table</h2><p dir=\"ltr\" style=\"\">Case no record for the needed option is present in ivr_config table, the hard-coded Default value is used. After addition of new option reload of settings would be done by ivrd itself within ~1 minute. Options for the subsystem are stored in the database with the following keys:</p><table><tbody><tr><td style=\"width: 5.3801%;\"><strong>Section</strong><br></td><td style=\"width: 14.7173%;\"><strong>Option</strong><br></td><td style=\"width: 19.0059%;\"><strong>Value</strong><br></td><td style=\"width: 53.0994%;\"><strong>Meaning</strong><br></td><td style=\"width: 9.5906%;\"><strong>Default</strong><br></td></tr><tr><td style=\"width: 5.3801%;\"><strong>v</strong><strong>oicemail</strong><br></td><td style=\"width: 14.7173%;\"><strong>skipaftercmd</strong><br></td><td style=\"width: 19.0059%;\">Yes/No<br></td><td style=\"width: 53.0994%;\">Whether to skip to the next message after the current message has been acted upon (deleted/undeleted/stored)<br></td><td style=\"width: 9.5906%;\">Yes<br></td></tr><tr><td style=\"width: 5.3801%;\"><strong>v</strong><strong>oicemail</strong><br></td><td style=\"width: 14.7173%;\"><strong>m</strong><strong>axsilencetimesec</strong><br></td><td style=\"width: 19.0059%;\">X seconds<br></td><td style=\"width: 53.0994%;\">Voice message or custom prompt recording stops automatically if this number of seconds of silence has been detected, replace X with needed number<br></td><td style=\"width: 9.5906%;\">5 seconds<br></td></tr><tr><td style=\"width: 5.3801%;\"><strong>v</strong><strong>oicemail</strong><br></td><td style=\"width: 14.7173%;\"><strong>maxmessagetimemsec</strong><br></td><td style=\"width: 19.0059%;\">X milliseconds<br></td><td style=\"width: 53.0994%;\">The maximum allowed recording duration for the voice message, replace X with needed number<br></td><td style=\"width: 9.5906%;\">60000 milliseconds<br></td></tr><tr><td style=\"width: 5.3801%;\"><strong>v</strong><strong>oicemail</strong><br></td><td style=\"width: 14.7173%;\"><strong>m</strong><strong>axgreetingtimemsec</strong><br></td><td style=\"width: 19.0059%;\">X milliseconds<br></td><td style=\"width: 53.0994%;\">The maximum allowed recording duration for the custom prompts (busy and unavailable messages), replace X with needed number<br></td><td style=\"width: 9.5906%;\">30000 milliseconds<br></td></tr><tr><td style=\"width: 5.3801%;\"><strong>voicemail</strong><br></td><td style=\"width: 14.7173%;\"><strong>maxmessages</strong><br></td><td style=\"width: 19.0059%;\">X<br></td><td style=\"width: 53.0994%;\">The maximum allowed number of new voicemail messages on per-account basis, after reaching this limit mboxoverflowmode policy would be applied, replace X with needed number<em>. Option available starting from 5.1 version of Sippy</em><br></td><td style=\"width: 9.5906%;\">200<br></td></tr><tr><td style=\"width: 5.3801%;\"><strong>voicemail</strong><br></td><td style=\"width: 14.7173%;\"><strong>mboxoverflowmode</strong><br></td><td style=\"width: 19.0059%;\">reject/purge<br></td><td style=\"width: 53.0994%;\">Policy to be applied after number of new voicemail messages reaches maxmessages limit.<br>Option reject will reject attempts to leave new voicemail messages, option purge will purge one of the new messages with oldest arrived time.<em>\u00a0Option available starting from 5.1 version of Sippy</em><br></td><td style=\"width: 9.5906%;\">reject<br></td></tr></tbody></table><h2 style=\"\"><br></h2><h2 style=\"\">Starting from <strong>5.2 version</strong> the new menu to manage Voicemail is present in Environment additional preferences:</h2><p style=\"\"><img data-uniquekey=\"1532425180965\" data-fileid=\"3038021435\" data-filelink=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3038021435/original/weT3gW6v-MORWyqNsTtAP1VtZiaTFyQClA.jpg?1532425902\" style=\"width: 951px; height: 212.509px;\" class=\"fr-dib fr-draggable fr-fil\" src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3038021435/original/weT3gW6v-MORWyqNsTtAP1VtZiaTFyQClA.jpg?1532425902\"></p><p style=\"\"><br></p><p style=\"\"><img style=\"width: 711px; height: 280.855px;\" data-uniquekey=\"1532425180965\" data-fileid=\"3038021422\" data-filelink=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3038021422/original/edJpYaQ30FqIHyhPlvp4l0BBC2Ae5eys1w.jpg?1532425870\" class=\"fr-dib fr-draggable fr-fil\" src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3038021422/original/edJpYaQ30FqIHyhPlvp4l0BBC2Ae5eys1w.jpg?1532425870\"></p><p style=\"\"><br></p><h2 style=\"\">Obsolete options:</h2><p style=\"\">voicemail - spooldir, folder where the voice message files are stored(obsolete since in 1.5), default value /var/spool/voicemail</p><p style=\"\"><br></p><h3 style=\"\"><span style=\"font-size: 13px;\"><font size=\"3\">Old call routing setup</font></span></h3><ol><li>Add vendor connection. Set the Asterisk's host/port in the Destination field of Vendor Connection (ex: <strong>192.168.0.100:5062</strong>).</li><li>Set the CLD Translation Rule for the connection to the value <strong>s/^/vm-/</strong></li><li>Add route to this connection in the same way as for normal calls but with lower preference than for normal calls. This will forward the call to the Voice Mail after the normal call to destination has failed. (Smaller value in the field Preference of the Vendor Connection Route means lower preference.)</li></ol><p style=\"\"><br></p><h2 id=\"Databaseusage\" style=\"\">Database usage</h2><p dir=\"ltr\" style=\"\">The Voice Mail IVR Application stores information about voice messages in the database in the table <strong>vm_messages</strong>.</p><p dir=\"ltr\" style=\"\"><br></p><p dir=\"ltr\" style=\"\">Since the 1.5 version the Voice Mail application stopped using the files to store audio and stores the voice messages and custom greetings in the database instead (tables <strong>vm_message_data</strong>, <strong>vm_greetings</strong> and some helper tables).</p><p dir=\"ltr\" style=\"\"><br></p><p dir=\"ltr\" style=\"\">In order to apply the DB modification properly, set i_ivr_instance to 1 for the added records.</p><p dir=\"ltr\" style=\"\">That way the option would be applied to the whole environment.</p><p><br></p>",
  "description_text": "  Overview   This application consists of two subsystems:   Voice Mail Recording Subsystem  Listen to Voice Mail Subsystem    Both of them look like independent applications and require independent call routing setup.  Since version 2.1 of Sippy Softswitch it is possible to mix these applications: when Voice Mail Recording scenario is in action, user can press * and access his Voicemail after Voice Mail PIN check. This feature is controlled by VM Dialing Access account flag.  Voice Mail Recording Subsystem  Note. This application is executed automatically with no additional setup when On-Net Voicemail Connection is enabled.  This application is executed when the callee is unavailable. The application plays prompt and records a caller's voice message into the voice mailbox. These messages can be later inspected by the owner of mailbox using the Listen To Voice Mail Subsystem.     Voicemail control options   account's preferences      Main checkbox to be set - VM Enabled.\u00a0  VM Dialin Access checkbox allows reaching voicemail by dialing VM Check # with authentication under that account.   routing group's preferences     Default setting allows usage of built-in System Vendor/System Connection        Listen to Voice Mail Subsystem  This subsystem allows the user to listen to the voice messages left by other callers. Could be useful when the user wants to listen his voicemail box by calling to DID number.     In the simple case send the call to the VM Check # to IP of the system, authenticate as account, and proceed with manage of mailbox.     Enhanced call routing setup   Add a DID, assign it to the account you want to use.  In account set VM Enabled\u00a0checkbox and configure some PIN code for it. The CLI should match the account's username, otherwise the call would be rejected. You can set the CLI translation rule for this account to the account's username.  Add vendor connection. Set the Asterisk's host/port in the Destination field of Vendor Connection (ex: 192.168.0.100:5062).  Set the CLD Translation Rule for the connection to the value s/.*/vm/  Correct the Onnet routing value to the connection you've configured.  Call to the DID number from outside and you'd be prompted to enter the PIN code of the account. Once entered, you'd be able to manage its voicemail box.      Configuration options to be done in ivr_config DB table  Case no record for the needed option is present in ivr_config table, the hard-coded Default value is used. After addition of new option reload of settings would be done by ivrd itself within ~1 minute. Options for the subsystem are stored in the database with the following keys:  Section   Option   Value   Meaning   Default   voicemail   skipaftercmd   Yes/No   Whether to skip to the next message after the current message has been acted upon (deleted/undeleted/stored)   Yes   voicemail   maxsilencetimesec   X seconds   Voice message or custom prompt recording stops automatically if this number of seconds of silence has been detected, replace X with needed number   5 seconds   voicemail   maxmessagetimemsec   X milliseconds   The maximum allowed recording duration for the voice message, replace X with needed number   60000 milliseconds   voicemail   maxgreetingtimemsec   X milliseconds   The maximum allowed recording duration for the custom prompts (busy and unavailable messages), replace X with needed number   30000 milliseconds   voicemail   maxmessages   X   The maximum allowed number of new voicemail messages on per-account basis, after reaching this limit mboxoverflowmode policy would be applied, replace X with needed number. Option available starting from 5.1 version of Sippy   200   voicemail   mboxoverflowmode   reject/purge   Policy to be applied after number of new voicemail messages reaches maxmessages limit. Option reject will reject attempts to leave new voicemail messages, option purge will purge one of the new messages with oldest arrived time.\u00a0Option available starting from 5.1 version of Sippy   reject      Starting from 5.2 version the new menu to manage Voicemail is present in Environment additional preferences:            Obsolete options:  voicemail - spooldir, folder where the voice message files are stored(obsolete since in 1.5), default value /var/spool/voicemail     Old call routing setup   Add vendor connection. Set the Asterisk's host/port in the Destination field of Vendor Connection (ex: 192.168.0.100:5062).  Set the CLD Translation Rule for the connection to the value s/^/vm-/  Add route to this connection in the same way as for normal calls but with lower preference than for normal calls. This will forward the call to the Voice Mail after the normal call to destination has failed. (Smaller value in the field Preference of the Vendor Connection Route means lower preference.)      Database usage  The Voice Mail IVR Application stores information about voice messages in the database in the table vm_messages.     Since the 1.5 version the Voice Mail application stopped using the files to store audio and stores the voice messages and custom greetings in the database instead (tables vm_message_data, vm_greetings and some helper tables).     In order to apply the DB modification properly, set i_ivr_instance to 1 for the added records.  That way the option would be applied to the whole environment.    ",
  "seo_data": {
    "meta_title": "",
    "meta_description": "",
    "meta_keywords": ""
  },
  "tags": [],
  "attachments": [],
  "cloud_files": [],
  "thumbs_up": 1,
  "thumbs_down": 2,
  "hits": 1101,
  "suggested": 0,
  "feedback_count": 0,
  "collaboration": {
    "convo_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJUeXBlIjoiYXJ0aWNsZSIsIkNvbnZvSWQiOiI3ODI3MC1lbiIsIlVzZXJJZCI6IjMwMTIwODk1MjQiLCJleHAiOjE2MzUzNzExMjJ9.FD0JbiIDL8jgXfnkvKi-8KPkAmSckWivCjbzeOAWjYw"
  }
}