{
  "id": 3000107425,
  "type": 1,
  "status": 2,
  "agent_id": 3763909,
  "created_at": "2021-05-07T11:47:40Z",
  "category_id": 81138,
  "folder_id": 134740,
  "title": "Internal/external \"result\" codes in CDRs",
  "updated_at": "2021-05-07T11:48:17Z",
  "description": "<h2 dir=\"ltr\">The negative \"result\" codes \u00a0in the customer's CDRs section can be interpreted using the following table:</h2><p><br></p><div><pre contenteditable=\"false\" data-code-brush=\"Html\" rel=\"highlighter\">[ssp-root@trunk-60 /home/ssp]$ psql -U sippy -c \"SELECT * from call_error_codes order by 1 desc;\" sippy\n i_call_error_code |                       description\n-------------------+---------------------------------------------------------\n                -1 | External Translator Rejected The Call\n                -2 | Body-less INVITE\n                -3 | Account Expired\n                -4 | Connection Capacity Exceeded\n                -5 | Malformed SDP\n                -6 | Unsupported Content-Type\n                -7 | Unacceptable Codec\n                -8 | Invalid CLD Translation Rule In The Authentication Rule\n                -9 | Invalid CLI Translation Rule In The Authentication Rule\n               -10 | Invalid CLD Translation Rule In The Account\n               -11 | Invalid CLI Translation Rule In The Account\n               -12 | Cannot Find The Session To Bind To\n               -13 | Invalid CLI Translation Rule In The DID\n               -14 | No Rate Found In Tariff\n               -15 | Call Loop Detected\n               -16 | Too Many Sessions\n               -17 | Account Is In Use\n               -18 | Call Per Second (CPS) Limit On Account Exceeded\n               -19 | Call Per Second (CPS) System Limit Exceeded\n               -20 | Insufficient Balance\n               -21 | Destination Is Forbidden\n               -22 | No Rate Found In Customer's Tariff\n               -23 | Loss Protection\n               -24 | Address Is Incomplete\n               -25 | No Routes Found\n               -26 | Call Per Second (CPS) Limit On Connection Exceeded\n               -27 | Invalid Asserted ID Translation Rule In The Account\n               -28 | CLD is in the Do Not Call List\n               -29 | Invalid CLD Translation Rule In The DID\n               -30 | Call has been canceled by calling party\n               -31 | Call Per Second (CPS) Limit On Customer Exceeded (starting from 5.0)\n               -32 | Too Many Sessions For Customer (starting from 5.0)\n               -33 | Call Per Second (CPS) Limit On Auth Rule Exceeded (starting from Sippy2020)\n               -34 | Too Many Sessions For Auth Rule (starting from Sippy2020)\n               -35 | Invalid CLI Translation Rule In The Pre-Routing Rule (starting from Sippy2020)\n               -36 | Invalid CLD Translation Rule In The Pre-Routing Rule (starting from Sippy2020)\n               -37 | CLI is in the Do Not Call List (starting from Sippy2020)</pre><h2 dir=\"ltr\">For inbound calls there will be the following SIP error codes:</h2><p><br></p></div><div><pre contenteditable=\"false\" data-code-brush=\"Html\" rel=\"highlighter\">400, 'Bad Request - Malformed SDP'\n400, 'Bad Request - Unsupported Content-Type'\n403, 'Account Expired'\n403, 'Account in Use %d' % self.i_account\n403, 'Auth Failed (1)'\n403, 'Auth Failed (2)'\n403, 'Call Loop Detected'\n403, 'Call rate too high for account %d' % self.i_account\n403, 'Call rate too high'\n403, 'Forbidden Destination %s' % prefix\n403, 'Insufficient Balance %d' % self.i_account\n403, 'Invalid CLD translation (1)'\n403, 'Invalid CLD translation (3)'\n403, 'Invalid CLI translation (2)'\n403, 'Invalid CLI translation (4)'\n403, 'Invalid CLI translation (5)'\n403, 'Invalid P-Asserted-Id translation'\n403, 'Loss to Destination %s Exceeds Max Loss' % prefix\n403, 'No Rates Found for Account %d' % self.i_account\n403, 'No Rates Found for Customer %d' % i_customer\n403, 'Too many active calls'\n403, 'Loss Protection'\n484, 'Address Incomplete'\n488, 'Not Acceptable Here'\n500, 'Body-less INVITE is not supported'\n500, 'Cannot Bind to the Requested Session'\n500, 'Internal Server Error (1)'\n500, 'Internal Server Error (2)'\n500, 'Internal Server Error'\n500, 'No Routes For the Call'\n503, 'Call rate too high per connection'\n503, 'Service Unavailable (FIXME1)'\n503, 'Service Unavailable (FIXME2)'\n503, 'Service Unavailable'</pre><p>Once the customer sends the call, and after the first invite b2bua generate the following error:</p><p><strong>500 Internal Server Error</strong><br>and the call is rejected, most likely that's because the customer has made changes to the routing group of an account (assigned another routing group or so) when there was live traffic running.</p><p dir=\"ltr\">As a result, the cache wasn't able to re-read immediately, it usually took up to 1 minute, or so after the first call attempt.</p><p dir=\"ltr\"><br></p><p dir=\"ltr\">Please, do not confuse this error to any other 500 one:</p><p dir=\"ltr\">Server internal error, which could be generated because of different reasons and in different periods of time.</p><p dir=\"ltr\"><br></p><p dir=\"ltr\"><strong>TROUBLESHOOTING:</strong></p><p dir=\"ltr\"><br></p><p dir=\"ltr\"><strong>-4 \"Connection Capacity Exceeded\"\u00a0</strong>and <strong>-16 \"Too Many Sessions\"</strong> (reached env CC limit) codes return <strong>503 Service Unavailable</strong> SIP code.</p><p dir=\"ltr\"><br></p><p>\"<strong>403 Auth Failed (1)</strong>\" error is returned by b2bua when the \"Trust CLI\" option of the account is disabled and CLI doesn't match VoIP login during <strong>DIGEST</strong> authentication only</p><p>\"<strong>403 Auth Failed (1)</strong>\" error is returned by b2bua when the account authenticated for the call is <strong>BLOCKED.\u00a0</strong>Starting from 5.2 the same error is returned for the case Customer that owns account authenticated for the call is <strong>BLOCKED</strong>.<strong><br></strong></p><p>Note: no CDRs are written for the calls that are dropped on blocked Account/Customer setup.</p><p dir=\"ltr\">\"<strong>403 Auth Failed (2)</strong>\" error is returned when VoIP password is incorrect during <strong>DIGEST</strong> authentication only.</p><p dir=\"ltr\"><br></p><p><strong>488 Not Acceptable Here</strong></p><p>Account codec is not compatible with caller party codec.</p><p dir=\"ltr\"><u></u><strong><u>Solution</u></strong>: to disable \"Use Pref. Codec Only \" in account parameters or reconfigure it according to the codec used.</p></div>",
  "description_text": " The negative \"result\" codes \u00a0in the customer's CDRs section can be interpreted using the following table:      [ssp-root@trunk-60 /home/ssp]$ psql -U sippy -c \"SELECT * from call_error_codes order by 1 desc;\" sippy\n i_call_error_code |                       description\n-------------------+---------------------------------------------------------\n                -1 | External Translator Rejected The Call\n                -2 | Body-less INVITE\n                -3 | Account Expired\n                -4 | Connection Capacity Exceeded\n                -5 | Malformed SDP\n                -6 | Unsupported Content-Type\n                -7 | Unacceptable Codec\n                -8 | Invalid CLD Translation Rule In The Authentication Rule\n                -9 | Invalid CLI Translation Rule In The Authentication Rule\n               -10 | Invalid CLD Translation Rule In The Account\n               -11 | Invalid CLI Translation Rule In The Account\n               -12 | Cannot Find The Session To Bind To\n               -13 | Invalid CLI Translation Rule In The DID\n               -14 | No Rate Found In Tariff\n               -15 | Call Loop Detected\n               -16 | Too Many Sessions\n               -17 | Account Is In Use\n               -18 | Call Per Second (CPS) Limit On Account Exceeded\n               -19 | Call Per Second (CPS) System Limit Exceeded\n               -20 | Insufficient Balance\n               -21 | Destination Is Forbidden\n               -22 | No Rate Found In Customer's Tariff\n               -23 | Loss Protection\n               -24 | Address Is Incomplete\n               -25 | No Routes Found\n               -26 | Call Per Second (CPS) Limit On Connection Exceeded\n               -27 | Invalid Asserted ID Translation Rule In The Account\n               -28 | CLD is in the Do Not Call List\n               -29 | Invalid CLD Translation Rule In The DID\n               -30 | Call has been canceled by calling party\n               -31 | Call Per Second (CPS) Limit On Customer Exceeded (starting from 5.0)\n               -32 | Too Many Sessions For Customer (starting from 5.0)\n               -33 | Call Per Second (CPS) Limit On Auth Rule Exceeded (starting from Sippy2020)\n               -34 | Too Many Sessions For Auth Rule (starting from Sippy2020)\n               -35 | Invalid CLI Translation Rule In The Pre-Routing Rule (starting from Sippy2020)\n               -36 | Invalid CLD Translation Rule In The Pre-Routing Rule (starting from Sippy2020)\n               -37 | CLI is in the Do Not Call List (starting from Sippy2020)  For inbound calls there will be the following SIP error codes:       400, 'Bad Request - Malformed SDP'\n400, 'Bad Request - Unsupported Content-Type'\n403, 'Account Expired'\n403, 'Account in Use %d' % self.i_account\n403, 'Auth Failed (1)'\n403, 'Auth Failed (2)'\n403, 'Call Loop Detected'\n403, 'Call rate too high for account %d' % self.i_account\n403, 'Call rate too high'\n403, 'Forbidden Destination %s' % prefix\n403, 'Insufficient Balance %d' % self.i_account\n403, 'Invalid CLD translation (1)'\n403, 'Invalid CLD translation (3)'\n403, 'Invalid CLI translation (2)'\n403, 'Invalid CLI translation (4)'\n403, 'Invalid CLI translation (5)'\n403, 'Invalid P-Asserted-Id translation'\n403, 'Loss to Destination %s Exceeds Max Loss' % prefix\n403, 'No Rates Found for Account %d' % self.i_account\n403, 'No Rates Found for Customer %d' % i_customer\n403, 'Too many active calls'\n403, 'Loss Protection'\n484, 'Address Incomplete'\n488, 'Not Acceptable Here'\n500, 'Body-less INVITE is not supported'\n500, 'Cannot Bind to the Requested Session'\n500, 'Internal Server Error (1)'\n500, 'Internal Server Error (2)'\n500, 'Internal Server Error'\n500, 'No Routes For the Call'\n503, 'Call rate too high per connection'\n503, 'Service Unavailable (FIXME1)'\n503, 'Service Unavailable (FIXME2)'\n503, 'Service Unavailable'  Once the customer sends the call, and after the first invite b2bua generate the following error:  500 Internal Server Error and the call is rejected, most likely that's because the customer has made changes to the routing group of an account (assigned another routing group or so) when there was live traffic running.  As a result, the cache wasn't able to re-read immediately, it usually took up to 1 minute, or so after the first call attempt.     Please, do not confuse this error to any other 500 one:  Server internal error, which could be generated because of different reasons and in different periods of time.     TROUBLESHOOTING:     -4 \"Connection Capacity Exceeded\"\u00a0and -16 \"Too Many Sessions\" (reached env CC limit) codes return 503 Service Unavailable SIP code.     \"403 Auth Failed (1)\" error is returned by b2bua when the \"Trust CLI\" option of the account is disabled and CLI doesn't match VoIP login during DIGEST authentication only  \"403 Auth Failed (1)\" error is returned by b2bua when the account authenticated for the call is BLOCKED.\u00a0Starting from 5.2 the same error is returned for the case Customer that owns account authenticated for the call is BLOCKED.   Note: no CDRs are written for the calls that are dropped on blocked Account/Customer setup.  \"403 Auth Failed (2)\" error is returned when VoIP password is incorrect during DIGEST authentication only.     488 Not Acceptable Here  Account codec is not compatible with caller party codec.  Solution: to disable \"Use Pref. Codec Only \" in account parameters or reconfigure it according to the codec used.  ",
  "seo_data": {
    "meta_title": "",
    "meta_description": ""
  },
  "tags": [],
  "attachments": [],
  "cloud_files": [],
  "thumbs_up": 0,
  "thumbs_down": 0,
  "hits": 23,
  "suggested": 0,
  "feedback_count": 0,
  "collaboration": {
    "convo_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJUeXBlIjoiYXJ0aWNsZSIsIkNvbnZvSWQiOiIzMDAwMTA3NDI1LWVuIiwiVXNlcklkIjoiMzAxMjA4OTUyNCIsImV4cCI6MTYzNTM3MTA0NX0.ejMcReRiguS6MGEGNwmgOqDnCHpfGApmjszTQAcAm-Q"
  }
}