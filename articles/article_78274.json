{
  "id": 78274,
  "type": 1,
  "status": 2,
  "agent_id": 3763909,
  "created_at": "2013-04-23T09:27:35Z",
  "category_id": 82218,
  "folder_id": 134765,
  "title": "Play Balance application",
  "updated_at": "2019-12-09T18:35:51Z",
  "description": "<h3><span style=\"font-size: 18px;\">Overview</span></h3><p><br></p><p>The purpose of this IVR is to announce either balance or maximum call duration, depending on application settings. The Play Balance IVR application authorizes accounts by CLI only. Trusted Numbers are not supported.</p><h3><br></h3><h3><span style=\"font-size: 18px;\">Call routing setup</span></h3><p><br></p><ol><li>Add vendor connection. Set the Asterisk's host/port in the Destination field of Vendor Connection (ex: <strong>192.168.0.100:5062</strong>).</li><li>Set the CLD Translation Rule for the connection to the value <strong>s/.*/balance/</strong></li><li>Add route to this connection and specify the Play Balance Extension number.</li></ol><p><em><br></em></p><p><font size=\"1\"><em>* - don't forget to change IP 192.168.0.100 to the IP of your sippy environment.</em></font></p><h3><span style=\"font-size: 18px;\">Configuration options</span></h3><p><br>None of application specific options exists.</p><p><br></p><h3><span style=\"font-size: 18px;\">CLD based options</span></h3><p><br></p><table id=\"table32264\" width=\"1015\"><tbody><tr><td><strong>earlymedia</strong></td><td>Use early media mode till the destination has answered</td></tr><tr><td><strong>cld&lt;DEST&gt;</strong></td><td>Announce the maximum allowed call duration to the specified destination DEST. If the duration is unlimited then no duration is announced. (new in 1.7)</td></tr><tr><td><strong>nobalance</strong></td><td>Do not announce balance. Useful with cld option. (available post 1.7.1).</td></tr><tr><td><strong>nopin</strong></td><td>Never ask PIN</td></tr><tr><td><strong>onlow&lt;sum&gt;</strong></td><td>Play balance only if the user's balance is less then the sum. Format of the sum see in the example below. The use of earlymedia option together with this option is often a good idea.</td></tr><tr><td><strong>planminutes</strong></td><td class=\"current\">Play service plan minutes instead of a sum of plan minutes and duration calculated by tariff. This option does not affect actual maximum duration of a call which is a sum of plan minutes and duration calculated by tariff. NOTE : that option will not work without specifying <strong>cld&lt;DEST&gt;</strong> in the CLD Translation Rule.<br></td></tr></tbody></table><p><br></p><p>Examples of CLD translation rule:\u00a0</p><p><br></p><table id=\"table53325\" width=\"960\"><tbody><tr><td class=\"current\">\u00a0 s/.*/balance_earlymedia_nopin/<br>\u00a0 s/.*/balance_earlymedia_onlow10.23USD/<br>\u00a0 s/^/balance_nobalance_earlymedia_cld/<br>\u00a0 s/^/balance_nobalance_nopin_cld1_planminutes/ - plays the available amount of service plan minutes for '1' prefix<br></td></tr></tbody></table><p></p><p><br></p><h3><span style=\"font-size: 18px;\">Database usage</span></h3><p><br></p><p>The application uses the accounts table for authentication purposes and to retrieve the value of the user's balance. It also uses the xrates and currencies tables to convert between currencies.</p><p><br></p><p><font size=\"4\"><strong>Announce minutes instead of balance<br></strong></font></p><p><br></p><p>Insert a new parameters into <strong>ivr_config:</strong></p><pre contenteditable=\"false\" rel=\"highlighter\">INSERT INTO ivr_config (section, option, value, i_ivr_instance) VALUES ('callingcard', 'onlyminutesduration', 'true', 2);</pre><p>\u00a0</p><p><strong>i_ivr_instance</strong> - unique value, use value 2 or higher</p><p><br></p><p>In the CLD translation rule<strong>\u00a0'instanceX'</strong> parameter with corresponding value must be inserted, e.g.</p><p><span data-darkreader-inline-bgcolor=\"\" style=\"background-color: rgb(255, 255, 255); --darkreader-inline-bgcolor:#181a1b;\"><br></span></p><table border=\"1\" cellpadding=\"0\" cellspacing=\"0\" id=\"table24325\" style=\"border-collapse: collapse;\" width=\"960\"><tbody><tr><td class=\"current\"><span data-darkreader-inline-bgcolor=\"\" style=\"background-color: rgb(216, 216, 216); --darkreader-inline-bgcolor:#232627;\"><span data-darkreader-inline-bgcolor=\"\" style=\"background-color: rgb(255, 255, 255); --darkreader-inline-bgcolor:#181a1b;\">s/^/balance_earlymedia_cld/</span></span></td></tr></tbody></table><p><br></p><p></p><p>turns into</p><table border=\"1\" cellpadding=\"0\" cellspacing=\"0\" class=\"current\" id=\"table92324\" style=\"border-collapse: collapse;\" width=\"959\"><tbody><tr><td class=\"current\">s/^/balance_nobalance_earlymedia_instance2_cld/</td></tr></tbody></table><p><br></p><p><br></p><p></p>",
  "description_text": " Overview     The purpose of this IVR is to announce either balance or maximum call duration, depending on application settings. The Play Balance IVR application authorizes accounts by CLI only. Trusted Numbers are not supported.     Call routing setup      Add vendor connection. Set the Asterisk's host/port in the Destination field of Vendor Connection (ex: 192.168.0.100:5062).  Set the CLD Translation Rule for the connection to the value s/.*/balance/  Add route to this connection and specify the Play Balance Extension number.      * - don't forget to change IP 192.168.0.100 to the IP of your sippy environment.  Configuration options   None of application specific options exists.     CLD based options     earlymedia  Use early media mode till the destination has answered  cld<DEST>  Announce the maximum allowed call duration to the specified destination DEST. If the duration is unlimited then no duration is announced. (new in 1.7)  nobalance  Do not announce balance. Useful with cld option. (available post 1.7.1).  nopin  Never ask PIN  onlow<sum>  Play balance only if the user's balance is less then the sum. Format of the sum see in the example below. The use of earlymedia option together with this option is often a good idea.  planminutes  Play service plan minutes instead of a sum of plan minutes and duration calculated by tariff. This option does not affect actual maximum duration of a call which is a sum of plan minutes and duration calculated by tariff. NOTE : that option will not work without specifying cld<DEST> in the CLD Translation Rule.      Examples of CLD translation rule:\u00a0     \u00a0 s/.*/balance_earlymedia_nopin/ \u00a0 s/.*/balance_earlymedia_onlow10.23USD/ \u00a0 s/^/balance_nobalance_earlymedia_cld/ \u00a0 s/^/balance_nobalance_nopin_cld1_planminutes/ - plays the available amount of service plan minutes for '1' prefix       Database usage     The application uses the accounts table for authentication purposes and to retrieve the value of the user's balance. It also uses the xrates and currencies tables to convert between currencies.     Announce minutes instead of balance      Insert a new parameters into ivr_config:  INSERT INTO ivr_config (section, option, value, i_ivr_instance) VALUES ('callingcard', 'onlyminutesduration', 'true', 2);  \u00a0  i_ivr_instance - unique value, use value 2 or higher     In the CLD translation rule\u00a0'instanceX' parameter with corresponding value must be inserted, e.g.     s/^/balance_earlymedia_cld/      turns into  s/^/balance_nobalance_earlymedia_instance2_cld/        ",
  "seo_data": {
    "meta_title": "",
    "meta_description": "",
    "meta_keywords": ""
  },
  "tags": [],
  "attachments": [],
  "cloud_files": [],
  "thumbs_up": 4,
  "thumbs_down": 1,
  "hits": 1017,
  "suggested": 0,
  "feedback_count": 0,
  "collaboration": {
    "convo_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJUeXBlIjoiYXJ0aWNsZSIsIkNvbnZvSWQiOiI3ODI3NC1lbiIsIlVzZXJJZCI6IjMwMTIwODk1MjQiLCJleHAiOjE2MzUzNzExMjN9.CYAE_d6Ie6XJgz1MvcyoxrzZIyX_b0IDL19tLapekHo"
  }
}