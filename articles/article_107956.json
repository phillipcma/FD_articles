{
  "id": 107956,
  "type": 1,
  "status": 2,
  "agent_id": 3763909,
  "created_at": "2013-07-10T17:25:10Z",
  "category_id": 81138,
  "folder_id": 133138,
  "title": "Local Calling - Inter/Intra State Rating",
  "updated_at": "2021-02-03T11:34:37Z",
  "description": "<h2>General</h2><p><br></p><p>\u00a0 \u00a0 <font>Local Calling is a feature that allows charging calls local rates. \u00a0<br><br></font></p><h2><font><strong><u>Detecting if a call is local</u></strong> (only if Local Calling is Enabled on Tariff or if Destination Set is checked)</font></h2><p><br></p><ul><li><span style=\"font-size: 16px;\"><span style=\"font-size: 12pt; font-family: Arial; color: rgb(0, 0, 0); font-weight: 400;\">If LRN is enabled for the Routing Group, at least one prefix Tariff/Destination matches, and\u00a0</span><span style=\"font-size: 12pt; font-family: Arial; color: rgb(0, 0, 0); font-weight: 400;\">Area Name is not blank; then,</span><span style=\"font-size: 12pt; font-family: Arial; color: rgb(0, 0, 0); font-weight: 400;\">\u00a0LRN lookup for CLI will take place. \u00a0Local Calling check is done based on the incoming LRN CLI. The Ignore LRN setting from Connection forces the Local Calling check to use the CLI instead of the LRN CLI.\u00a0</span><span style=\"font-size: 12pt; font-family: Arial; color: rgb(0, 0, 0); font-weight: 700;\">Starting from 5.2</span></span></li></ul><p><br></p><ul><li><h3><span style=\"font-size: 16px;\">The CLI Validation Rule configured on Tariff/Destination Set is applied to the CLI (LRN CLI for the 5.2 case above) that is checked, if it does <strong>match</strong> OR is <strong>blank</strong>:</span></h3></li></ul><ol><li>A Rate is looked up by CLD through prefix search and the area_name attribute if the resulting rate is expected to be listed and valid</li><li>All the Rates with the same area_name are fetched from the Tariff and the CLI is checked against the Set using prefix search. If a Rate is found, then the call is considered to be local. The search is exclusively to check for Local Calling so prices and intervals from the Rate that is found are not used</li><li>If the call is local then, <strong>local_price_1, local_price_N, local_interval_1 and local_interval_N</strong> are used for the billing and loss protection check</li></ol><p><br></p><ul><li><h3><span style=\"font-size: 16px;\">The CLI Validation Rule configured on the Tariff/Destination Set is applied to the CLI (LRN CLI for the 5.2 case above) that is checked, if</span> it <span style=\"font-size: 16px;\">does <strong>NOT</strong> match:</span></h3></li></ul><ol><li>A Rate is looked up by CLD through prefix search and the <strong>a</strong><strong>rea_name</strong> attribute if the resulting rate is expected to be listed and valid</li><li><strong>local_price_1, local_price_N, local_interval_1 and local_interval_N</strong> are used for the billing and loss protection check</li></ol><p><font><br>This procedure is exactly the same for the Destination Sets.</font></p><p><br></p><h2><font>Call Example:</font></h2><p><br></p><p><font>1. Sippy Softswitch receives a call with CLD (<strong>38044</strong>555111) and CLI (<strong>380442</strong>111222)</font></p><p><br></p><p><font>2. The System tries to find an appropriate prefix for the CLD number and gathers all possible prefixes from Tariff</font></p><p><br></p><p><font>3. Tariff is checked for a Local Calling Enabled flag to be set. If the flag is set, then the Local Calling check will follow</font></p><p><br></p><p><font>4. For 5.2 or higher versions LRN Enabled is checked for the Routing Group. If it's enabled, then:</font></p><p><font>4.1 The prefixes retrieved are checked for area_name configuration, if at least one prefix has a valid configuration, LRN lookup for CLI is carried out. If an Ignore LRN checkbox for the corresponding Connection is not set then a Local Calling check would be done for every Routing Entry based on the incoming LRN CLI\u00a0</font></p><p><br></p><p>5<font>. For example: prefix <strong>38044</strong> has been found in the Tariff for the CLD number and <strong>area_name = \"KV\"</strong> for that prefix</font></p><p><br></p><p>6<font>. Then the system tries to gather all possible prefixes with the same <strong>area_name = \"KV\"</strong> in that Tariff</font></p><p><br></p><p>7<font>. When prefixes with the same <strong>area</strong></font><font><strong>_name</strong> are found, the system tries to find an appropriate prefix for CLI (<strong>380442</strong>) between them<br></font></p><p><br></p><p><font><em>(Rate for the CLI will not be used in further charges and the check is only for the identification of \"Local Calling\")</em></font></p><p><br></p><p>8<font>. If <font>an appropriate prefix for CLI (<strong>380442</strong>)</font> is detected, the system tries to bill the call using the configuration \"Local Calling\" (of prefix <strong>38044</strong>) instead of the configuration \"Basic Parameters\" and the call is considered local</font></p><p><br></p><p>9<font>. The same scenario occurs for each Destination Set from the Routing Group Members that was matched at the call attempt<br></font></p><p><font><br></font></p><p><br></p><p><font><em><strong>PLEASE NOTE,</strong> Area Name in the \"Destinations\" menu is not important for the \"Local Calling\" scenario, only the Area Name from rate/route is considered.</em></font></p><p><em><br></em></p><h2><font>Example of validation rule:</font></h2><p><strong><u><font><br></font></u></strong></p><p><strong><font>(?=</font></strong><sup><font><strong>.*[a-zA-Z].*$)</strong> - if you set this rule, then all calls with alphabetic CLI will be recognized as non local calls.</font><br></sup></p><p><sup><br></sup></p><h2 id=\"Screen-Shots:\">See example:</h2><p><br></p><p>1. There are 3 prefixes in Tariff. Two of them (38044, 380442) use the area_name = 'KV' and one (38046) uses area_name = 'CN'</p><p style=\"text-align: center;\"><img class=\"fr-dib\" src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3026007271/original/j-soCEIZhgiyq75GRM_L_nsMYkWF8ZOKyg.png?1485960510\" data-filelink=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3026007271/original/j-soCEIZhgiyq75GRM_L_nsMYkWF8ZOKyg.png?1485960510\" data-fileid=\"3026007271\" data-uniquekey=\"1485956301698\"></p><p style=\"text-align: center;\"><br></p><div style=\"text-align: center;\"><span style=\"line-height: 16px;\"><img class=\"fr-dib\" src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3026007944/original/-akn9lzjff4RZ2NxSLtafszmKeCRNeigAg.png?1485961561\" data-filelink=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3026007944/original/-akn9lzjff4RZ2NxSLtafszmKeCRNeigAg.png?1485961561\" data-fileid=\"3026007944\" data-uniquekey=\"1485956301698\"></span></div><p style=\"text-align: center;\"><br></p><p style=\"text-align: center;\"><img class=\"fr-dib\" src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3026007954/original/WoTOF5iuLQaIylerRASR_YK1LQtp1Q_f2Q.png?1485961573\" data-filelink=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3026007954/original/WoTOF5iuLQaIylerRASR_YK1LQtp1Q_f2Q.png?1485961573\" data-fileid=\"3026007954\" data-uniquekey=\"1485956301698\"></p><h2><strong><br></strong></h2><h2><strong>Call is defined as in<u>tra</u>state:</strong></h2><p style=\"text-align: center;\"><br></p><p style=\"text-align: center;\"><img class=\"fr-dib\" src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3026007295/original/bQ1z3lKzDahFWWfbahxSvTW75341a8-0wQ.png?1485960546\" data-filelink=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3026007295/original/bQ1z3lKzDahFWWfbahxSvTW75341a8-0wQ.png?1485960546\" data-fileid=\"3026007295\" data-uniquekey=\"1485956301698\"></p><h2><strong><br></strong></h2><h2 id=\"Ifcallhasnotbeenidentifiedaslocalyouwillseethefollowing:\"><strong>Call is defined as in<u>ter</u>state (originated from outside Local Area):</strong></h2><p style=\"text-align: center;\"><br></p><p><img class=\"fr-dib\" src=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3026007837/original/6OKRExgkpNmkiowulc_0zuoJt9qygC8eyA.png?1485961427\" data-filelink=\"https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/3026007837/original/6OKRExgkpNmkiowulc_0zuoJt9qygC8eyA.png?1485961427\" data-fileid=\"3026007837\" data-uniquekey=\"1485956301698\"></p><p><br></p>",
  "description_text": " General     \u00a0 \u00a0 Local Calling is a feature that allows charging calls local rates. \u00a0    Detecting if a call is local (only if Local Calling is Enabled on Tariff or if Destination Set is checked)      If LRN is enabled for the Routing Group, at least one prefix Tariff/Destination matches, and\u00a0Area Name is not blank; then,\u00a0LRN lookup for CLI will take place. \u00a0Local Calling check is done based on the incoming LRN CLI. The Ignore LRN setting from Connection forces the Local Calling check to use the CLI instead of the LRN CLI.\u00a0Starting from 5.2        The CLI Validation Rule configured on Tariff/Destination Set is applied to the CLI (LRN CLI for the 5.2 case above) that is checked, if it does match OR is blank:     A Rate is looked up by CLD through prefix search and the area_name attribute if the resulting rate is expected to be listed and valid  All the Rates with the same area_name are fetched from the Tariff and the CLI is checked against the Set using prefix search. If a Rate is found, then the call is considered to be local. The search is exclusively to check for Local Calling so prices and intervals from the Rate that is found are not used  If the call is local then, local_price_1, local_price_N, local_interval_1 and local_interval_N are used for the billing and loss protection check        The CLI Validation Rule configured on the Tariff/Destination Set is applied to the CLI (LRN CLI for the 5.2 case above) that is checked, if it does NOT match:     A Rate is looked up by CLD through prefix search and the area_name attribute if the resulting rate is expected to be listed and valid  local_price_1, local_price_N, local_interval_1 and local_interval_N are used for the billing and loss protection check    This procedure is exactly the same for the Destination Sets.     Call Example:     1. Sippy Softswitch receives a call with CLD (38044555111) and CLI (380442111222)     2. The System tries to find an appropriate prefix for the CLD number and gathers all possible prefixes from Tariff     3. Tariff is checked for a Local Calling Enabled flag to be set. If the flag is set, then the Local Calling check will follow     4. For 5.2 or higher versions LRN Enabled is checked for the Routing Group. If it's enabled, then:  4.1 The prefixes retrieved are checked for area_name configuration, if at least one prefix has a valid configuration, LRN lookup for CLI is carried out. If an Ignore LRN checkbox for the corresponding Connection is not set then a Local Calling check would be done for every Routing Entry based on the incoming LRN CLI\u00a0     5. For example: prefix 38044 has been found in the Tariff for the CLD number and area_name = \"KV\" for that prefix     6. Then the system tries to gather all possible prefixes with the same area_name = \"KV\" in that Tariff     7. When prefixes with the same area_name are found, the system tries to find an appropriate prefix for CLI (380442) between them      (Rate for the CLI will not be used in further charges and the check is only for the identification of \"Local Calling\")     8. If an appropriate prefix for CLI (380442) is detected, the system tries to bill the call using the configuration \"Local Calling\" (of prefix 38044) instead of the configuration \"Basic Parameters\" and the call is considered local     9. The same scenario occurs for each Destination Set from the Routing Group Members that was matched at the call attempt         PLEASE NOTE, Area Name in the \"Destinations\" menu is not important for the \"Local Calling\" scenario, only the Area Name from rate/route is considered.     Example of validation rule:     (?=.*[a-zA-Z].*$) - if you set this rule, then all calls with alphabetic CLI will be recognized as non local calls.      See example:     1. There are 3 prefixes in Tariff. Two of them (38044, 380442) use the area_name = 'KV' and one (38046) uses area_name = 'CN'                 Call is defined as intrastate:          Call is defined as interstate (originated from outside Local Area):         ",
  "seo_data": {
    "meta_title": "",
    "meta_description": "",
    "meta_keywords": ""
  },
  "tags": [],
  "attachments": [],
  "cloud_files": [],
  "thumbs_up": 1,
  "thumbs_down": 1,
  "hits": 1523,
  "suggested": 0,
  "feedback_count": 0,
  "collaboration": {
    "convo_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJUeXBlIjoiYXJ0aWNsZSIsIkNvbnZvSWQiOiIxMDc5NTYtZW4iLCJVc2VySWQiOiIzMDEyMDg5NTI0IiwiZXhwIjoxNjM1MzcxMDE0fQ.NzTv1wjw9w68ngyyBkuWjNx-ko7PT-UKUpHSh_RDLoY"
  }
}